[
  {
    "id": "ann-intro",
    "proofId": "cauchy-schwarz",
    "range": {"startLine": 6, "endLine": 47},
    "type": "concept",
    "title": "Cauchy-Schwarz Inequality: Wiedijk #78",
    "content": "**The Cauchy-Schwarz Inequality**:\n\nFor vectors $u, v$ in an inner product space:\n$$|\\langle u, v \\rangle| \\leq \\|u\\| \\cdot \\|v\\|$$\n\nFor sequences $(a_1, \\ldots, a_n)$ and $(b_1, \\ldots, b_n)$:\n$$(\\sum a_i b_i)^2 \\leq (\\sum a_i^2)(\\sum b_i^2)$$\n\nEquality iff $u$ and $v$ are linearly dependent.\n\n**Historical**: Cauchy (1821), Bunyakovsky (1859), Schwarz (1888).\n\n**Applications**: Functional analysis, quantum mechanics, machine learning.",
    "significance": "critical",
    "relatedConcepts": ["inner product", "norm", "linear dependence"]
  },
  {
    "id": "ann-inner-product",
    "proofId": "cauchy-schwarz",
    "range": {"startLine": 51, "endLine": 80},
    "type": "theorem",
    "title": "Inner Product Space Form",
    "content": "**Abstract Cauchy-Schwarz (Wiedijk #78)**:\n\nFor $u, v$ in a real inner product space:\n$$|\\langle u, v \\rangle_\\mathbb{R}| \\leq \\|u\\| \\cdot \\|v\\|$$\n\n**Lean**:\n```lean\ntheorem cauchy_schwarz_inner (u v : E) :\n    |⟪u, v⟫_ℝ| ≤ ‖u‖ * ‖v‖ := abs_real_inner_le_norm u v\n```\n\n**Squared Form**:\n$$\\langle u, v \\rangle^2 \\leq \\langle u, u \\rangle \\cdot \\langle v, v \\rangle$$\n\n**Key**: Uses $\\|u\\|^2 = \\langle u, u \\rangle$.",
    "mathContext": "|⟨u,v⟩| ≤ ‖u‖·‖v‖",
    "significance": "critical",
    "relatedConcepts": ["InnerProductSpace", "abs_real_inner_le_norm", "norm"]
  },
  {
    "id": "ann-two-variable",
    "proofId": "cauchy-schwarz",
    "range": {"startLine": 81, "endLine": 115},
    "type": "theorem",
    "title": "Two-Variable Form",
    "content": "**Elementary Proof for $n = 2$**:\n\n$$(a_1 b_1 + a_2 b_2)^2 \\leq (a_1^2 + a_2^2)(b_1^2 + b_2^2)$$\n\n**Proof**: The difference equals $(a_1 b_2 - a_2 b_1)^2 \\geq 0$!\n\n**Equality Condition**:\n$$\\text{Equality} \\Leftrightarrow a_1 b_2 = a_2 b_1$$\n\ni.e., vectors $(a_1, a_2)$ and $(b_1, b_2)$ are proportional.\n\n**Lean**: Uses `sq_nonneg` and `nlinarith` for the key step.",
    "mathContext": "(a₁b₁ + a₂b₂)² ≤ (a₁² + a₂²)(b₁² + b₂²)",
    "significance": "major",
    "relatedConcepts": ["sq_nonneg", "proportionality", "nlinarith"]
  },
  {
    "id": "ann-finite-sum",
    "proofId": "cauchy-schwarz",
    "range": {"startLine": 116, "endLine": 158},
    "type": "theorem",
    "title": "Finite Sum Form",
    "content": "**Cauchy-Schwarz for Sequences**:\n\nFor $a, b : \\text{Fin } n \\to \\mathbb{R}$:\n$$(\\sum_i a_i b_i)^2 \\leq (\\sum_i a_i^2)(\\sum_i b_i^2)$$\n\n**Proof Strategy**:\n1. View sequences as vectors in $\\mathbb{R}^n$ (EuclideanSpace)\n2. Inner product = dot product\n3. Apply abstract Cauchy-Schwarz\n\n**Non-squared Form**:\n$$|\\sum a_i b_i| \\leq \\sqrt{\\sum a_i^2} \\cdot \\sqrt{\\sum b_i^2}$$\n\n**Mathlib**: `EuclideanSpace.inner_eq_star_dotProduct`",
    "mathContext": "(Σ aᵢbᵢ)² ≤ (Σ aᵢ²)(Σ bᵢ²)",
    "significance": "major",
    "relatedConcepts": ["EuclideanSpace", "dot product", "Fin n"]
  },
  {
    "id": "ann-equality",
    "proofId": "cauchy-schwarz",
    "range": {"startLine": 159, "endLine": 180},
    "type": "theorem",
    "title": "Equality Characterization",
    "content": "**When Does Equality Hold?**\n\n$$|\\langle u, v \\rangle| = \\|u\\| \\cdot \\|v\\| \\quad \\Leftrightarrow \\quad u = c \\cdot v \\text{ for some } c$$\n\ni.e., vectors are **linearly dependent** (parallel).\n\n**Lean**:\n```lean\ntheorem cauchy_schwarz_eq_iff_parallel (hu : u ≠ 0) (hv : v ≠ 0) :\n    |⟪u, v⟫_ℝ| = ‖u‖ * ‖v‖ ↔ ∃ c : ℝ, u = c • v\n```\n\n**Geometric**: Maximum inner product when vectors point in the same direction.",
    "mathContext": "equality ⟺ linear dependence",
    "significance": "major",
    "relatedConcepts": ["linear dependence", "parallel vectors", "smul"]
  },
  {
    "id": "ann-examples",
    "proofId": "cauchy-schwarz",
    "range": {"startLine": 181, "endLine": 197},
    "type": "note",
    "title": "Verified Examples",
    "content": "**Concrete Examples**:\n\n**Strict Inequality**:\n$(1 \\cdot 2 + 3 \\cdot 4)^2 = 196 \\leq 200 = (1^2 + 3^2)(2^2 + 4^2)$\n\nVectors $(1, 3)$ and $(2, 4)$ are NOT parallel.\n\n**Equality Case**:\n$(1 \\cdot 2 + 2 \\cdot 4)^2 = 100 = (1^2 + 2^2)(2^2 + 4^2)$\n\nVectors $(1, 2)$ and $(2, 4) = 2 \\cdot (1, 2)$ ARE parallel.\n\nAll verified with `norm_num`.",
    "significance": "minor",
    "relatedConcepts": ["examples", "norm_num", "parallel case"]
  },
  {
    "id": "ann-triangle",
    "proofId": "cauchy-schwarz",
    "range": {"startLine": 198, "endLine": 213},
    "type": "theorem",
    "title": "Application: Triangle Inequality",
    "content": "**Triangle Inequality via Cauchy-Schwarz**:\n\n$$\\|u + v\\|^2 \\leq (\\|u\\| + \\|v\\|)^2$$\n\n**Proof**:\n1. Expand: $\\|u + v\\|^2 = \\|u\\|^2 + 2\\langle u, v \\rangle + \\|v\\|^2$\n2. By C-S: $\\langle u, v \\rangle \\leq |\\langle u, v \\rangle| \\leq \\|u\\| \\cdot \\|v\\|$\n3. Target: $(\\|u\\| + \\|v\\|)^2 = \\|u\\|^2 + 2\\|u\\|\\|v\\| + \\|v\\|^2$\n4. Compare middle terms!\n\nSo Cauchy-Schwarz implies the triangle inequality.",
    "mathContext": "‖u + v‖ ≤ ‖u‖ + ‖v‖",
    "significance": "major",
    "relatedConcepts": ["triangle inequality", "norm_add_sq_real"]
  },
  {
    "id": "ann-correlation",
    "proofId": "cauchy-schwarz",
    "range": {"startLine": 214, "endLine": 225},
    "type": "theorem",
    "title": "Application: Correlation Bound",
    "content": "**Covariance/Correlation Bound**:\n\n$$\\frac{|\\langle u, v \\rangle|}{\\|u\\| \\cdot \\|v\\|} \\leq 1$$\n\n**Interpretation**: The **correlation coefficient** $\\rho$ satisfies $|\\rho| \\leq 1$.\n\nFor centered random variables as vectors:\n- $\\langle u, v \\rangle$ = covariance\n- $\\|u\\|$ = standard deviation\n- $\\rho = \\langle u, v \\rangle / (\\|u\\| \\cdot \\|v\\|)$\n\n**Cauchy-Schwarz is the mathematical reason correlation is bounded by 1!**",
    "mathContext": "|ρ| ≤ 1",
    "significance": "major",
    "relatedConcepts": ["correlation", "covariance", "statistics"]
  }
]

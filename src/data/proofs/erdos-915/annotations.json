[
  {
    "id": "ann-e915-path",
    "proofId": "erdos-915",
    "range": { "startLine": 42, "endLine": 49 },
    "type": "definition",
    "title": "Path Structure",
    "content": "A `Path G u v` represents a path from $u$ to $v$ in graph $G$, storing the vertex list with proofs that it has length $\\geq 2$, starts at $u$, ends at $v$, and all consecutive vertex pairs are adjacent in $G$. This is a concrete representation (vertex list) rather than the inductive `Walk` type in Mathlib.",
    "mathContext": "In graph theory, a path is a walk with no repeated vertices. Here the path is represented as a list of vertices with an adjacency invariant (`is_walk`), which is more explicit than Mathlib's `SimpleGraph.Walk` inductive type but serves the same purpose for stating disjointness conditions.",
    "relatedConcepts": ["SimpleGraph.Walk", "SimpleGraph.Path", "List.get", "List.head?", "List.getLast?"],
    "significance": "key"
  },
  {
    "id": "ann-e915-vertex-disjoint",
    "proofId": "erdos-915",
    "range": { "startLine": 51, "endLine": 56 },
    "type": "definition",
    "title": "Vertex-Disjoint Paths",
    "content": "`VertexDisjoint G u v p1 p2` means paths $p_1$ and $p_2$ share no **internal** vertices. The internal vertices are obtained by dropping the first and last elements (the shared endpoints $u$ and $v$). Two paths may share their endpoints but no intermediate vertices.",
    "mathContext": "Vertex-disjointness is the stronger of the two disjointness conditions. By Menger's theorem, the maximum number of internally vertex-disjoint $u$-$v$ paths equals the minimum vertex cut separating $u$ and $v$. The `drop 1 |>.dropLast` operation extracts internal vertices from the path's vertex list.",
    "relatedConcepts": ["List.drop", "List.dropLast", "List.Mem", "Menger's theorem", "vertex cut"],
    "significance": "critical"
  },
  {
    "id": "ann-e915-edge-disjoint",
    "proofId": "erdos-915",
    "range": { "startLine": 58, "endLine": 66 },
    "type": "definition",
    "title": "Edge-Disjoint Paths",
    "content": "`EdgeDisjoint G u v p1 p2` means paths $p_1$ and $p_2$ share no edges. An edge is represented as a pair of consecutive vertices in the path list. Since edges in a simple graph are unordered, the check tests both orientations: $e_1 \\neq e_2$ and $e_1 \\neq (e_2.2, e_2.1)$.",
    "mathContext": "Edge-disjointness is weaker than vertex-disjointness: vertex-disjoint paths are automatically edge-disjoint, but not conversely. By the edge version of Menger's theorem, the maximum number of edge-disjoint $u$-$v$ paths equals the minimum edge cut. The orientation check handles the fact that `SimpleGraph` edges are symmetric ($G.Adj u v \\leftrightarrow G.Adj v u$).",
    "relatedConcepts": ["SimpleGraph.Adj", "Sym2", "edge cut", "Menger's theorem (edge version)"],
    "significance": "critical"
  },
  {
    "id": "ann-e915-m-vertex-disjoint",
    "proofId": "erdos-915",
    "range": { "startLine": 68, "endLine": 76 },
    "type": "definition",
    "title": "m Vertex/Edge-Disjoint Paths and Graph Predicates",
    "content": "`HasMVertexDisjointPaths G u v m` asserts the existence of $m$ paths from $u$ to $v$ that are pairwise vertex-disjoint, indexed by `Fin m`. Similarly for `HasMEdgeDisjointPaths`. The predicates `ContainsMVertexDisjointPair` and `ContainsMEdgeDisjointPair` existentially quantify over the vertex pair $(u, v)$ with $u \\neq v$.",
    "mathContext": "The `Fin m` indexing ensures exactly $m$ paths are provided, and the pairwise condition $\\forall i \\neq j$ ensures all pairs are disjoint. The `Contains` predicates add the existential layer needed for the extremal problem: we ask whether *some* pair of vertices has $m$ disjoint paths, not a specific pair.",
    "relatedConcepts": ["Fin", "Fintype", "existential quantification", "pairwise property"],
    "significance": "key"
  },
  {
    "id": "ann-e915-k-function",
    "proofId": "erdos-915",
    "range": { "startLine": 88, "endLine": 93 },
    "type": "definition",
    "title": "Function k_m(n): Vertex-Disjoint Threshold",
    "content": "**$k_m(n)$** is the minimum number of edges such that any graph with $n$ vertices and $k_m(n)$ edges contains a vertex pair connected by $m$ vertex-disjoint paths. Axiomatized because computing exact extremal thresholds requires solving optimization problems over all graphs on $n$ vertices.",
    "mathContext": "This is a Turán-type extremal function: $k_m(n) = \\min\\{e : \\text{every } n\\text{-vertex graph with } e \\text{ edges has } m \\text{ vertex-disjoint paths between some pair}\\}$. The Bollobás-Erdős conjecture predicts $k_m(n) = (m/2)n + O(1)$, which turns out to be correct only for $m \\leq 4$.",
    "relatedConcepts": ["extremal graph theory", "Turán number", "ex(n, H)", "Ramsey theory"],
    "significance": "critical"
  },
  {
    "id": "ann-e915-ell-function",
    "proofId": "erdos-915",
    "range": { "startLine": 95, "endLine": 102 },
    "type": "definition",
    "title": "Function ℓ_m(n): Edge-Disjoint Threshold",
    "content": "**$\\ell_m(n)$** is the minimum number of edges for $m$ edge-disjoint paths. The axiom `ell_le_k` states $\\ell_m(n) \\leq k_m(n)$, which follows because any collection of vertex-disjoint paths is automatically edge-disjoint.",
    "mathContext": "The inequality $\\ell_m(n) \\leq k_m(n)$ is strict for $m \\geq 5$: vertex-disjoint paths are harder to force. For $m \\leq 4$, Leonard (1972) showed $\\ell_m(n) = k_m(n)$, meaning the two notions coincide for small $m$.",
    "relatedConcepts": ["ell_le_k", "leonard_small_m", "monotonicity of extremal functions"],
    "significance": "critical"
  },
  {
    "id": "ann-e915-conjecture",
    "proofId": "erdos-915",
    "range": { "startLine": 106, "endLine": 113 },
    "type": "definition",
    "title": "Bollobás-Erdős Conjecture",
    "content": "**The Conjecture (1962):** For all $m \\geq 2$: $k_m(1 + (m-1)n) = 1 + \\binom{m}{2} \\cdot n$. This predicts $k_m(n) = (m/2) \\cdot n + O(1)$ linear growth. The `choose m 2` term uses Lean's `Nat.choose` for the binomial coefficient $\\binom{m}{2} = m(m-1)/2$.",
    "mathContext": "The conjecture arises from the extremal construction: $n$ copies of $K_m$ sharing a single vertex have exactly $1 + (m-1)n$ vertices and $1 + \\binom{m}{2}n$ edges, with no $m$ vertex-disjoint paths. The conjecture asserts this construction is extremal — that adding one more edge forces the desired connectivity.",
    "relatedConcepts": ["Nat.choose", "complete graph K_m", "extremal construction", "Turán-type conjecture"],
    "significance": "critical"
  },
  {
    "id": "ann-e915-extremal",
    "proofId": "erdos-915",
    "range": { "startLine": 115, "endLine": 125 },
    "type": "theorem",
    "title": "Extremal Construction",
    "content": "The construction of $n$ copies of $K_m$ sharing a single vertex serves as the **lower bound witness**: a graph with $1 + (m-1)n$ vertices and $1 + \\binom{m}{2}n$ edges that avoids $m$ vertex-disjoint paths between any pair. This shows $k_m(1 + (m-1)n) \\geq 1 + \\binom{m}{2}n + 1$.",
    "mathContext": "The construction works because any two vertices in different copies of $K_m$ can only connect through the shared vertex, limiting vertex-disjoint paths. The vertex and edge counts follow from: each $K_m$ contributes $m-1$ new vertices and $\\binom{m}{2}$ edges, minus the $m-1$ edges incident to the shared vertex that are counted per copy.",
    "relatedConcepts": ["Fintype.card", "edgeFinset.card", "ContainsMVertexDisjointPair", "complete graph"],
    "significance": "key"
  },
  {
    "id": "ann-e915-k2",
    "proofId": "erdos-915",
    "range": { "startLine": 129, "endLine": 130 },
    "type": "theorem",
    "title": "k_2(n) = n: The Trivial Case",
    "content": "$k_2(n) = n$ for $n \\geq 2$. Any graph with $n$ vertices and $n$ edges contains a cycle, hence two internally vertex-disjoint paths between some pair of vertices on that cycle.",
    "mathContext": "A graph on $n$ vertices with $n$ edges must contain a cycle (since a tree on $n$ vertices has exactly $n-1$ edges). Any cycle provides two vertex-disjoint paths between any pair of vertices on it — the two arcs of the cycle.",
    "relatedConcepts": ["cycle", "tree", "Euler's formula for trees"],
    "significance": "supporting"
  },
  {
    "id": "ann-e915-bartfai",
    "proofId": "erdos-915",
    "range": { "startLine": 132, "endLine": 134 },
    "type": "theorem",
    "title": "Bártfai (1960): k_3 Case",
    "content": "**Bártfai's Result:** $k_3(2n) = 3n - 1$ and $k_3(2n+1) = 3n + 1$. The parity-dependent formula shows that the exact threshold for 3 vertex-disjoint paths depends on whether the vertex count is even or odd.",
    "mathContext": "Bártfai proved this before the general Bollobás-Erdős conjecture was formulated. The conjecture predicts $k_3(1 + 2n) = 1 + 3n$, which matches $k_3(2n+1) = 3n + 1$. The even case $k_3(2n) = 3n - 1$ is consistent since $2n = 1 + 2(n - 1/2)$ doesn't fit the conjecture's parametrization exactly.",
    "relatedConcepts": ["k_2", "bollobas_k4", "conjecture_m3"],
    "significance": "key"
  },
  {
    "id": "ann-e915-bollobas-k4",
    "proofId": "erdos-915",
    "range": { "startLine": 136, "endLine": 137 },
    "type": "theorem",
    "title": "Bollobás (1966): k_4 Case",
    "content": "**Bollobás's Result:** $k_4(n) = 2n - 1$ for $n \\geq 4$. This is the last case where the vertex-disjoint conjecture holds. The clean formula $2n - 1$ matches the conjectured growth rate of $(m/2)n = 2n$ up to the constant.",
    "mathContext": "Bollobás proved this six years after Bártfai's $k_3$ result, completing the small cases. The proof required careful extremal graph theory arguments. The conjecture predicts $k_4(1 + 3n) = 1 + 6n$, which is equivalent to $k_4(n) = 2n - 1$ when $n = 1 + 3k$.",
    "relatedConcepts": ["bartfai_k3_even", "conjecture_m4", "extremal graph theory"],
    "significance": "key"
  },
  {
    "id": "ann-e915-conjecture-small-m",
    "proofId": "erdos-915",
    "range": { "startLine": 139, "endLine": 149 },
    "type": "theorem",
    "title": "Conjecture TRUE for m = 2, 3, 4",
    "content": "`conjecture_small_m` packages the three positive results as a conjunction: `BollobasErdosConjecture 2 ∧ BollobasErdosConjecture 3 ∧ BollobasErdosConjecture 4`. Each component is axiomatized since deriving the conjecture format from the explicit parity-dependent formulas requires careful modular arithmetic.",
    "mathContext": "The axiomatization of `conjecture_m2`, `conjecture_m3`, `conjecture_m4` reflects the gap between knowing explicit formulas (like $k_4(n) = 2n - 1$) and verifying the conjecture's specific parametrization $k_m(1 + (m-1)n) = 1 + \\binom{m}{2}n$, which requires substituting and simplifying with `Nat.choose`.",
    "relatedConcepts": ["BollobasErdosConjecture", "Nat.choose", "conjecture_m2", "conjecture_m3", "conjecture_m4"],
    "significance": "key"
  },
  {
    "id": "ann-e915-leonard-counterexample",
    "proofId": "erdos-915",
    "range": { "startLine": 153, "endLine": 166 },
    "type": "theorem",
    "title": "Leonard (1973): Counterexample for m = 5",
    "content": "**The Disproof:** Leonard constructed a graph with 57 vertices and 141 edges that avoids 5 vertex-disjoint paths between any pair. Since $1 + 4 \\cdot 14 = 57$ and $1 + \\binom{5}{2} \\cdot 14 = 141$, this is an exact counterexample — the conjecture predicts $k_5(57) = 141$, but this graph shows 141 edges are insufficient.",
    "mathContext": "The parameters $n = 14$ give the conjecture's predicted vertex count $1 + 4 \\cdot 14 = 57$ and edge count $1 + 10 \\cdot 14 = 141$. Leonard's construction matches these exact parameters but avoids the conclusion, directly disproving the conjecture for $m = 5$. The construction likely uses a carefully designed block structure exploiting low connectivity.",
    "relatedConcepts": ["ContainsMVertexDisjointPair", "Fintype.card", "edgeFinset.card", "conjecture_false_m5"],
    "significance": "critical"
  },
  {
    "id": "ann-e915-leonard-lower-bound",
    "proofId": "erdos-915",
    "range": { "startLine": 168, "endLine": 171 },
    "type": "theorem",
    "title": "Leonard's Asymptotic Lower Bound",
    "content": "Leonard showed $k_5(n) > (5/2 + c)n - O(1)$ for some constant $c > 0$, meaning the growth rate of $k_5$ is strictly above the conjectured $5/2$ per vertex. This is formalized using `Filter.atTop` for the eventually-for-large-$n$ quantifier and $\\mathbb{Q}$ for the constant $c$.",
    "mathContext": "The use of `∀ᶠ n in Filter.atTop` means the bound holds for all sufficiently large $n$. The rational constant $c > 0$ quantifies how much the actual threshold exceeds the conjecture. Sørensen-Thomassen later pinned down the exact coefficient as $8/3 - 5/2 = 1/6$.",
    "relatedConcepts": ["Filter.atTop", "Filter.Eventually", "Rat", "sorensen_thomassen_k5"],
    "significance": "supporting"
  },
  {
    "id": "ann-e915-sorensen-thomassen",
    "proofId": "erdos-915",
    "range": { "startLine": 173, "endLine": 180 },
    "type": "theorem",
    "title": "Sørensen-Thomassen (1974): Exact k_5 Formula",
    "content": "**Exact Formula:** $k_5(n) = \\lfloor 8n/3 \\rfloor - 3$ for $n \\geq 13$. The coefficient $8/3 \\approx 2.667$ is strictly larger than the conjectured $5/2 = 2.5$, confirming and quantifying the failure of the conjecture for $m = 5$.",
    "mathContext": "The formula $\\lfloor 8n/3 \\rfloor - 3$ in Lean uses natural number division `(8 * n) / 3 - 3`, which computes floor division. The threshold $n \\geq 13$ ensures the formula is valid (small cases may differ). The ratio $k_5(n)/n \\to 8/3$ as $n \\to \\infty$, exceeding the conjectured $5/2$ by a factor of $16/15$.",
    "relatedConcepts": ["Nat.div", "leonard_counterexample", "conjecture_false_m5"],
    "significance": "key"
  },
  {
    "id": "ann-e915-mader-disproof",
    "proofId": "erdos-915",
    "range": { "startLine": 182, "endLine": 195 },
    "type": "theorem",
    "title": "Mader (1973): General Disproof for m ≥ 6",
    "content": "**General Disproof:** For any $m \\geq 6$ and any constant $C$, there exists $n$ with $k_m(n) > mn/2 + C$. Combined with Leonard's $m = 5$ result, this shows the Bollobás-Erdős conjecture fails for **all** $m \\geq 5$. The axioms `conjecture_false_m5` and `conjecture_false_large_m` state this as negations of the conjecture.",
    "mathContext": "Mader's argument is asymptotic: for each $m \\geq 6$, the function $k_m(n)$ grows faster than $(m/2)n$ — the conjectured coefficient $m/2$ is too small. Unlike Leonard's explicit construction for $m = 5$, Mader's proof for $m \\geq 6$ uses a probabilistic or counting argument showing the growth rate exceeds the prediction.",
    "relatedConcepts": ["BollobasErdosConjecture", "leonard_counterexample", "conjecture_false_m5", "conjecture_false_large_m"],
    "significance": "critical"
  },
  {
    "id": "ann-e915-mader-edge",
    "proofId": "erdos-915",
    "range": { "startLine": 199, "endLine": 206 },
    "type": "theorem",
    "title": "Mader (1973): Edge-Disjoint Complete Solution",
    "content": "**Complete Solution:** $\\ell_m(n) = \\lfloor m(n-1)/2 + 1 \\rfloor$ for all $m \\geq 2$ and $n \\geq 2$. This confirms the Bollobás-Erdős conjecture for edge-disjoint paths. In Lean, this is `m * (n - 1) / 2 + 1` using natural number division.",
    "mathContext": "Mader's proof uses induction on $m$ and structural arguments about minimum degree. The formula $\\ell_m(n) = \\lfloor m(n-1)/2 \\rfloor + 1$ means a graph needs slightly more than $m/2$ times the number of non-isolated edges to guarantee $m$ edge-disjoint paths. The floor arises because $m(n-1)$ may be odd.",
    "relatedConcepts": ["Nat.div", "EdgeDisjointConjecture", "edge_disjoint_solved", "minimum degree"],
    "significance": "critical"
  },
  {
    "id": "ann-e915-edge-conjecture",
    "proofId": "erdos-915",
    "range": { "startLine": 208, "endLine": 213 },
    "type": "theorem",
    "title": "Edge-Disjoint Conjecture Proved",
    "content": "`EdgeDisjointConjecture m` states $\\ell_m(n) = m(n-1)/2 + 1$ for all $n \\geq 2$. The theorem `edge_disjoint_solved` proves this for all $m \\geq 2$ by directly applying `mader_edge_disjoint`. This is a genuine Lean theorem (not an axiom) since it follows from the axiomatized Mader result.",
    "mathContext": "The proof `fun _ n hn => mader_edge_disjoint m n hm hn` is a simple function application: given the hypothesis $m \\geq 2$ (from the conjecture definition) and $n \\geq 2$, apply Mader's formula. The two-line proof demonstrates that the edge-disjoint conjecture is an immediate corollary of Mader's theorem.",
    "relatedConcepts": ["mader_edge_disjoint", "EdgeDisjointConjecture", "function application"],
    "significance": "key"
  },
  {
    "id": "ann-e915-leonard-ell-values",
    "proofId": "erdos-915",
    "range": { "startLine": 215, "endLine": 226 },
    "type": "theorem",
    "title": "Specific ℓ_m Values (Leonard 1972-1973)",
    "content": "Explicit formulas for small $m$: $\\ell_m(n) = k_m(n)$ for $m \\leq 4$ (`leonard_small_m`), $\\ell_5(2n) = 5n - 2$ and $\\ell_5(2n+1) = 5n + 1$ (`leonard_ell5`), and $\\ell_6(n) = 3n - 2$ (`leonard_ell6`). These are consistent with Mader's general formula.",
    "mathContext": "The equality $\\ell_m = k_m$ for $m \\leq 4$ means that for small $m$, forcing edge-disjoint paths is exactly as hard as forcing vertex-disjoint paths. For $m = 5$, the functions diverge: $\\ell_5(n) \\approx 5n/2$ (matching the conjecture) while $k_5(n) \\approx 8n/3$ (exceeding it). This divergence is the key phenomenon the problem reveals.",
    "relatedConcepts": ["leonard_small_m", "ell_le_k", "mader_edge_disjoint"],
    "significance": "supporting"
  },
  {
    "id": "ann-e915-degree-condition",
    "proofId": "erdos-915",
    "range": { "startLine": 230, "endLine": 241 },
    "type": "theorem",
    "title": "Mader's Degree Condition",
    "content": "**Stronger Result:** If a graph $G$ has more than $(m/2)(n-1) - (1/2)\\sum_{r=0}^{m-2} e_r(G)$ edges, where $e_r(G)$ counts vertices of degree $\\leq r$, then $G$ contains $m$ edge-disjoint paths between some pair. The low-degree correction term improves the simple edge count threshold.",
    "mathContext": "The sum $\\sum_{r=0}^{m-2} e_r(G)$ is computed in Lean as `(Finset.range (m-1)).sum (fun r => (Finset.univ.filter (fun v => G.degree v ≤ r)).card)`. This counts how many vertices have degree at most $r$ for each $r < m-1$. Vertices with low degree contribute less to connectivity, so the threshold can be reduced when many low-degree vertices are present.",
    "relatedConcepts": ["SimpleGraph.degree", "Finset.sum", "Finset.filter", "Finset.range", "ContainsMEdgeDisjointPair"],
    "significance": "supporting"
  },
  {
    "id": "ann-e915-three-connected",
    "proofId": "erdos-915",
    "range": { "startLine": 245, "endLine": 258 },
    "type": "theorem",
    "title": "3-Connected Special Case (Sørensen-Thomassen 1974)",
    "content": "The Bollobás-Erdős conjecture holds for **3-connected graphs**: if $G$ is 3-connected with $1 + (m-1)n$ vertices and $\\geq 1 + \\binom{m}{2}n$ edges, then $G$ contains $m$ vertex-disjoint paths between some pair. The 3-connectivity is axiomatized as: removing any set of fewer than 3 vertices leaves the graph connected.",
    "mathContext": "The 3-connectivity condition `∀ (S : Finset V), S.card < 3 → (G.induce (univ \\ S)).Connected` says that no 2-vertex separator disconnects $G$. This rules out the low-connectivity structure exploited by Leonard's and Mader's counterexamples, which all have vertex cuts of size $< 3$. The `G.induce` operation restricts the graph to a subset of vertices.",
    "relatedConcepts": ["SimpleGraph.induce", "SimpleGraph.Connected", "Finset.card", "vertex separator", "k-connectivity"],
    "significance": "supporting"
  },
  {
    "id": "ann-e915-summary",
    "proofId": "erdos-915",
    "range": { "startLine": 278, "endLine": 292 },
    "type": "theorem",
    "title": "Main Results Summary",
    "content": "`erdos_915_summary` is the capstone theorem combining all four main results into a single conjunction:\n1. $\\text{BollobasErdosConjecture}(m)$ holds for $m = 2, 3, 4$\n2. $\\neg\\text{BollobasErdosConjecture}(5)$\n3. $\\forall m \\geq 6$, $\\neg\\text{BollobasErdosConjecture}(m)$\n4. $\\forall m \\geq 2$, $\\text{EdgeDisjointConjecture}(m)$\n\nThe proof is a direct tuple of the component results.",
    "mathContext": "The four-part conjunction cleanly separates the problem's resolution: parts (1)-(3) completely classify the vertex-disjoint conjecture by the value of $m$, while part (4) affirms the edge-disjoint version unconditionally. The proof `⟨conjecture_small_m, conjecture_false_m5, conjecture_false_large_m, edge_disjoint_solved⟩` is an anonymous constructor for the product type.",
    "relatedConcepts": ["BollobasErdosConjecture", "EdgeDisjointConjecture", "And.intro", "conjunction"],
    "significance": "critical"
  }
]

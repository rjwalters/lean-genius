[
  {
    "id": "ann-e831-header",
    "proofId": "erdos-831",
    "range": { "startLine": 1, "endLine": 30 },
    "type": "concept",
    "title": "Problem Overview",
    "content": "**Erdos Problem #831**\n\nLet h(n) be maximal such that any n points in general position (no 3 collinear, no 4 concyclic) have at least h(n) circles of different radii through triples.\n\n**Key Question:** Estimate h(n) as n -> infinity.\n\n**References:**\n- [Er75h] Erdos 1975\n- [Er92e] Erdos 1992\n\n**Related Problems:** #104 (orchard), #506 (unit distance)",
    "mathContext": "Each triple of non-collinear points determines a unique circumcircle. With n points, there are C(n,3) such circles. The question is about the minimum diversity of radii.",
    "significance": "critical",
    "relatedConcepts": ["Circumcircle", "General position", "Extremal geometry"]
  },
  {
    "id": "ann-e831-point",
    "proofId": "erdos-831",
    "range": { "startLine": 49, "endLine": 50 },
    "type": "definition",
    "title": "Point Type",
    "content": "**Point:**\n\nType alias for points in the Euclidean plane R^2.\n\n```lean\nabbrev Point := EuclideanSpace R (Fin 2)\n```\n\nThis provides the standard Euclidean metric and inner product structure.",
    "significance": "key"
  },
  {
    "id": "ann-e831-triple",
    "proofId": "erdos-831",
    "range": { "startLine": 52, "endLine": 59 },
    "type": "definition",
    "title": "Point Triple Structure",
    "content": "**PointTriple:**\n\nA structure representing three distinct points.\n\n```lean\nstructure PointTriple where\n  p1 : Point\n  p2 : Point\n  p3 : Point\n  distinct12 : p1 != p2\n  distinct13 : p1 != p3\n  distinct23 : p2 != p3\n```\n\nThe distinctness proofs ensure we can form a non-degenerate triangle.",
    "significance": "key"
  },
  {
    "id": "ann-e831-collinear",
    "proofId": "erdos-831",
    "range": { "startLine": 65, "endLine": 73 },
    "type": "definition",
    "title": "Collinearity",
    "content": "**areCollinear:**\n\nThree points are collinear if they lie on a common line.\n\n```lean\ndef areCollinear (p1 p2 p3 : Point) : Prop :=\n  exists a b c, (a != 0 or b != 0) and\n    all three points satisfy ax + by + c = 0\n```\n\nCollinear points don't determine a unique circumcircle.",
    "mathContext": "The general position constraint 'no 3 collinear' ensures every triple has a well-defined circumcircle.",
    "significance": "critical"
  },
  {
    "id": "ann-e831-concyclic",
    "proofId": "erdos-831",
    "range": { "startLine": 75, "endLine": 82 },
    "type": "definition",
    "title": "Concyclicity",
    "content": "**areConcyclic:**\n\nFour points are concyclic if they lie on a common circle.\n\n```lean\ndef areConcyclic (p1 p2 p3 p4 : Point) : Prop :=\n  exists center r, r > 0 and\n    all four points are at distance r from center\n```\n\nFour concyclic points would have equal circumradii for all 4 triples.",
    "mathContext": "The constraint 'no 4 concyclic' prevents radius collisions from geometric degeneracies.",
    "significance": "critical"
  },
  {
    "id": "ann-e831-general-position",
    "proofId": "erdos-831",
    "range": { "startLine": 84, "endLine": 94 },
    "type": "definition",
    "title": "General Position",
    "content": "**isInGeneralPosition:**\n\nA point configuration is in general position if:\n1. No three points are collinear\n2. No four points are concyclic\n\nThis is the standard assumption for the problem. It ensures:\n- Every triple has a unique circumcircle\n- No 'accidental' radius equalities from geometric structure",
    "significance": "critical"
  },
  {
    "id": "ann-e831-circumradius",
    "proofId": "erdos-831",
    "range": { "startLine": 100, "endLine": 114 },
    "type": "definition",
    "title": "Circumradius Formula",
    "content": "**circumradius:**\n\nThe radius of the circumcircle through three non-collinear points.\n\n**Formula:** R = abc / (4 * Area)\n\nwhere a, b, c are the side lengths and Area is the triangle area.\n\n```lean\nnoncomputable def circumradius (t : PointTriple) : R :=\n  let a := ||t.p2 - t.p3||\n  let b := ||t.p1 - t.p3||\n  let c := ||t.p1 - t.p2||\n  let twiceArea := |cross product magnitude|\n  (a * b * c) / (2 * twiceArea)\n```",
    "mathContext": "This is the standard formula for the circumradius of a triangle, derived from the law of sines: a/sin(A) = 2R.",
    "significance": "critical",
    "relatedConcepts": ["Circumcircle", "Law of sines", "Triangle geometry"]
  },
  {
    "id": "ann-e831-all-radii",
    "proofId": "erdos-831",
    "range": { "startLine": 127, "endLine": 134 },
    "type": "definition",
    "title": "Set of All Circumradii",
    "content": "**allCircumradii:**\n\nFor a finite point set S, the set of all circumradii from triples in S.\n\n```lean\nnoncomputable def allCircumradii (S : Finset Point) : Set R :=\n  {r | exists p1 p2 p3 in S, distinct, with circumradius = r}\n```\n\nThis is the set whose cardinality we want to minimize.",
    "significance": "key"
  },
  {
    "id": "ann-e831-h-function",
    "proofId": "erdos-831",
    "range": { "startLine": 143, "endLine": 150 },
    "type": "definition",
    "title": "The h Function",
    "content": "**h(n):**\n\nThe minimum over all n-point configurations in general position of the number of distinct circumradii.\n\n```lean\nnoncomputable def h (n : N) : N :=\n  sInf {k | exists S, |S| = n and isInGeneralPosition S and\n    countDistinctRadii S = k}\n```\n\nThis is the central object of the problem.",
    "significance": "critical"
  },
  {
    "id": "ann-e831-upper-bound",
    "proofId": "erdos-831",
    "range": { "startLine": 156, "endLine": 161 },
    "type": "theorem",
    "title": "Upper Bound",
    "content": "**h_upper_bound:**\n\nWith n points, there are C(n,3) triples, hence at most C(n,3) distinct radii.\n\n```lean\ntheorem h_upper_bound (n : N) : h n <= Nat.choose n 3\n```\n\nThis is the obvious upper bound - each triple contributes at most one radius.",
    "significance": "key"
  },
  {
    "id": "ann-e831-h-four",
    "proofId": "erdos-831",
    "range": { "startLine": 170, "endLine": 175 },
    "type": "axiom",
    "title": "h(4) Lower Bound",
    "content": "**h_four_lower:**\n\nFour points in general position give at least 2 distinct radii.\n\n```lean\naxiom h_four_lower : h 4 >= 2\n```\n\n**Why:** If all 4 circumradii (from the 4 triples) were equal, the 4 points would lie on a common circle, violating general position.",
    "mathContext": "This is the key observation: the 'no 4 concyclic' constraint forces radius diversity.",
    "significance": "critical"
  },
  {
    "id": "ann-e831-conjecture",
    "proofId": "erdos-831",
    "range": { "startLine": 181, "endLine": 199 },
    "type": "axiom",
    "title": "Main Conjecture",
    "content": "**erdos_831_conjecture:**\n\nWhat are the asymptotics of h(n)?\n\n**Possible behaviors:**\n1. h(n) = Theta(n) - linear growth\n2. h(n) = Theta(n^alpha) - polynomial growth for some alpha in (0, 2)\n3. h(n) = Theta(n^2) - quadratic growth\n\nThe problem asks to determine which case holds.\n\nAxiomatized as the disjunction of these possibilities.",
    "mathContext": "The constraint 'no 4 concyclic' suggests radii must spread out, but the rate is unknown.",
    "significance": "critical"
  },
  {
    "id": "ann-e831-regular-polygon",
    "proofId": "erdos-831",
    "range": { "startLine": 205, "endLine": 219 },
    "type": "theorem",
    "title": "Regular Polygons Fail",
    "content": "**regular_polygon_not_general:**\n\nPoints of a regular n-gon are concyclic, so they don't satisfy general position.\n\n```lean\ntheorem regular_polygon_not_general (S : Finset Point)\n    (h : isRegularPolygon S) (hcard : S.card >= 4) :\n    not isInGeneralPosition S\n```\n\nRegular polygons cannot be used to construct minimizing configurations.",
    "significance": "key"
  },
  {
    "id": "ann-e831-random",
    "proofId": "erdos-831",
    "range": { "startLine": 221, "endLine": 228 },
    "type": "axiom",
    "title": "Random Points",
    "content": "**random_points_many_radii:**\n\nRandom points in general position are expected to have many distinct radii.\n\nSpecifically: for random n points, the number of distinct radii is at least c*n for some constant c > 0.\n\nThis suggests the minimum h(n) might be linear or superlinear.",
    "significance": "supporting"
  },
  {
    "id": "ann-e831-orchard",
    "proofId": "erdos-831",
    "range": { "startLine": 234, "endLine": 242 },
    "type": "definition",
    "title": "Orchard Problem Connection",
    "content": "**orchardConfiguration:**\n\nErdos #104 studies point-line configurations, asking about the maximum number of 3-point lines.\n\nThe circle-radius problem has similar extremal flavor:\n- #104: minimize lines with >= 3 points\n- #831: minimize distinct circumradii\n\nBoth are geometric optimization over point configurations.",
    "significance": "supporting",
    "relatedConcepts": ["Erdos #104", "Point-line incidences"]
  },
  {
    "id": "ann-e831-unit-distance",
    "proofId": "erdos-831",
    "range": { "startLine": 244, "endLine": 250 },
    "type": "definition",
    "title": "Unit Distance Connection",
    "content": "**unitDistanceProblem:**\n\nErdos #506 studies repeated distances: how many pairs can have the same distance?\n\nThe circle-radius problem is analogous:\n- #506: repeated pairwise distances\n- #831: repeated circumradii (triple-wise)\n\nBoth ask about geometric multiplicity.",
    "significance": "supporting",
    "relatedConcepts": ["Erdos #506", "Unit distance graph"]
  },
  {
    "id": "ann-e831-small-cases",
    "proofId": "erdos-831",
    "range": { "startLine": 256, "endLine": 267 },
    "type": "axiom",
    "title": "Small Cases",
    "content": "**h_five_bounds and h_six_bounds:**\n\n**h(5):** With 5 points, C(5,3) = 10 triples.\nBounds: 2 <= h(5) <= 10\n\n**h(6):** With 6 points, C(6,3) = 20 triples.\nBounds: 3 <= h(6) <= 20\n\nThe exact values for small n are not known.",
    "significance": "key"
  },
  {
    "id": "ann-e831-summary",
    "proofId": "erdos-831",
    "range": { "startLine": 273, "endLine": 294 },
    "type": "theorem",
    "title": "Summary Theorem",
    "content": "**erdos_831_summary:**\n\nCombines known results:\n1. h(3) = 1 (trivial - one triple, one radius)\n2. h(4) >= 2 (non-concyclicity forces diversity)\n3. h(n) <= C(n,3) (obvious upper bound)\n\n```lean\ntheorem erdos_831_summary :\n    h 3 = 1 and h 4 >= 2 and forall n, h n <= Nat.choose n 3\n```",
    "significance": "key"
  },
  {
    "id": "ann-e831-open",
    "proofId": "erdos-831",
    "range": { "startLine": 296, "endLine": 303 },
    "type": "theorem",
    "title": "Open Question",
    "content": "**erdos_831_open_question:**\n\nThe main open question: what is the asymptotic behavior of h(n)?\n\nWe can prove existence of a positive lower bound function:\n```lean\ntheorem erdos_831_open_question :\n    exists f, (forall n >= 3, h n >= f n) and (forall n >= 3, f n > 0)\n```\n\nBut the exact growth rate remains unknown.",
    "significance": "critical"
  }
]

[
  {
    "id": "erdos-932-header",
    "proofId": "erdos-932",
    "type": "context",
    "range": { "startLine": 1, "endLine": 31 },
    "title": "Problem Overview",
    "content": "Erdős Problem #932 asks: for infinitely many r, are there at least two integers in the prime gap (p_r, p_{r+1}) whose prime factors are all smaller than the gap size? This connects prime gap distribution with smooth number theory.",
    "mathContext": "The problem concerns B-smooth numbers in short intervals. A number n is B-smooth if all prime factors of n are ≤ B. Here B = p_{r+1} - p_r (the gap size).",
    "significance": "essential",
    "relatedConcepts": ["prime gaps", "smooth numbers", "natural density"]
  },
  {
    "id": "erdos-932-nth-prime",
    "proofId": "erdos-932",
    "type": "definition",
    "range": { "startLine": 43, "endLine": 63 },
    "title": "The n-th Prime",
    "content": "We define nthPrime(n) as the n-th prime in the sequence 2, 3, 5, 7, 11, ... using Mathlib's Nat.nth function. Key properties: the sequence is strictly increasing, and each element is prime.",
    "mathContext": "nthPrime n = Nat.nth Nat.Prime n. Axioms: nthPrime 0 = 2, nthPrime 1 = 3, each value is prime, and the sequence is StrictMono.",
    "significance": "supporting",
    "relatedConcepts": ["prime numbers", "Nat.nth", "strict monotonicity"]
  },
  {
    "id": "erdos-932-prime-gap",
    "proofId": "erdos-932",
    "type": "definition",
    "range": { "startLine": 65, "endLine": 82 },
    "title": "Prime Gap Definition",
    "content": "The prime gap g_n = p_{n+1} - p_n measures the distance between consecutive primes. The gap is always positive since primes are strictly increasing. The positivity is proved from nthPrime_strictMono.",
    "mathContext": "primeGap n = nthPrime(n+1) - nthPrime(n). Theorem: primeGap n > 0 via Nat.sub_pos_of_lt from strict monotonicity.",
    "significance": "supporting",
    "relatedConcepts": ["consecutive primes", "twin primes", "prime gap distribution"]
  },
  {
    "id": "erdos-932-max-prime-factor",
    "proofId": "erdos-932",
    "type": "definition",
    "range": { "startLine": 84, "endLine": 103 },
    "title": "Maximum Prime Factor",
    "content": "maxPrimeFactor(n) returns the largest prime dividing n, or 0 if n ≤ 1. For primes p, maxPrimeFactor(p) = p. For coprime products, it distributes as the max of the factors' maxPrimeFactor values.",
    "mathContext": "maxPrimeFactor n = n.primeFactorsList.maximum?.getD 0 for n > 1, else 0. Key property: multiplicativity over coprime products.",
    "significance": "supporting",
    "relatedConcepts": ["prime factorization", "greatest prime factor", "P⁺(n)"]
  },
  {
    "id": "erdos-932-smooth-def",
    "proofId": "erdos-932",
    "type": "definition",
    "range": { "startLine": 105, "endLine": 119 },
    "title": "B-Smooth Numbers",
    "content": "A number n is B-smooth if all its prime factors are at most B, i.e., maxPrimeFactor(n) ≤ B. The number 1 is B-smooth for any B. Prime powers p^k are B-smooth whenever p ≤ B.",
    "mathContext": "isSmooth B n ≡ maxPrimeFactor n ≤ B. Theorem: one_isSmooth shows 1 is always smooth. Axiom: prime_power_isSmooth for p^k when p ≤ B.",
    "significance": "essential",
    "relatedConcepts": ["smooth numbers", "friable numbers", "factoring algorithms"]
  },
  {
    "id": "erdos-932-gap-interval",
    "proofId": "erdos-932",
    "type": "definition",
    "range": { "startLine": 121, "endLine": 161 },
    "title": "Smooth Numbers in Prime Gap",
    "content": "The open interval (p_r, p_{r+1}) between consecutive primes is constructed as Finset.Ioo. Numbers in this interval are filtered for (gap-size)-smoothness. The count smoothCount(r) records how many pass the filter.",
    "mathContext": "primesGapInterval r = Finset.Ioo (nthPrime r) (nthPrime (r+1)). smoothInGap r filters for maxPrimeFactor < primeGap r. smoothCount r = |smoothInGap r|.",
    "significance": "essential",
    "relatedConcepts": ["Finset.Ioo", "interval filtering", "smooth counting"]
  },
  {
    "id": "erdos-932-main-conjecture",
    "proofId": "erdos-932",
    "type": "conjecture",
    "range": { "startLine": 163, "endLine": 183 },
    "title": "Main Conjecture (OPEN)",
    "content": "The set { r : smoothCount(r) ≥ 2 } is infinite. In other words, infinitely many prime gaps contain at least two numbers that are smooth relative to the gap size. An alternative formulation unfolds smoothCount into explicit Finset operations.",
    "mathContext": "erdos_932: {r : ℕ | erdos932Condition r}.Infinite where erdos932Condition r ≡ smoothCount r ≥ 2.",
    "significance": "essential",
    "relatedConcepts": ["Set.Infinite", "infinitude results", "Erdős conjecture"]
  },
  {
    "id": "erdos-932-density-zero",
    "proofId": "erdos-932",
    "type": "result",
    "range": { "startLine": 185, "endLine": 218 },
    "title": "Erdős's Density-Zero Result (SOLVED)",
    "content": "Erdős proved that the natural density of r with smoothCount(r) ≥ 1 is 0. This shows that even finding ONE smooth number in most prime gaps is impossible, making the conjecture of infinitely many gaps with TWO smooth numbers highly non-trivial.",
    "mathContext": "HasDensity {r : ℕ | erdos932WeakCondition r} 0, where HasDensity S d uses Filter.Tendsto of counting ratios to nhds d.",
    "significance": "essential",
    "relatedConcepts": ["natural density", "Filter.Tendsto", "nhds"]
  },
  {
    "id": "erdos-932-example",
    "proofId": "erdos-932",
    "type": "example",
    "range": { "startLine": 220, "endLine": 243 },
    "title": "Concrete Example: r = 3",
    "content": "For r=3, primes 7 and 11 have gap 4. The interval (7,11) = {8,9,10}. Here 8 = 2³ has maxPrimeFactor 2 < 4, and 9 = 3² has maxPrimeFactor 3 < 4. Both are 4-smooth, so smoothCount(3) = 2, satisfying the Erdős condition.",
    "mathContext": "example_r3: smoothCount 3 = 2. example_satisfies: erdos932Condition 3, proved via omega from example_r3.",
    "significance": "supporting",
    "relatedConcepts": ["prime powers", "perfect powers", "small examples"]
  },
  {
    "id": "erdos-932-difficulty",
    "proofId": "erdos-932",
    "type": "context",
    "range": { "startLine": 245, "endLine": 262 },
    "title": "Why This Problem Is Hard",
    "content": "The challenge is proving infinitely many r exist despite their density being zero. Smooth numbers must lie in short intervals (prime gaps) AND have only small prime factors. The interplay between gap size and smooth number distribution is subtle, requiring delicate sieve-theoretic arguments.",
    "mathContext": "For n to be (gap-size)-smooth: n ∈ (p_r, p_{r+1}) and P⁺(n) < p_{r+1} - p_r. Larger gaps allow larger smoothness bounds but are rarer.",
    "significance": "supporting",
    "relatedConcepts": ["density zero vs infinite", "sieve methods", "short intervals"]
  },
  {
    "id": "erdos-932-dickman",
    "proofId": "erdos-932",
    "type": "context",
    "range": { "startLine": 264, "endLine": 284 },
    "title": "Smooth Number Distribution",
    "content": "The counting function Ψ(x,y) = |{n ≤ x : n is y-smooth}| satisfies Ψ(x,y) ∼ x·ρ(log x/log y) where ρ is the Dickman function. The smooth count up to x is monotone in the smoothness bound y.",
    "mathContext": "smoothCountUpTo x y = |{n ∈ [1,x] : isSmooth y n}|. Axiom: smoothCountUpTo_mono shows monotonicity in y.",
    "significance": "supporting",
    "relatedConcepts": ["Dickman function", "Ψ(x,y)", "de Bruijn"]
  },
  {
    "id": "erdos-932-summary",
    "proofId": "erdos-932",
    "type": "result",
    "range": { "startLine": 286, "endLine": 320 },
    "title": "Summary",
    "content": "The summary theorem combines: (1) the density-zero result for smoothCount ≥ 1, (2) the concrete example smoothCount(3) ≥ 2, and (3) the open status. The problem remains one of the outstanding questions connecting prime gap structure with smooth number distribution.",
    "mathContext": "erdos_932_summary: HasDensity {r | smoothCount r ≥ 1} 0 ∧ smoothCount 3 ≥ 2 ∧ True.",
    "significance": "essential",
    "relatedConcepts": ["open problems", "analytic number theory", "Erdős problems"]
  }
]

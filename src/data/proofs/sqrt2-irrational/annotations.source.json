[
  {
    "id": "ann-sqrt2-imports",
    "proofId": "sqrt2-irrational",
    "anchor": {
      "type": "imports"
    },
    "type": "concept",
    "title": "Mathlib Imports",
    "content": "We import from Mathlib: `Data.Rat.Basic` for rational number operations, `Data.Int.Parity` for even/odd predicates on integers, and `Tactic` for proof automation.",
    "significance": "supporting",
    "relatedConcepts": [
      "Mathlib",
      "Lean 4",
      "tactic mode"
    ]
  },
  {
    "id": "ann-sqrt2-irrational-def",
    "proofId": "sqrt2-irrational",
    "anchor": {
      "type": "section-doc",
      "contains": "What This Proves"
    },
    "type": "definition",
    "title": "Definition of Irrational",
    "content": "A real number $x$ is **irrational** if for all integers $p, q$ with $q \\neq 0$, we have $x \\neq p/q$. This is the negation of rationality: there is no way to express $x$ as a ratio of integers.",
    "mathContext": "In Lean, this is a universal statement: `∀ p q : ℤ, q ≠ 0 → x ≠ p / q`. The proof will show this holds for $x = \\sqrt{2}$ by contradiction.",
    "significance": "key",
    "relatedConcepts": [
      "rational numbers",
      "negation",
      "universal quantification"
    ]
  },
  {
    "id": "ann-sqrt2-coprime-def",
    "proofId": "sqrt2-irrational",
    "anchor": {
      "type": "section-doc",
      "contains": "What This Proves"
    },
    "type": "definition",
    "title": "Definition of Coprime",
    "content": "Two integers $p$ and $q$ are **coprime** (or relatively prime) if their greatest common divisor is 1: $\\gcd(p, q) = 1$. Equivalently, they share no prime factors.",
    "mathContext": "Every rational number can be written in lowest terms $p/q$ where $p$ and $q$ are coprime. This is crucial for the contradiction—if both are even, they're not coprime.",
    "significance": "key",
    "relatedConcepts": [
      "GCD",
      "lowest terms",
      "prime factorization"
    ]
  },
  {
    "id": "ann-sqrt2-even-of-even-sq",
    "proofId": "sqrt2-irrational",
    "anchor": {
      "type": "section-doc",
      "contains": "What This Proves"
    },
    "type": "lemma",
    "title": "Even Square Implies Even Root",
    "content": "**The key lemma**: If $n^2$ is even, then $n$ is even. The proof uses the contrapositive: assume $n$ is odd, show $n^2$ is odd, contradicting that $n^2$ is even.",
    "mathContext": "Why does odd$^2$ = odd? Write $n = 2k+1$. Then $n^2 = 4k^2 + 4k + 1 = 2(2k^2 + 2k) + 1$, which is odd. The tactic `Odd.pow` handles this in Lean.",
    "significance": "critical",
    "relatedConcepts": [
      "contrapositive",
      "parity",
      "proof by contradiction"
    ]
  },
  {
    "id": "ann-sqrt2-odd-sq",
    "proofId": "sqrt2-irrational",
    "anchor": {
      "type": "section-doc",
      "contains": "What This Proves"
    },
    "type": "lemma",
    "title": "Square of Odd is Odd",
    "content": "A direct proof that odd$^2$ = odd. If $n = 2k + 1$ (odd), then $n^2 = 4k^2 + 4k + 1 = 2(2k^2 + 2k) + 1$, which has the form $2m + 1$ (odd).",
    "mathContext": "The `ring` tactic handles the algebraic manipulation automatically. The `obtain` tactic destructs the existential in the definition of `Odd`.",
    "significance": "supporting",
    "prerequisites": [
      "ann-sqrt2-even-of-even-sq"
    ],
    "relatedConcepts": [
      "algebraic manipulation",
      "existential elimination"
    ]
  },
  {
    "id": "ann-sqrt2-two-dvd-iff",
    "proofId": "sqrt2-irrational",
    "anchor": {
      "type": "section-doc",
      "contains": "What This Proves"
    },
    "type": "lemma",
    "title": "Divisibility by 2 Preserved by Squaring",
    "content": "A bidirectional lemma: $2 \\mid n^2 \\iff 2 \\mid n$. The forward direction uses `even_of_even_sq`; the reverse is direct calculation: if $n = 2k$, then $n^2 = 4k^2 = 2(2k^2)$.",
    "mathContext": "The `↔` (iff) in Lean requires proving both directions. The `constructor` tactic splits this into two goals.",
    "significance": "key",
    "prerequisites": [
      "ann-sqrt2-even-of-even-sq"
    ],
    "relatedConcepts": [
      "biconditional",
      "divisibility"
    ]
  },
  {
    "id": "ann-sqrt2-theorem-setup",
    "proofId": "sqrt2-irrational",
    "anchor": {
      "type": "section-doc",
      "contains": "Supporting Lemmas -/"
    },
    "type": "theorem",
    "title": "Main Theorem: Setup",
    "content": "The theorem states $\\sqrt{2}$ is irrational. We assume the contrary: there exist integers $p, q$ with $q \\neq 0$ and $\\sqrt{2} = p/q$. We may assume $p, q$ are coprime (in lowest terms).",
    "mathContext": "The WLOG (without loss of generality) step to assume coprimality is marked `sorry` here—a complete proof would reduce any $p/q$ to lowest terms first.",
    "significance": "critical",
    "relatedConcepts": [
      "proof by contradiction",
      "WLOG",
      "lowest terms"
    ]
  },
  {
    "id": "ann-sqrt2-squaring",
    "proofId": "sqrt2-irrational",
    "anchor": {
      "type": "declaration",
      "name": "even_of_sq_even",
      "kind": "theorem"
    },
    "type": "tactic",
    "title": "Squaring Both Sides",
    "content": "From $\\sqrt{2} = p/q$, we square both sides to get $2 = p^2/q^2$, hence $p^2 = 2q^2$. This eliminates the square root and gives us an equation in integers.",
    "mathContext": "This is the key algebraic step. In Lean, `congrArg (·^2)` applies squaring to both sides of an equation.",
    "significance": "key",
    "relatedConcepts": [
      "algebraic manipulation",
      "congruence"
    ]
  },
  {
    "id": "ann-sqrt2-p-even",
    "proofId": "sqrt2-irrational",
    "anchor": {
      "type": "doc-comment",
      "contains": "The square of an even number is divisible by 4"
    },
    "type": "insight",
    "title": "p Must Be Even",
    "content": "From $p^2 = 2q^2$, we see $p^2$ is even (it's $2 \\times$ something). By our key lemma, this means $p$ itself is even. We write $p = 2k$ for some integer $k$.",
    "mathContext": "The `obtain ⟨k, hk⟩` tactic extracts the witness $k$ from the existential statement that $p$ is even.",
    "significance": "critical",
    "prerequisites": [
      "ann-sqrt2-even-of-even-sq",
      "ann-sqrt2-squaring"
    ],
    "relatedConcepts": [
      "parity",
      "existential witness"
    ]
  },
  {
    "id": "ann-sqrt2-q-even",
    "proofId": "sqrt2-irrational",
    "anchor": {
      "type": "doc-comment",
      "contains": "Irrationality of √2**"
    },
    "type": "insight",
    "title": "q Must Also Be Even",
    "content": "Substituting $p = 2k$ into $p^2 = 2q^2$ gives $4k^2 = 2q^2$, so $q^2 = 2k^2$. Now $q^2$ is even, so by the same lemma, $q$ is even.",
    "mathContext": "We've now shown both $p$ and $q$ are divisible by 2. But we assumed they were coprime—a contradiction is imminent!",
    "significance": "critical",
    "prerequisites": [
      "ann-sqrt2-p-even"
    ],
    "relatedConcepts": [
      "substitution",
      "chain of reasoning"
    ]
  },
  {
    "id": "ann-generalization-intro",
    "proofId": "sqrt2-irrational",
    "anchor": {
      "type": "section-doc",
      "contains": "Generalization: √n is irrational for non-perfect squares"
    },
    "type": "insight",
    "title": "The Generalization Insight",
    "content": "The √2 proof works because 2 is prime and appears exactly once in its factorization (odd multiplicity). The key insight is: **if any prime $p$ appears to odd multiplicity in $n$, then $\\sqrt{n}$ is irrational**.",
    "mathContext": "If $n = p^{2k+1} \\cdot m$ where $p \\nmid m$, and $\\sqrt{n} = a/b$ in lowest terms, then looking at $p$'s multiplicity in $n \\cdot b^2 = a^2$ gives: $(2k+1) + 2 \\cdot \\text{mult}(p,b) = 2 \\cdot \\text{mult}(p,a)$. The left side is odd, the right side is even—contradiction!",
    "significance": "critical",
    "prerequisites": [
      "ann-sqrt2-contradiction"
    ],
    "relatedConcepts": [
      "prime factorization",
      "multiplicity",
      "generalization"
    ]
  },
  {
    "id": "ann-sqrt3-proof",
    "proofId": "sqrt2-irrational",
    "anchor": {
      "type": "doc-comment",
      "contains": "Irrationality of √3**"
    },
    "type": "theorem",
    "title": "Irrationality of √3",
    "content": "Since 3 is prime, it appears to multiplicity 1 (odd) in 3. By the same multiplicity argument that proved √2 irrational, √3 is also irrational.",
    "mathContext": "In Lean, we use `Nat.Prime.irrational_sqrt` which proves √p is irrational for any prime p. The proof reduces to showing 3 is prime via `Nat.prime_three`.",
    "significance": "key",
    "prerequisites": [
      "ann-generalization-intro"
    ],
    "relatedConcepts": [
      "prime numbers",
      "irrationality"
    ]
  },
  {
    "id": "ann-sqrt5-proof",
    "proofId": "sqrt2-irrational",
    "anchor": {
      "type": "doc-comment",
      "contains": "Irrationality of √5**"
    },
    "type": "theorem",
    "title": "Irrationality of √5",
    "content": "5 is prime, so it appears to odd multiplicity in 5. Therefore √5 is irrational.",
    "mathContext": "Same pattern as √3. Mathlib provides `Nat.prime_five` to establish that 5 is prime.",
    "significance": "supporting",
    "prerequisites": [
      "ann-generalization-intro"
    ],
    "relatedConcepts": [
      "prime numbers",
      "irrationality"
    ]
  },
  {
    "id": "ann-sqrt6-proof",
    "proofId": "sqrt2-irrational",
    "anchor": {
      "type": "doc-comment",
      "contains": "Irrationality of √6**"
    },
    "type": "theorem",
    "title": "Irrationality of √6",
    "content": "6 = 2 × 3. Both primes 2 and 3 appear to multiplicity 1 (odd). The same argument applies: √6 is irrational.",
    "mathContext": "This example shows the theorem works for composite numbers too. We use `irrational_sqrt_natCast_iff.mpr` with the fact that 6 is not a perfect square (`¬ IsSquare 6`). The `decide` tactic verifies this computationally.",
    "significance": "key",
    "prerequisites": [
      "ann-generalization-intro"
    ],
    "relatedConcepts": [
      "composite numbers",
      "IsSquare",
      "decide tactic"
    ]
  },
  {
    "id": "ann-sqrt7-proof",
    "proofId": "sqrt2-irrational",
    "anchor": {
      "type": "declaration",
      "name": "irrational_sqrt_seven",
      "kind": "theorem"
    },
    "type": "theorem",
    "title": "Irrationality of √7",
    "content": "7 is prime, so √7 is irrational by the same reasoning.",
    "mathContext": "We use `by decide : Nat.Prime 7` to verify primality computationally, then apply `Nat.Prime.irrational_sqrt`.",
    "significance": "supporting",
    "prerequisites": [
      "ann-generalization-intro"
    ],
    "relatedConcepts": [
      "prime numbers",
      "decide tactic"
    ]
  },
  {
    "id": "ann-general-theorem",
    "proofId": "sqrt2-irrational",
    "anchor": {
      "type": "section-doc",
      "contains": "The General Theorem"
    },
    "type": "theorem",
    "title": "The General Theorem",
    "content": "**Main Result**: For any natural number $n$ that is not a perfect square, $\\sqrt{n}$ is irrational. This single theorem subsumes all the specific cases: √2, √3, √5, √6, √7, √8, √10, ...",
    "mathContext": "The theorem `irrational_sqrt_of_not_square` uses Mathlib's `irrational_sqrt_natCast_iff` which establishes the result based on `¬ IsSquare n`.",
    "significance": "critical",
    "prerequisites": [
      "ann-sqrt3-proof",
      "ann-sqrt6-proof"
    ],
    "relatedConcepts": [
      "IsSquare",
      "general theorem",
      "subsumption"
    ]
  },
  {
    "id": "ann-examples-squares",
    "proofId": "sqrt2-irrational",
    "anchor": {
      "type": "declaration",
      "name": "irrational_sqrt_of_not_square",
      "kind": "theorem"
    },
    "type": "example",
    "title": "Perfect Squares vs Non-Squares",
    "content": "The `decide` tactic can verify whether a number is a perfect square. Non-squares: 2, 3, 5, 6, 7, 8, 10, ... Perfect squares: 1 = 1², 4 = 2², 9 = 3², 16 = 4², ...",
    "mathContext": "For perfect squares, we provide explicit witnesses: `IsSquare 4` is proven by `⟨2, by ring⟩` showing $4 = 2 \\cdot 2$. The `decide` tactic handles non-squares by computation.",
    "significance": "supporting",
    "prerequisites": [
      "ann-general-theorem"
    ],
    "relatedConcepts": [
      "perfect squares",
      "computational verification",
      "witnesses"
    ]
  }
]

[
  {
    "id": "erdos-120-header",
    "proofId": "erdos-120",
    "type": "context",
    "range": { "startLine": 1, "endLine": 23 },
    "title": "Problem Overview",
    "content": "Erdős Problem #120 (The Similarity Problem, $100 prize): For every infinite A ⊆ ℝ, must there exist a positive-measure set E containing no similar copy aA + b? Steinhaus showed finite sets are universal. The conjecture is that all infinite sets are avoidable.",
    "mathContext": "Similar copy: aA + b = {a·x + b : x ∈ A} for a ≠ 0. Avoidable: ∃ E measurable with μ(E) > 0 and ¬∃ a,b with aA+b ⊆ E.",
    "significance": "essential",
    "relatedConcepts": ["similarity transformations", "Lebesgue measure", "Steinhaus theorem"]
  },
  {
    "id": "erdos-120-similar",
    "proofId": "erdos-120",
    "type": "definition",
    "range": { "startLine": 38, "endLine": 69 },
    "title": "Similar Copies and Avoidance",
    "content": "Three key definitions: similarCopy A a b = (x ↦ a·x + b) '' A; containsSimilarCopy E A requires some aA+b ⊆ E with a ≠ 0; avoidsSimilarCopies E A negates containment.",
    "mathContext": "similarCopy A a b = {a·x + b : x ∈ A}. containsSimilarCopy E A ≡ ∃ a b, a ≠ 0 ∧ aA+b ⊆ E. avoidsSimilarCopies ≡ ¬containsSimilarCopy.",
    "significance": "essential",
    "relatedConcepts": ["affine maps", "set image", "pattern containment"]
  },
  {
    "id": "erdos-120-universal",
    "proofId": "erdos-120",
    "type": "definition",
    "range": { "startLine": 71, "endLine": 96 },
    "title": "Universal and Avoidable Sets",
    "content": "A is universal if every measurable E with μ(E) > 0 contains a similar copy of A. A is avoidable if some positive-measure measurable E avoids all copies. These are complementary properties (proved in Part 9).",
    "mathContext": "universalSimilaritySet A ≡ ∀ E, MeasurableSet E → μ(E) > 0 → containsSimilarCopy E A. avoidable A ≡ ∃ E, MeasurableSet E ∧ μ(E) > 0 ∧ avoidsSimilarCopies E A.",
    "significance": "essential",
    "relatedConcepts": ["Lebesgue measure", "MeasurableSet", "universality"]
  },
  {
    "id": "erdos-120-steinhaus",
    "proofId": "erdos-120",
    "type": "result",
    "range": { "startLine": 98, "endLine": 116 },
    "title": "Steinhaus: Finite Sets are Universal",
    "content": "Steinhaus (1920) proved that every finite nonempty set A is a universal similarity set. The proof uses the Steinhaus difference theorem: if μ(E) > 0, then E - E contains an interval, providing room to embed finite patterns.",
    "mathContext": "steinhaus_finite: A.Finite → A.Nonempty → universalSimilaritySet A.",
    "significance": "essential",
    "relatedConcepts": ["Steinhaus theorem", "difference set", "finite patterns"]
  },
  {
    "id": "erdos-120-known",
    "proofId": "erdos-120",
    "type": "result",
    "range": { "startLine": 118, "endLine": 143 },
    "title": "Known Avoidable Cases",
    "content": "Two classes are known avoidable: (1) unbounded sets — bounded E cannot contain copies with arbitrarily large elements; (2) sets dense in an interval — density forces copies to fill intervals, which can be avoided.",
    "mathContext": "unbounded_avoidable: ¬IsBounded A → avoidable A. dense_in_interval_avoidable: (∃ a < b, Dense(A ∩ (a,b))) → avoidable A.",
    "significance": "essential",
    "relatedConcepts": ["boundedness", "density", "Bornology.IsBounded"]
  },
  {
    "id": "erdos-120-conjecture",
    "proofId": "erdos-120",
    "type": "conjecture",
    "range": { "startLine": 145, "endLine": 172 },
    "title": "The Erdős Conjecture ($100)",
    "content": "Every infinite set A ⊆ ℝ is avoidable. Equivalently, no infinite set is a universal similarity set. The negation would give an infinite set whose similar copies appear in every positive-measure set.",
    "mathContext": "erdos_120_conjecture ≡ ∀ A, A.Infinite → avoidable A. erdos_120_negation ≡ ∃ A, A.Infinite ∧ universalSimilaritySet A.",
    "significance": "essential",
    "relatedConcepts": ["open problem", "$100 prize", "infinite combinatorics"]
  },
  {
    "id": "erdos-120-geometric",
    "proofId": "erdos-120",
    "type": "definition",
    "range": { "startLine": 174, "endLine": 203 },
    "title": "Geometric Sequence Case (OPEN)",
    "content": "The geometric sequence {(1/2)^n : n ∈ ℕ} = {1, 1/2, 1/4, ...} is bounded, infinite, and nowhere dense. Whether it is avoidable is the key test case, also listed as Problem 94 on Ben Green's open problems list.",
    "mathContext": "geometricSeq = {x | ∃ n : ℕ, x = (1/2)^n}. Axioms: geometricSeq.Infinite and IsBounded geometricSeq.",
    "significance": "essential",
    "relatedConcepts": ["geometric sequence", "Ben Green Problem 94", "bounded convergent"]
  },
  {
    "id": "erdos-120-ratio",
    "proofId": "erdos-120",
    "type": "result",
    "range": { "startLine": 205, "endLine": 227 },
    "title": "Ratio Preservation (PROVED)",
    "content": "Similar copies preserve ratios of differences: (a·a₁+b - (a·a₂+b)) / (a·a₃+b - (a·a₄+b)) = (a₁-a₂)/(a₃-a₄). This is proved by ring_nf and mul_div_mul_left. It constrains where copies can appear in E.",
    "mathContext": "ratio_preserved: proved via ring_nf; rw [mul_div_mul_left _ _ ha]. No axioms or sorry needed.",
    "significance": "essential",
    "relatedConcepts": ["affine invariant", "cross-ratio", "ring_nf tactic"]
  },
  {
    "id": "erdos-120-tools",
    "proofId": "erdos-120",
    "type": "context",
    "range": { "startLine": 229, "endLine": 255 },
    "title": "Measure-Theoretic Tools",
    "content": "Two key tools: (1) Steinhaus difference theorem — E-E contains an interval when μ(E) > 0; (2) Lebesgue density theorem — almost every point of E has density 1. Both constrain the local structure of positive-measure sets.",
    "mathContext": "steinhaus_difference: μ(E) > 0 → ∃ δ > 0, (-δ,δ) ⊆ E-E. lebesgue_density: μ(E) > 0 → ∃ x ∈ E, local density > 1/2.",
    "significance": "supporting",
    "relatedConcepts": ["Steinhaus theorem", "Lebesgue density", "measure theory"]
  },
  {
    "id": "erdos-120-duality",
    "proofId": "erdos-120",
    "type": "result",
    "range": { "startLine": 257, "endLine": 294 },
    "title": "Duality and Equivalence (PROVED)",
    "content": "Two proved theorems: (1) universal_iff_not_avoidable shows A is universal iff not avoidable; (2) conjecture_equiv shows the conjecture is equivalent to 'no infinite set is universal'. Both use the definitions directly.",
    "mathContext": "universal_iff_not_avoidable: universalSimilaritySet A ↔ ¬avoidable A. conjecture_equiv: erdos_120_conjecture ↔ ∀ A, A.Infinite → ¬universalSimilaritySet A.",
    "significance": "essential",
    "relatedConcepts": ["logical duality", "equivalent formulations", "by_contra"]
  },
  {
    "id": "erdos-120-summary",
    "proofId": "erdos-120",
    "type": "result",
    "range": { "startLine": 296, "endLine": 331 },
    "title": "Summary and Known Results",
    "content": "The known results theorem combines: finite sets are universal (Steinhaus) and unbounded sets are avoidable. The problem remains OPEN with a $100 prize. The geometric sequence is the key test case.",
    "mathContext": "erdos_120_known_results: (∀ A, A.Finite → A.Nonempty → universalSimilaritySet A) ∧ (∀ A, ¬IsBounded A → avoidable A).",
    "significance": "essential",
    "relatedConcepts": ["open problem", "known results", "Erdős prize"]
  }
]

[
  {
    "id": "ann-e696-header",
    "proofId": "erdos-696",
    "range": { "startLine": 1, "endLine": 31 },
    "type": "concept",
    "title": "Problem Overview",
    "content": "**Erdős Problem #696: Chains of Prime Divisors**\n\nDefine two functions:\n- **h(n):** Largest ℓ such that primes p₁ < p₂ < ... < pₗ all divide n with pᵢ₊₁ ≡ 1 (mod pᵢ)\n- **H(n):** Largest u such that divisors d₁ < d₂ < ... < dᵤ all divide n with dᵢ₊₁ ≡ 1 (mod dᵢ)\n\n**Questions:**\n1. Estimate h(n) and H(n)\n2. Is H(n)/h(n) → ∞ for almost all n?\n\n**Status:** PARTIALLY SOLVED",
    "mathContext": "The congruence condition p | q-1 reflects that (ℤ/qℤ)* has a subgroup of order p.",
    "significance": "critical",
    "relatedConcepts": ["Prime factorization", "Multiplicative groups", "Divisibility chains"]
  },
  {
    "id": "ann-e696-prime-chain",
    "proofId": "erdos-696",
    "range": { "startLine": 47, "endLine": 57 },
    "type": "definition",
    "title": "Prime Divisor Chain",
    "content": "**IsPrimeChain n chain:**\n\nA sequence of primes p₁ < p₂ < ... < pₗ where:\n1. Each pᵢ divides n\n2. Each pᵢ₊₁ ≡ 1 (mod pᵢ)\n\n```lean\ndef IsPrimeChain (n : ℕ) (chain : List ℕ) : Prop :=\n  chain.length ≥ 1 ∧\n  chain.Chain' (· < ·) ∧\n  (∀ p ∈ chain, p.Prime ∧ p ∣ n) ∧\n  (∀ i, i + 1 < chain.length → chain[i+1]! ≡ 1 [MOD chain[i]!])\n```",
    "mathContext": "The chain condition relates to the multiplicative structure of cyclic groups.",
    "significance": "critical",
    "relatedConcepts": ["Prime numbers", "Congruences", "Chains"]
  },
  {
    "id": "ann-e696-h-def",
    "proofId": "erdos-696",
    "range": { "startLine": 59, "endLine": 65 },
    "type": "definition",
    "title": "The Function h(n)",
    "content": "**h(n): Maximum Prime Chain Length**\n\nThe largest ℓ such that there exists a chain p₁ < ... < pₗ of primes dividing n with the congruence property.\n\n```lean\nnoncomputable def h (n : ℕ) : ℕ :=\n  sSup {ℓ : ℕ | ∃ chain : List ℕ, IsPrimeChain n chain ∧ chain.length = ℓ}\n```\n\nExamples:\n- h(1) = 0 (no prime divisors)\n- h(p) = 1 for prime p\n- h(6) ≥ 2 since [2, 3] works (3 ≡ 1 mod 2)",
    "significance": "critical",
    "relatedConcepts": ["Supremum", "Prime chains"]
  },
  {
    "id": "ann-e696-divisor-chain",
    "proofId": "erdos-696",
    "range": { "startLine": 67, "endLine": 77 },
    "type": "definition",
    "title": "Divisor Chain",
    "content": "**IsDivisorChain n chain:**\n\nA sequence of divisors d₁ < d₂ < ... < dᵤ where:\n1. Each dᵢ divides n\n2. Each dᵢ₊₁ ≡ 1 (mod dᵢ)\n\nUnlike prime chains, we allow composite divisors. This gives more flexibility in building long chains.",
    "mathContext": "Composite divisors provide more options for finding pairs with d' ≡ 1 (mod d).",
    "significance": "key",
    "relatedConcepts": ["Divisors", "Congruences"]
  },
  {
    "id": "ann-e696-H-def",
    "proofId": "erdos-696",
    "range": { "startLine": 79, "endLine": 85 },
    "type": "definition",
    "title": "The Function H(n)",
    "content": "**H(n): Maximum Divisor Chain Length**\n\nThe largest u such that there exists a chain d₁ < ... < dᵤ of divisors of n with the congruence property.\n\nSince every prime chain is also a divisor chain, we always have h(n) ≤ H(n).",
    "significance": "key",
    "relatedConcepts": ["Supremum", "Divisor chains"]
  },
  {
    "id": "ann-e696-h-le-H",
    "proofId": "erdos-696",
    "range": { "startLine": 91, "endLine": 105 },
    "type": "theorem",
    "title": "h(n) ≤ H(n)",
    "content": "**prime_chain_is_divisor_chain & h_le_H:**\n\nEvery prime chain is automatically a divisor chain (primes are divisors). Therefore:\n\nh(n) ≤ H(n) for all n\n\nThis is a fundamental inequality between the two functions.",
    "significance": "key",
    "relatedConcepts": ["Subset relation", "Upper bounds"]
  },
  {
    "id": "ann-e696-logstar",
    "proofId": "erdos-696",
    "range": { "startLine": 119, "endLine": 145 },
    "type": "definition",
    "title": "Iterated Logarithm log*(n)",
    "content": "**logStar: The Iterated Logarithm**\n\n```lean\nnoncomputable def logStar : ℕ → ℕ\n  | n => if n ≤ 1 then 0 else 1 + logStar (Nat.log 2 n)\n```\n\n**Growth:** Extremely slow!\n- log*(2) = 1\n- log*(4) = 2\n- log*(16) = 3\n- log*(65536) = 4\n- log*(2^65536) = 5\n\nFor all practical n, log*(n) ≤ 5.\n\n**Erdős's conjecture:** h(n) has normal order log*(n).",
    "mathContext": "The iterated logarithm appears in algorithm analysis (e.g., union-find) and number theory.",
    "significance": "key",
    "relatedConcepts": ["Logarithm", "Slowly growing functions", "Normal order"]
  },
  {
    "id": "ann-e696-h-infinity",
    "proofId": "erdos-696",
    "range": { "startLine": 147, "endLine": 156 },
    "type": "axiom",
    "title": "h(n) → ∞ for Almost All n",
    "content": "**h_tends_to_infinity (van Doorn):**\n\nFor any fixed k, almost all n satisfy h(n) ≥ k.\n\nMore precisely: the density of {n ≤ N : h(n) < k} tends to 0 as N → ∞.\n\nThis was proved by van Doorn using Dirichlet's theorem on primes in arithmetic progressions.",
    "mathContext": "\"Almost all\" means density 1 in the natural numbers.",
    "significance": "critical",
    "relatedConcepts": ["Asymptotic density", "Dirichlet's theorem"]
  },
  {
    "id": "ann-e696-conjectures",
    "proofId": "erdos-696",
    "range": { "startLine": 158, "endLine": 172 },
    "type": "concept",
    "title": "Erdős's Conjectures",
    "content": "**Two Main Conjectures:**\n\n1. **Normal Order Conjecture:**\n   h(n) ~ log*(n) for almost all n\n   (h(n) is asymptotically equal to log*(n))\n\n2. **Ratio Conjecture (OPEN):**\n   H(n)/h(n) → ∞ for almost all n\n   (Divisor chains can be much longer than prime chains)\n\nThe ratio conjecture remains open and is the main unsolved part of this problem.",
    "significance": "key",
    "relatedConcepts": ["Normal order", "Asymptotic behavior"]
  },
  {
    "id": "ann-e696-sophie-germain",
    "proofId": "erdos-696",
    "range": { "startLine": 177, "endLine": 206 },
    "type": "definition",
    "title": "Sophie Germain Primes",
    "content": "**SophieGermainPrime p:**\n\nA prime p such that 2p + 1 is also prime.\n\nExamples: 2, 3, 5, 11, 23, 29, 41, 53, ...\n\n**Connection to Problem:**\nIf p is Sophie Germain, then [p, 2p+1] is a prime chain:\n- 2p + 1 ≡ 1 (mod p) since 2p + 1 - 1 = 2p\n\n**Cunningham Chains:**\nExtensions where p, 2p+1, 4p+3, 8p+7, ... are all prime.",
    "mathContext": "Sophie Germain primes are conjectured to be infinite but this is unproven.",
    "significance": "key",
    "relatedConcepts": ["Sophie Germain primes", "Cunningham chains", "Twin primes"]
  },
  {
    "id": "ann-e696-examples",
    "proofId": "erdos-696",
    "range": { "startLine": 208, "endLine": 232 },
    "type": "theorem",
    "title": "Concrete Examples",
    "content": "**Examples of h(n):**\n\n- **n = 6 = 2·3:** h(6) ≥ 2\n  Chain [2, 3] works since 3 ≡ 1 (mod 2)\n\n- **n = 30 = 2·3·5:** h(30) = 2\n  Chains [2, 3] or [2, 5] work, but no length-3 chain\n\n- **n = 2310 = 2·3·5·7·11:** h(2310) ≥ 3\n  Chain [2, 3, 7] works:\n  - 3 ≡ 1 (mod 2) ✓\n  - 7 ≡ 1 (mod 3) ✓",
    "significance": "supporting",
    "relatedConcepts": ["Examples", "Prime factorization"]
  },
  {
    "id": "ann-e696-bounds",
    "proofId": "erdos-696",
    "range": { "startLine": 260, "endLine": 283 },
    "type": "concept",
    "title": "Upper Bounds",
    "content": "**Bounds on h(n) and H(n):**\n\n**h(n) ≤ ω(n):**\nWhere ω(n) = number of distinct prime factors.\nChain elements are distinct primes dividing n.\n\n**H(n) ≤ log₂(n):**\nEach chain element at least doubles the previous (since d' > d and d' ≡ 1 mod d implies d' ≥ d + 1).\n\n**Conjectured:** h(n) ≤ log*(n) + O(1)",
    "mathContext": "These bounds help constrain the possible values of h and H.",
    "significance": "key",
    "relatedConcepts": ["Upper bounds", "Omega function"]
  },
  {
    "id": "ann-e696-van-doorn",
    "proofId": "erdos-696",
    "range": { "startLine": 285, "endLine": 306 },
    "type": "axiom",
    "title": "Van Doorn's Proof",
    "content": "**van_doorn_proof:**\n\nProof that h(n) → ∞ for almost all n.\n\n**Key Idea:**\n1. For most n, there exists a small prime p₁ dividing n\n2. By Dirichlet's theorem, primes p ≡ 1 (mod p₁) have positive density\n3. Most n have such a prime p₂ among their factors\n4. Iterate to build longer chains\n\nThe density argument shows {n : h(n) < k} has density 0 for any fixed k.",
    "mathContext": "Uses analytic number theory (Dirichlet's theorem) combined with density arguments.",
    "significance": "key",
    "relatedConcepts": ["Dirichlet's theorem", "Density", "Analytic number theory"]
  },
  {
    "id": "ann-e696-summary",
    "proofId": "erdos-696",
    "range": { "startLine": 308, "endLine": 349 },
    "type": "theorem",
    "title": "Summary",
    "content": "**Erdős Problem #696: Status Summary**\n\n**KNOWN:**\n- h(n) → ∞ for almost all n (van Doorn) ✓\n- h(n) ≤ H(n) always ✓\n\n**CONJECTURED:**\n- Normal order of h(n) is log*(n)\n\n**OPEN:**\n- Is H(n)/h(n) → ∞ for almost all n?\n\n**KEY INSIGHTS:**\n1. The congruence pᵢ₊₁ ≡ 1 (mod pᵢ) reflects multiplicative group structure\n2. The iterated logarithm grows extremely slowly\n3. Composite divisors give more flexibility than primes\n4. Sophie Germain and Cunningham chains are relevant examples",
    "significance": "critical",
    "relatedConcepts": ["Summary", "Open problems", "Partial solutions"]
  }
]

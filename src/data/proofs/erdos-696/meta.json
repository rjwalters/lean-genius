{
  "id": "erdos-696",
  "title": "Erdős Problem #696: Chains of Prime Divisors with Congruence Conditions",
  "slug": "erdos-696",
  "description": "Let h(n) = max length of prime chain p₁ < ... < pₗ dividing n with pᵢ₊₁ ≡ 1 (mod pᵢ). Let H(n) use divisors. Estimate these functions. PARTIALLY SOLVED: h(n) → ∞ almost always (van Doorn). Ratio question open.",
  "meta": {
    "author": "Erdős (1979), van Doorn (proof)",
    "sourceUrl": "https://erdosproblems.com/696",
    "date": "1979",
    "status": "complete",
    "proofRepoPath": "Proofs/Erdos696Problem.lean",
    "tags": [
      "erdos",
      "number-theory",
      "prime-divisors",
      "congruences",
      "iterated-logarithm",
      "partially-solved"
    ],
    "badge": "axiom",
    "sorries": 0,
    "erdosNumber": 696,
    "erdosUrl": "https://erdosproblems.com/696",
    "erdosProblemStatus": "open",
    "mathlib_version": "4.15.0",
    "mathlibDependencies": [
      {
        "theorem": "Nat.Prime",
        "description": "Prime predicate",
        "module": "Mathlib.Data.Nat.Prime.Basic"
      },
      {
        "theorem": "Nat.primeFactors",
        "description": "Set of prime factors",
        "module": "Mathlib.Data.Nat.Factorization.Basic"
      },
      {
        "theorem": "Filter.atTop",
        "description": "Filter for almost all n",
        "module": "Mathlib.Order.Filter.Basic"
      }
    ],
    "originalContributions": [
      "IsPrimeChain definition: chains p₁ < ... < pₗ with pᵢ₊₁ ≡ 1 (mod pᵢ)",
      "IsDivisorChain definition: same for divisors",
      "h and H definitions as suprema of chain lengths",
      "logStar definition: iterated logarithm",
      "ErdosNormalOrderConjecture: h(n) ~ log*(n)",
      "ErdosRatioConjecture: H(n)/h(n) → ∞",
      "SophieGermainPrime and Cunningham chain connections",
      "van_doorn_proof axiom: h(n) → ∞ for almost all n",
      "h_le_omega theorem: trivial upper bound"
    ]
  },
  "overview": {
    "historicalContext": "**Erdős Problem #696**\n\nThis problem explores chains of prime divisors with congruence conditions, connecting to the multiplicative group structure of finite fields.\n\n**Key History:**\n- Erdős (1979): Posed the problem in [Er79e, p.81]\n- Erdős noted it's 'easy to see' that h(n) → ∞ for almost all n\n- van Doorn: Provided formal proof in the comments\n- The normal order log*(n) conjecture remains open\n\n**Mathematical Setting:**\nThe condition pᵢ₊₁ ≡ 1 (mod pᵢ) means pᵢ divides pᵢ₊₁ - 1, so (ℤ/pᵢ₊₁ℤ)* has a subgroup of order pᵢ. This reflects the multiplicative structure of primes.",
    "problemStatement": "**Problem Statement**\n\nLet $h(n)$ be the largest $\\ell$ such that there is a sequence of primes $p_1 < \\cdots < p_\\ell$ all dividing $n$ with $p_{i+1} \\equiv 1 \\pmod{p_i}$.\n\nLet $H(n)$ be the largest $u$ such that there is a sequence of integers $d_1 < \\cdots < d_u$ all dividing $n$ with $d_{i+1} \\equiv 1 \\pmod{d_i}$.\n\n**Questions:**\n1. Estimate $h(n)$ and $H(n)$\n2. Is it true that $H(n)/h(n) \\to \\infty$ for almost all $n$?\n\n**Status: PARTIALLY SOLVED**\n- $h(n) \\to \\infty$ for almost all $n$: PROVED (van Doorn)\n- Normal order $h(n) \\approx \\log^*(n)$: CONJECTURED\n- $H(n)/h(n) \\to \\infty$: OPEN",
    "proofStrategy": "**Formalization Approach**\n\n1. **Chain Definitions:** Define IsPrimeChain and IsDivisorChain with the congruence conditions\n\n2. **Functions h and H:** As suprema of chain lengths\n\n3. **Iterated Logarithm:** Define log*(n) to state the normal order conjecture\n\n4. **van Doorn's Result:** h(n) → ∞ for almost all n, using Dirichlet's theorem\n\n5. **Examples:** Sophie Germain primes and Cunningham chains\n\n6. **Bounds:** h(n) ≤ ω(n) and H(n) ≤ log₂(n)",
    "keyInsights": [
      "**Multiplicative Groups:** pᵢ₊₁ ≡ 1 (mod pᵢ) means pᵢ | #(ℤ/pᵢ₊₁ℤ)*, connecting to group theory",
      "**Iterated Logarithm:** log*(n) grows extremely slowly - log*(2^65536) = 5",
      "**Sophie Germain:** If p, 2p+1 both prime, then [p, 2p+1] is a chain",
      "**Composites Help:** H(n) uses divisors, giving more flexibility than h(n)",
      "**Dirichlet's Theorem:** Ensures primes in arithmetic progressions, key to van Doorn's proof"
    ]
  },
  "sections": [
    {
      "id": "functions",
      "title": "The Functions h(n) and H(n)",
      "summary": "Definitions of prime chains, divisor chains, and the functions h and H",
      "startLine": 43,
      "endLine": 85
    },
    {
      "id": "basic-properties",
      "title": "Basic Properties",
      "summary": "h(n) ≤ H(n), base cases h(1) and h(p)",
      "startLine": 87,
      "endLine": 117
    },
    {
      "id": "iterated-log",
      "title": "The Iterated Logarithm",
      "summary": "Definition of log*(n) and its slow growth",
      "startLine": 119,
      "endLine": 145
    },
    {
      "id": "conjectures",
      "title": "Erdős's Conjectures",
      "summary": "h(n) → ∞, normal order, ratio H/h conjectures",
      "startLine": 147,
      "endLine": 172
    },
    {
      "id": "chains",
      "title": "Why These Chains?",
      "summary": "Multiplicative group connection, Sophie Germain, Cunningham chains",
      "startLine": 174,
      "endLine": 206
    },
    {
      "id": "examples",
      "title": "Examples",
      "summary": "h(6), h(30), h(2310) computed",
      "startLine": 208,
      "endLine": 232
    },
    {
      "id": "comparison",
      "title": "Comparison h(n) vs H(n)",
      "summary": "Why H(n) can be much larger",
      "startLine": 234,
      "endLine": 258
    },
    {
      "id": "upper-bounds",
      "title": "Upper Bounds",
      "summary": "h(n) ≤ ω(n) and H(n) ≤ log₂(n)",
      "startLine": 260,
      "endLine": 283
    },
    {
      "id": "van-doorn",
      "title": "The van Doorn Result",
      "summary": "Proof that h(n) → ∞ for almost all n",
      "startLine": 285,
      "endLine": 306
    },
    {
      "id": "summary",
      "title": "Summary",
      "summary": "erdos_696_status and summary theorems",
      "startLine": 308,
      "endLine": 351
    }
  ],
  "conclusion": {
    "summary": "Erdős Problem #696 asks about chains of prime divisors with congruence conditions. The function h(n) (prime chains) is proved to tend to infinity for almost all n (van Doorn), and Erdős conjectured its normal order is log*(n). The ratio question H(n)/h(n) → ∞ remains open.",
    "implications": "**Number-Theoretic Connections**\n\n1. **Multiplicative Structure:** The congruence p | q-1 connects to subgroups of (ℤ/qℤ)*\n\n2. **Sophie Germain Primes:** Special cases where 2p+1 is also prime\n\n3. **Iterated Logarithm:** The slowest-growing unbounded function in analysis\n\n4. **Dirichlet's Theorem:** Key tool for proving density results\n\n5. **Related Problem #695:** Part of a family of divisor chain problems",
    "openQuestions": [
      "Prove the normal order of h(n) is log*(n)",
      "Prove or disprove H(n)/h(n) → ∞ for almost all n",
      "Find explicit constructions achieving h(n) ≈ log*(n)",
      "Characterize n with h(n) exceptionally large or small",
      "Connection to other divisibility chain problems"
    ]
  }
}

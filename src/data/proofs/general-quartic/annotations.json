[
  {
    "id": "ann-intro",
    "proofId": "general-quartic",
    "range": {"startLine": 8, "endLine": 59},
    "type": "concept",
    "title": "Quartic Formula: Wiedijk #46",
    "content": "**Ferrari's Method (1540)**:\n\nEvery quartic equation\n$$x^4 + ax^3 + bx^2 + cx + d = 0$$\ncan be solved by radicals.\n\n**Algorithm**:\n1. **Depress**: $y = x + a/4$ eliminates $x^3$ term\n2. **Resolvent cubic**: Find auxiliary parameter $m$\n3. **Factor**: Quartic splits into two quadratics\n4. **Solve**: Apply quadratic formula twice\n\n**Historical**: Lodovico Ferrari (age 18!) discovered this in 1540. Published in Cardano's *Ars Magna* (1545).",
    "significance": "critical",
    "relatedConcepts": ["Ferrari", "quartic equation", "radicals"]
  },
  {
    "id": "ann-definitions",
    "proofId": "general-quartic",
    "range": {"startLine": 65, "endLine": 79},
    "type": "definition",
    "title": "Polynomial Definitions",
    "content": "**General Quartic**:\n$$x^4 + ax^3 + bx^2 + cx + d$$\n\n**Depressed Quartic** (no $x^3$ term):\n$$y^4 + py^2 + qy + r$$\n\n**Resolvent Cubic**:\n$$8m^3 + 20pm^2 + (16p^2 - 8r)m + (4p^3 - 4pr - q^2) = 0$$\n\nFinding $m$ from the resolvent cubic is the key step.\n\n**Lean**:\n```lean\ndef resolventCubic (p q r : ℂ) : Polynomial ℂ := ...\n```",
    "mathContext": "resolvent cubic in m",
    "significance": "major",
    "relatedConcepts": ["depressed form", "resolvent", "auxiliary variable"]
  },
  {
    "id": "ann-depression",
    "proofId": "general-quartic",
    "range": {"startLine": 80, "endLine": 92},
    "type": "theorem",
    "title": "Tschirnhaus Transformation",
    "content": "**Depressing the Quartic**:\n\nSubstitution $y = x + a/4$ transforms $x^4 + ax^3 + bx^2 + cx + d$ to $y^4 + py^2 + qy + r$ where:\n\n$$p = b - \\frac{3a^2}{8}$$\n$$q = c - \\frac{ab}{2} + \\frac{a^3}{8}$$\n$$r = d - \\frac{ac}{4} + \\frac{a^2 b}{16} - \\frac{3a^4}{256}$$\n\n**Why**: Eliminates $y^3$ term, simplifying Ferrari's method.\n\n**Reversibility**: Solutions $y$ give $x = y - a/4$.",
    "mathContext": "y = x + a/4 removes x³ term",
    "significance": "major",
    "relatedConcepts": ["Tschirnhaus", "depression", "substitution"]
  },
  {
    "id": "ann-ferrari-insight",
    "proofId": "general-quartic",
    "range": {"startLine": 35, "endLine": 56},
    "type": "theorem",
    "title": "Ferrari's Key Insight",
    "content": "**The Brilliant Trick**:\n\nStarting with $y^4 + py^2 + qy + r = 0$:\n\n1. Rearrange as $(y^2 + p/2)^2 = (p^2/4 - r) - qy$\n\n2. Add parameter $m$ to complete the square:\n$$(y^2 + p/2 + m)^2 = (2m + p)y^2 - qy + (m^2 + pm + p^2/4 - r)$$\n\n3. Right side is perfect square when discriminant = 0:\n$$q^2 - 4(2m + p)(m^2 + pm + p^2/4 - r) = 0$$\n\nThis is the **resolvent cubic**! Once $m$ is found:\n$$(y^2 + p/2 + m)^2 = (\\alpha y + \\beta)^2$$\n\nTake square roots $\\to$ two quadratics.",
    "mathContext": "completing the square with auxiliary m",
    "significance": "critical",
    "relatedConcepts": ["completing the square", "perfect square", "factorization"]
  },
  {
    "id": "ann-factorization",
    "proofId": "general-quartic",
    "range": {"startLine": 203, "endLine": 227},
    "type": "theorem",
    "title": "Ferrari Factorization",
    "content": "**Factorization Theorem**:\n\nGiven depressed quartic $y^4 + py^2 + qy + r = 0$ and resolvent root $m$:\n\nLet $\\alpha^2 = 2m + p$ and $\\beta = q/(2\\alpha)$. Then:\n\n$$y^4 + py^2 + qy + r = (y^2 + p/2 + m - \\alpha y + \\beta)(y^2 + p/2 + m + \\alpha y - \\beta)$$\n\n**Lean Statement**:\n```lean\ntheorem ferrari_factorization ... :\n    (depressedQuartic p q r).eval y = 0 ↔\n    (y² + p/2 + m - αy + β = 0) ∨ \n    (y² + p/2 + m + αy - β = 0)\n```\n\nEach quadratic gives 2 roots → 4 total.",
    "mathContext": "quartic = product of two quadratics",
    "significance": "critical",
    "relatedConcepts": ["factorization", "quadratic factors", "four roots"]
  },
  {
    "id": "ann-four-roots",
    "proofId": "general-quartic",
    "range": {"startLine": 234, "endLine": 272},
    "type": "theorem",
    "title": "Explicit Root Formulas",
    "content": "**Ferrari's Four Roots**:\n\nWith $\\alpha = \\sqrt{2m + p}$, $\\beta = q/(2\\alpha)$:\n\n$$y_{1,2} = \\frac{-\\alpha \\pm \\sqrt{\\alpha^2 - 4(p/2 + m + \\beta)}}{2}$$\n$$y_{3,4} = \\frac{\\alpha \\pm \\sqrt{\\alpha^2 - 4(p/2 + m - \\beta)}}{2}$$\n\n**For general quartic**: Subtract $a/4$ from each $y_i$.\n\n**Lean Implementation**:\n```lean\ndef ferrariRoots (p q r m : ℂ) : ℂ × ℂ × ℂ × ℂ := ...\n```\n\nThe axiom `ferrari_roots_verify` ensures these satisfy the equation.",
    "mathContext": "explicit radical expressions",
    "significance": "major",
    "relatedConcepts": ["radical formula", "quadratic formula", "nested radicals"]
  },
  {
    "id": "ann-biquadratic",
    "proofId": "general-quartic",
    "range": {"startLine": 287, "endLine": 303},
    "type": "theorem",
    "title": "Biquadratic Special Case",
    "content": "**When $q = 0$**: $y^4 + py^2 + r = 0$\n\nThis is a **quadratic in $y^2$**!\n\n$$z^2 + pz + r = 0 \\quad \\text{where } z = y^2$$\n\n**Solutions**:\n$$z = \\frac{-p \\pm \\sqrt{p^2 - 4r}}{2}$$\n\nThen $y = \\pm\\sqrt{z}$ (four roots from two values of $z$).\n\n**Simpler than general case**: No resolvent cubic needed!",
    "mathContext": "y⁴ + py² + r = 0 is quadratic in y²",
    "significance": "minor",
    "relatedConcepts": ["biquadratic", "substitution", "quadratic formula"]
  },
  {
    "id": "ann-galois",
    "proofId": "general-quartic",
    "range": {"startLine": 304, "endLine": 330},
    "type": "concept",
    "title": "Why Quartic Works (Galois)",
    "content": "**Galois Theory Explanation**:\n\nThe symmetric group $S_4$ is **solvable**:\n$$S_4 \\triangleright A_4 \\triangleright V_4 \\triangleright \\{e\\}$$\n\nEach quotient is abelian, enabling radical solutions.\n\n**Tower of Formulas**:\n- Quadratic: Direct formula\n- Cubic: Cardano's formula\n- Quartic: Ferrari's method (uses cubic)\n- **Quintic: NO general formula!** (Abel-Ruffini, 1824)\n\n**Why quintic fails**: $S_5$ is not solvable - $A_5$ is simple.\n\nSee Wiedijk #16 (Abel-Ruffini) for the impossibility proof.",
    "significance": "major",
    "relatedConcepts": ["Galois theory", "solvable group", "S₄", "Abel-Ruffini"]
  },
  {
    "id": "ann-history",
    "proofId": "general-quartic",
    "range": {"startLine": 306, "endLine": 315},
    "type": "note",
    "title": "Historical Race (1515-1545)",
    "content": "**The Renaissance Algebra Race**:\n\n| Year | Mathematician | Achievement |\n|------|--------------|-------------|\n| c.1515 | del Ferro | First cubic solution (secret) |\n| 1535 | Tartaglia | Rediscovered cubic |\n| 1539 | Cardano | Learned Tartaglia's method |\n| 1540 | **Ferrari** | Solved quartic (age 18!) |\n| 1545 | Cardano | Published *Ars Magna* |\n\n**Drama**: Tartaglia taught Cardano under oath of secrecy. Cardano broke the oath when he learned del Ferro had priority.\n\nFerrari's quartic solution used Cardano's cubic - creating an elegant tower.",
    "significance": "minor",
    "relatedConcepts": ["Cardano", "Tartaglia", "del Ferro", "Ars Magna"]
  }
]

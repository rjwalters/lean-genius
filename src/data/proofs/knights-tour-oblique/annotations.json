[
  {
    "id": "ann-intro",
    "proofId": "knights-tour-oblique",
    "range": { "startLine": 1, "endLine": 18 },
    "type": "concept",
    "title": "The Knight's Adventure",
    "content": "This proof formalizes a result from Donald Knuth's 29th Annual Christmas Lecture at Stanford (December 4, 2025). Knuth revealed that every closed knight's tour must include at least 4 'oblique' turns (where the knight changes direction by more than 90 degrees), and remarkably, exactly one tour achieves this minimum.\n\nAs Knuth put it: 'It's a beauty.'",
    "mathContext": "The knight's tour problem asks: can a knight visit all 64 squares of a chessboard exactly once and return to the start? This is equivalent to finding a Hamiltonian cycle in the knight graph.",
    "significance": "critical",
    "relatedConcepts": ["Hamiltonian cycle", "knight graph", "Donald Knuth", "Christmas Lecture"]
  },
  {
    "id": "ann-imports",
    "proofId": "knights-tour-oblique",
    "range": { "startLine": 20, "endLine": 25 },
    "type": "concept",
    "title": "Mathlib Foundations",
    "content": "We build on Lean's Mathlib library:\n\n- **SimpleGraph**: For modeling the knight's movement graph\n- **Fin**: Finite types for board coordinates (0-7)\n- **ZMod**: Modular arithmetic for the winding argument\n- **Int**: Signed integers for move offsets\n- **List**: For representing tour sequences",
    "mathContext": "Mathlib provides battle-tested formalizations of mathematical structures. Using `SimpleGraph` ensures our knight graph automatically satisfies symmetry and irreflexivity properties.",
    "significance": "supporting",
    "relatedConcepts": ["Mathlib", "Lean 4", "type theory"]
  },
  {
    "id": "ann-square-def",
    "proofId": "knights-tour-oblique",
    "range": { "startLine": 37, "endLine": 38 },
    "type": "definition",
    "title": "Chessboard Squares",
    "content": "We model the 8x8 chessboard using `Fin 8 x Fin 8`, the Cartesian product of two copies of the finite type with 8 elements (0 through 7). Each square is identified by its (column, row) coordinates.\n\nUsing `abbrev` creates a transparent alias, so `Square` can be used interchangeably with `Fin 8 x Fin 8`.",
    "mathContext": "$\\text{Square} = \\text{Fin } 8 \\times \\text{Fin } 8 = \\{0,1,...,7\\}^2$\n\nThis gives us exactly 64 squares, matching the chessboard. Lean automatically derives that `Square` is a `Fintype` with decidable equality.",
    "significance": "supporting",
    "relatedConcepts": ["Fin type", "Cartesian product", "Fintype"]
  },
  {
    "id": "ann-knight-offsets",
    "proofId": "knights-tour-oblique",
    "range": { "startLine": 40, "endLine": 45 },
    "type": "definition",
    "title": "Knight Move Offsets",
    "content": "A knight moves in an L-shape: 2 squares in one direction and 1 square perpendicular. This gives 8 possible move offsets:\n\n- $(\\pm 1, \\pm 2)$: 4 moves (more vertical)\n- $(\\pm 2, \\pm 1)$: 4 moves (more horizontal)\n\nThe offsets are listed counterclockwise starting from NNE (+1,+2). From an interior square, a knight can reach all 8 neighbors. Corner squares have only 2 options; edge squares have 3-4.",
    "mathContext": "Each offset vector has magnitude $\\sqrt{1^2 + 2^2} = \\sqrt{5} \\approx 2.236$.\n\nThe L-shape is special: it's the only way to reach a square of opposite color in one move while covering significant distance.",
    "significance": "key",
    "relatedConcepts": ["L-shaped move", "knight mobility", "chess geometry"]
  },
  {
    "id": "ann-knight-adj",
    "proofId": "knights-tour-oblique",
    "range": { "startLine": 51, "endLine": 61 },
    "type": "definition",
    "title": "Knight Adjacency",
    "content": "Two squares are **knight-adjacent** if their coordinate difference is one of the 8 knight offsets. We define this as a `Prop` (proposition) and prove it's decidable.\n\nThe decidability instance lets Lean automatically evaluate whether two specific squares are adjacent, enabling computation within proofs.",
    "mathContext": "$s_1 \\sim s_2 \\iff (s_2 - s_1) \\in \\{(\\pm 1, \\pm 2), (\\pm 2, \\pm 1)\\}$",
    "significance": "key",
    "prerequisites": ["ann-knight-offsets"],
    "relatedConcepts": ["adjacency relation", "decidable proposition"]
  },
  {
    "id": "ann-knight-graph",
    "proofId": "knights-tour-oblique",
    "range": { "startLine": 63, "endLine": 77 },
    "type": "definition",
    "title": "The Knight Graph",
    "content": "The **knight graph** has 64 vertices (one per square) and edges between knight-adjacent squares. Mathlib's `SimpleGraph` requires:\n\n1. **Symmetry**: If a knight can go from A to B, it can go from B to A\n2. **Loopless**: No square is adjacent to itself\n\nBoth are easy to prove: symmetry because negating an offset gives another valid offset; loopless because (0,0) isn't an offset.",
    "mathContext": "The knight graph $G = (V, E)$ has:\n- $|V| = 64$ vertices\n- $|E| = 168$ edges (336 directed)\n- Degree ranges from 2 (corners) to 8 (center squares)\n\nFinding a closed tour = finding a Hamiltonian cycle in $G$.",
    "significance": "critical",
    "prerequisites": ["ann-knight-adj"],
    "relatedConcepts": ["SimpleGraph", "Hamiltonian cycle", "graph theory"]
  },
  {
    "id": "ann-move-vector",
    "proofId": "knights-tour-oblique",
    "range": { "startLine": 87, "endLine": 98 },
    "type": "definition",
    "title": "Move Vectors",
    "content": "A `MoveVector` packages a knight move direction as integers (dx, dy) together with a proof that these form a valid knight offset.\n\nThis dependent type ensures we only work with the 8 legal knight directions. The `allMoveVectors` list enumerates all 8, with `by decide` automatically checking validity.",
    "mathContext": "The 8 move vectors form a discrete set on the integer lattice $\\mathbb{Z}^2$, all at distance $\\sqrt{5}$ from the origin.\n\nNumbering them 0-7 counterclockwise maps to directions: NNE, ENE, ESE, SSE, SSW, WSW, WNW, NNW.",
    "significance": "key",
    "relatedConcepts": ["dependent type", "vector", "direction"]
  },
  {
    "id": "ann-dot-product",
    "proofId": "knights-tour-oblique",
    "range": { "startLine": 100, "endLine": 102 },
    "type": "definition",
    "title": "Dot Product of Move Vectors",
    "content": "The **dot product** measures alignment between vectors:\n\n- **Positive**: vectors point in similar directions (acute angle, < 90°)\n- **Zero**: vectors are perpendicular (right angle, = 90°)\n- **Negative**: vectors point in opposing directions (obtuse angle, > 90°)\n\nFor knight moves, this determines whether a turn is 'oblique'.",
    "mathContext": "$\\vec{v}_1 \\cdot \\vec{v}_2 = dx_1 \\cdot dx_2 + dy_1 \\cdot dy_2$\n\nGeometrically: $\\vec{v}_1 \\cdot \\vec{v}_2 = |\\vec{v}_1| |\\vec{v}_2| \\cos\\theta$\n\nSo $\\cos\\theta < 0 \\iff \\theta > 90°$ iff dot product is negative.",
    "significance": "critical",
    "relatedConcepts": ["dot product", "angle", "cosine", "inner product"]
  },
  {
    "id": "ann-oblique-def",
    "proofId": "knights-tour-oblique",
    "range": { "startLine": 104, "endLine": 113 },
    "type": "definition",
    "title": "Oblique Turns",
    "content": "An **oblique turn** is one where the knight's direction changes by more than 90 degrees. This happens when consecutive move vectors have negative dot product.\n\nFor knight moves, the possible dot products are:\n- **Acute** (< 90°): 5, 4, 1\n- **Right** (= 90°): 0  \n- **Oblique** (> 90°): -1, -4, -5\n\nOblique turns occur when the knight 'doubles back' significantly.",
    "mathContext": "$\\text{isOblique}(\\vec{v}_1, \\vec{v}_2) \\iff \\vec{v}_1 \\cdot \\vec{v}_2 < 0$\n\nExample: NNE (+1,+2) followed by SSW (-1,-2) gives:\n$(1)(-1) + (2)(-2) = -1 - 4 = -5 < 0$ ✓ Oblique!",
    "significance": "critical",
    "prerequisites": ["ann-dot-product"],
    "relatedConcepts": ["obtuse angle", "direction change", "turn classification"]
  },
  {
    "id": "ann-dot-values",
    "proofId": "knights-tour-oblique",
    "range": { "startLine": 115, "endLine": 118 },
    "type": "theorem",
    "title": "Possible Dot Product Values",
    "content": "For any two knight move vectors, the dot product is one of exactly 7 values: {-5, -4, -1, 0, 1, 4, 5}.\n\nThis can be verified by exhaustive case analysis over all 8 x 8 = 64 pairs of directions. The proof uses `sorry` as a placeholder for this mechanical verification.",
    "mathContext": "The symmetric distribution around 0 reflects the geometry: for every acute pair there's a corresponding obtuse pair (with the second vector negated).",
    "significance": "supporting",
    "prerequisites": ["ann-dot-product"],
    "relatedConcepts": ["case analysis", "finite verification"]
  },
  {
    "id": "ann-closed-tour",
    "proofId": "knights-tour-oblique",
    "range": { "startLine": 134, "endLine": 148 },
    "type": "definition",
    "title": "Closed Knight's Tour",
    "content": "A **ClosedTour** bundles four requirements:\n\n1. `squares`: A list of 64 squares\n2. `length_eq`: The list has exactly 64 elements\n3. `nodup`: All squares are distinct (no revisits)\n4. `path`: Consecutive squares are knight-adjacent\n5. `closes`: The last square connects back to the first\n\nThis is a Hamiltonian cycle in the knight graph.",
    "mathContext": "A closed tour $(s_0, s_1, ..., s_{63})$ satisfies:\n- $\\{s_i\\}_{i=0}^{63} = $ all 64 squares (bijection)\n- $s_i \\sim s_{i+1}$ for all $i$ (mod 64)\n\nThere are exactly 26,534,728,821,064 directed closed tours on the 8x8 board.",
    "significance": "critical",
    "prerequisites": ["ann-knight-graph"],
    "relatedConcepts": ["Hamiltonian cycle", "structure", "dependent record"]
  },
  {
    "id": "ann-oblique-count",
    "proofId": "knights-tour-oblique",
    "range": { "startLine": 162, "endLine": 169 },
    "type": "definition",
    "title": "Counting Oblique Turns",
    "content": "The `obliqueCount` function counts turns where the knight changes direction by more than 90°.\n\nA closed 64-move tour has 64 turns (including the turn from move 63 back to move 0). We pair consecutive move vectors and count those with negative dot product.\n\n**Knuth's theorem**: This count is always ≥ 4.",
    "mathContext": "$\\text{obliqueCount}(T) = |\\{i : \\vec{v}_i \\cdot \\vec{v}_{i+1} < 0\\}|$\n\nwhere indices are cyclic (mod 64).",
    "significance": "critical",
    "prerequisites": ["ann-oblique-def", "ann-closed-tour"],
    "relatedConcepts": ["counting function", "tour invariant"]
  },
  {
    "id": "ann-direction-discretization",
    "proofId": "knights-tour-oblique",
    "range": { "startLine": 184, "endLine": 196 },
    "type": "insight",
    "title": "Discretizing Directions into Z/8Z",
    "content": "A crucial insight: knight moves have exactly 8 directions, which we number 0-7 counterclockwise. This maps to $\\mathbb{Z}/8\\mathbb{Z}$ (integers mod 8).\n\n**Direction assignments**:\n- 0: NNE (+1,+2)\n- 1: ENE (+2,+1)\n- 2: ESE (+2,-1)\n- 3: SSE (+1,-2)\n- 4: SSW (-1,-2)\n- 5: WSW (-2,-1)\n- 6: WNW (-2,+1)\n- 7: NNW (-1,+2)\n\nOpposite directions differ by 4 (mod 8).",
    "mathContext": "$\\text{dir} : \\text{MoveVector} \\to \\mathbb{Z}/8\\mathbb{Z}$\n\nConsecutive directions differ by 1 unit = 45°.\nA full rotation is 8 units = 360°.",
    "significance": "critical",
    "relatedConcepts": ["modular arithmetic", "discrete geometry", "Z/8Z"]
  },
  {
    "id": "ann-turn-angle",
    "proofId": "knights-tour-oblique",
    "range": { "startLine": 198, "endLine": 201 },
    "type": "definition",
    "title": "Turn Angles in Z/8Z",
    "content": "The **turn angle** between consecutive moves is the difference of their directions (mod 8). This signed value represents how much the knight rotated.\n\n**Angle meanings**:\n- 0: straight ahead (same direction)\n- 1, 2: slight turn (acute, ≤ 90°)\n- 3: sharp turn (~135°)\n- 4: complete reversal (180°)\n- 5: sharp turn (~-135° = 225°)\n- 6, 7: slight turn (acute)",
    "mathContext": "$\\text{turn}(\\vec{v}_1, \\vec{v}_2) = \\text{dir}(\\vec{v}_2) - \\text{dir}(\\vec{v}_1) \\in \\mathbb{Z}/8\\mathbb{Z}$",
    "significance": "key",
    "prerequisites": ["ann-direction-discretization"],
    "relatedConcepts": ["signed angle", "modular subtraction"]
  },
  {
    "id": "ann-oblique-iff-large",
    "proofId": "knights-tour-oblique",
    "range": { "startLine": 203, "endLine": 215 },
    "type": "theorem",
    "title": "Oblique = Large Turn Angle",
    "content": "**Key equivalence**: A turn is oblique (dot product < 0) if and only if the turn angle is in {3, 4, 5} mod 8.\n\n- **Angles 3, 5**: ~135° turns (obtuse)\n- **Angle 4**: 180° reversal (directly back)\n\nNon-oblique turns have angles in {0, 1, 2, 6, 7}.\n\nThis connects the geometric definition (dot product) to the algebraic one (modular arithmetic).",
    "mathContext": "$\\text{isOblique}(\\vec{v}_1, \\vec{v}_2) \\iff \\text{turn}(\\vec{v}_1, \\vec{v}_2) \\in \\{3, 4, 5\\}$\n\nVerified by checking all 64 pairs.",
    "significance": "critical",
    "prerequisites": ["ann-oblique-def", "ann-turn-angle"],
    "relatedConcepts": ["equivalence", "angle classification"]
  },
  {
    "id": "ann-winding-zero",
    "proofId": "knights-tour-oblique",
    "range": { "startLine": 217, "endLine": 227 },
    "type": "theorem",
    "title": "The Winding Constraint",
    "content": "**Fundamental constraint**: In a closed tour, the sum of all turn angles equals 0 (mod 8).\n\n**Intuition**: The knight returns to its starting position *and* starting direction. The total rotation must be a multiple of 360°, which is 8 units in our discretization.\n\nThis is analogous to the winding number of a closed curve being an integer.",
    "mathContext": "$\\sum_{i=0}^{63} \\text{turn}(\\vec{v}_i, \\vec{v}_{i+1}) \\equiv 0 \\pmod{8}$\n\nThe Gauss-Bonnet theorem for discrete curves!",
    "significance": "critical",
    "prerequisites": ["ann-turn-angle", "ann-closed-tour"],
    "relatedConcepts": ["winding number", "total curvature", "Gauss-Bonnet"]
  },
  {
    "id": "ann-counting-argument",
    "proofId": "knights-tour-oblique",
    "range": { "startLine": 1101, "endLine": 1405 },
    "type": "theorem",
    "title": "The 4-Oblique Lower Bound",
    "content": "**Main Theorem**: Every closed knight's tour has at least 4 oblique turns.\n\n**Proof**: Each of the 4 corner squares (a1, a8, h1, h8) has exactly 2 knight-adjacent squares. When the tour passes through a corner, the knight must enter from one neighbor and exit to the other. This forced path creates an oblique turn at each corner.\n\nSince the tour visits all 64 squares including all 4 corners, we get at least 4 oblique turns.",
    "mathContext": "$\\forall T : \\text{ClosedTour}, \\quad \\text{obliqueCount}(T) \\geq 4$\n\nThis is proved by the corner-forcing argument: corners have degree 2 in the knight graph, forcing oblique turns.",
    "significance": "critical",
    "prerequisites": ["ann-winding-zero", "ann-oblique-iff-large"],
    "relatedConcepts": ["lower bound", "corner forcing", "graph degree"]
  },
  {
    "id": "ann-d4-intro",
    "proofId": "knights-tour-oblique",
    "range": { "startLine": 252, "endLine": 260 },
    "type": "concept",
    "title": "D4 Symmetry of the Chessboard",
    "content": "The chessboard has 8 symmetries forming the **dihedral group D4**:\n\n- **4 rotations**: 0°, 90°, 180°, 270° about the center\n- **4 reflections**: horizontal, vertical, two diagonals\n\nThese preserve the knight graph: if squares A, B are knight-adjacent, so are their images under any D4 transformation.\n\nThis 8-fold symmetry reduces the search space for uniqueness.",
    "mathContext": "$D_4 = \\langle r, s \\mid r^4 = s^2 = 1, srs = r^{-1} \\rangle$\n\n$|D_4| = 8$, reducing ~13 trillion tours to ~1.7 trillion equivalence classes.",
    "significance": "key",
    "relatedConcepts": ["dihedral group", "symmetry group", "orbit-stabilizer"]
  },
  {
    "id": "ann-rotation-def",
    "proofId": "knights-tour-oblique",
    "range": { "startLine": 262, "endLine": 272 },
    "type": "definition",
    "title": "Rotating Squares",
    "content": "We define 90° counterclockwise rotation about the board center.\n\nFor a square at (x, y), the rotated position is (7-y, x). This maps:\n- a1 (0,0) → a8 (0,7) → h8 (7,7) → h1 (7,0) → a1\n\nApplying 4 times returns to the original, matching the cyclic group structure.",
    "mathContext": "$R_{90°}(x, y) = (7-y, x)$\n\nThe board center is at (3.5, 3.5). The formula accounts for this by using 7 - y instead of -y.",
    "significance": "supporting",
    "relatedConcepts": ["rotation", "coordinate transformation"]
  },
  {
    "id": "ann-reflection-def",
    "proofId": "knights-tour-oblique",
    "range": { "startLine": 274, "endLine": 283 },
    "type": "definition",
    "title": "D4 Transformations",
    "content": "We encode D4 elements as pairs (reflect, rotate):\n\n- `reflect`: Whether to flip horizontally first\n- `rotate`: How many 90° counterclockwise rotations\n\nThe 8 combinations give all D4 symmetries. We apply reflection first (if any), then rotation.",
    "mathContext": "D4 elements: {id, r, r², r³, s, sr, sr², sr³}\n\nwhere r = 90° rotation, s = horizontal reflection.\n\nThe encoding (Bool × Fin 4) gives a natural representation.",
    "significance": "supporting",
    "prerequisites": ["ann-d4-intro", "ann-rotation-def"],
    "relatedConcepts": ["group representation", "semidirect product"]
  },
  {
    "id": "ann-knight-invariant",
    "proofId": "knights-tour-oblique",
    "range": { "startLine": 285, "endLine": 288 },
    "type": "theorem",
    "title": "Knight Graph Invariance",
    "content": "Knight adjacency is preserved under D4 symmetries: if A and B are knight-adjacent, so are g(A) and g(B) for any g ∈ D4.\n\n**Why?** The L-shaped knight move is preserved under rotation and reflection. Both operations preserve the product |dx| × |dy| = 2 and the sum |dx| + |dy| = 3.",
    "mathContext": "$A \\sim B \\iff g(A) \\sim g(B)$ for all $g \\in D_4$\n\nThis makes D4 a group of graph automorphisms.",
    "significance": "key",
    "prerequisites": ["ann-knight-graph", "ann-d4-intro"],
    "relatedConcepts": ["graph automorphism", "invariance"]
  },
  {
    "id": "ann-oblique-invariant",
    "proofId": "knights-tour-oblique",
    "range": { "startLine": 314, "endLine": 321 },
    "type": "theorem",
    "title": "Oblique Count is D4-Invariant",
    "content": "**Key invariance**: Applying a D4 symmetry to a tour doesn't change its oblique count.\n\n**Why?** D4 transformations are orthogonal (they preserve angles and distances). Since 'oblique' is defined by dot product sign, and orthogonal transformations preserve dot products, the count is invariant.\n\nThis lets us work with equivalence classes of tours.",
    "mathContext": "$\\text{obliqueCount}(g \\cdot T) = \\text{obliqueCount}(T)$ for all $g \\in D_4$\n\nOrthogonal transformations satisfy: $\\langle Qv, Qw \\rangle = \\langle v, w \\rangle$",
    "significance": "critical",
    "prerequisites": ["ann-d4-intro", "ann-oblique-count"],
    "relatedConcepts": ["orthogonal transformation", "invariant"]
  },
  {
    "id": "ann-canonical",
    "proofId": "knights-tour-oblique",
    "range": { "startLine": 323, "endLine": 331 },
    "type": "definition",
    "title": "Canonical Form",
    "content": "To count tours 'up to symmetry', we define a **canonical form**:\n\n1. The tour starts at corner a1 = (0,0)\n2. Among all D4-equivalent tours starting at a1, it's lexicographically smallest\n\nEvery tour is D4-equivalent to exactly one canonical tour. This lets us reduce enumeration from ~13 trillion to ~1.7 trillion.",
    "mathContext": "Canonical forms induce a bijection:\n$\\{\\text{all tours}\\} / D_4 \\cong \\{\\text{canonical tours}\\}$",
    "significance": "key",
    "prerequisites": ["ann-d4-intro"],
    "relatedConcepts": ["canonical representative", "quotient set", "normal form"]
  },
  {
    "id": "ann-minimal-tour",
    "proofId": "knights-tour-oblique",
    "range": { "startLine": 2236, "endLine": 2327 },
    "type": "theorem",
    "title": "The Unique Minimal Tour",
    "content": "The explicit 64-square minimal oblique tour is constructed from Knuth's Fig. A-19(t). It visits squares in a specific order that achieves exactly 4 oblique turns.\n\nThe tour is verified using `native_decide` to check:\n- All 64 squares are visited exactly once (nodup)\n- Consecutive squares are knight-adjacent (path)\n- The tour closes (last square adjacent to first)\n- Oblique count equals 4\n\nKnuth called it 'a beauty.'",
    "mathContext": "$\\exists T^* : \\text{ClosedTour}, \\quad \\text{obliqueCount}(T^*) = 4$\n\nExplicitly constructed and computationally verified.",
    "significance": "critical",
    "prerequisites": ["ann-counting-argument"],
    "relatedConcepts": ["extremal solution", "construction", "native_decide"]
  },
  {
    "id": "ann-uniqueness",
    "proofId": "knights-tour-oblique",
    "range": { "startLine": 2328, "endLine": 2358 },
    "type": "theorem",
    "title": "Uniqueness of the Minimal Tour",
    "content": "**Remarkable result**: Any closed knight's tour with exactly 4 oblique turns is D4-equivalent to the minimal tour.\n\nAmong ~13 trillion directed closed tours (or ~1.7 trillion up to symmetry), **exactly ONE equivalence class** achieves the minimum of 4 oblique turns.\n\nThis is accepted as an **axiom** (`knuth_unique_four_oblique`) based on Donald Knuth's exhaustive computational verification in TAOCP Vol 4 Fascicle 8a (December 2025).",
    "mathContext": "$\\forall T, \\quad \\text{obliqueCount}(T) = 4 \\implies \\exists g \\in D_4, \\quad g \\cdot T = T^*$\n\nThe axiom could be eliminated via SAT/LRAT certificate verification in Lean.",
    "significance": "critical",
    "prerequisites": ["ann-minimal-tour", "ann-oblique-invariant"],
    "relatedConcepts": ["uniqueness", "axiom", "Knuth verification"]
  },
  {
    "id": "ann-main-lower",
    "proofId": "knights-tour-oblique",
    "range": { "startLine": 2367, "endLine": 2372 },
    "type": "theorem",
    "title": "Main Theorem 1: Lower Bound",
    "content": "**Theorem 1 (Lower Bound)**: Every closed knight's tour on an 8x8 board has at least 4 oblique turns.\n\nThis is proven mathematically via the corner-forcing argument: each of the 4 corners has only 2 knight-adjacent squares, so passing through a corner forces an oblique turn.",
    "mathContext": "$\\forall T : \\text{ClosedTour}, \\quad \\text{obliqueCount}(T) \\geq 4$",
    "significance": "critical",
    "prerequisites": ["ann-counting-argument"],
    "relatedConcepts": ["main result", "corner forcing"]
  },
  {
    "id": "ann-main-unique",
    "proofId": "knights-tour-oblique",
    "range": { "startLine": 2422, "endLine": 2444 },
    "type": "theorem",
    "title": "Main Theorem 2: Uniqueness",
    "content": "**Theorem 2 (Uniqueness)**: There exists exactly one closed knight's tour (up to D4 symmetry) with exactly 4 oblique turns.\n\nThis combines:\n- **Existence**: The minimal tour is explicitly constructed from Knuth's Fig. A-19(t)\n- **Uniqueness**: Accepted as axiom based on Knuth's enumeration\n\nThe 'beauty' Knuth described is this unique minimal-oblique tour.",
    "mathContext": "$\\exists! T : \\text{ClosedTour}, \\quad \\text{isCanonical}(T) \\land \\text{obliqueCount}(T) = 4$\n\nThe notation $\\exists!$ means 'there exists exactly one.'",
    "significance": "critical",
    "prerequisites": ["ann-uniqueness", "ann-canonical"],
    "relatedConcepts": ["existence and uniqueness", "extremal combinatorics"]
  },
  {
    "id": "ann-bounds",
    "proofId": "knights-tour-oblique",
    "range": { "startLine": 2447, "endLine": 2459 },
    "type": "theorem",
    "title": "References and Historical Context",
    "content": "The knight's tour problem has captivated mathematicians for over 1200 years. Knuth's 2025 Christmas Lecture adds a new chapter, revealing the minimum-oblique structure.\n\nThe OEIS sequence A001230 tracks closed tours on n×n boards. The cryptic 'Pun resisted, 62, 470' in TAOCP Vol. 4A remains a mystery...",
    "mathContext": "Historical references include Euler (1759), TAOCP Vol 4 Fascicle 8a, and the annual Stanford Christmas Lectures.",
    "significance": "supporting",
    "prerequisites": [],
    "relatedConcepts": ["TAOCP", "OEIS", "Euler", "Christmas Lecture"]
  },
  {
    "id": "ann-references",
    "proofId": "knights-tour-oblique",
    "range": { "startLine": 2447, "endLine": 2459 },
    "type": "concept",
    "title": "Historical Context",
    "content": "The knight's tour problem has captivated mathematicians for over **1200 years**:\n\n- **9th century**: Earliest known references in Arabic manuscripts\n- **1759**: Euler's systematic study of tours\n- **1823**: Warnsdorff's greedy heuristic\n- **1996**: First computer enumeration of 8×8 tours\n- **2025**: Knuth's oblique angle theorem!\n\nThe cryptic 'Pun resisted, 62, 470' in TAOCP Vol. 4A remains a mystery...",
    "mathContext": "OEIS A001230: closed tours on $n \\times n$ board.\n\nFor $n=8$: 26,534,728,821,064 directed tours.\n\nThe problem connects graph theory, combinatorics, and recreational mathematics.",
    "significance": "supporting",
    "relatedConcepts": ["TAOCP", "OEIS", "Euler", "recreational mathematics"]
  }
]

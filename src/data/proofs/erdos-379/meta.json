{
  "id": "erdos-379",
  "title": "Erdos Problem #379: Binomial Coefficients and Prime Power Divisibility",
  "slug": "erdos-379",
  "description": "Let S(n) be the largest s such that every C(n,k) for 1 <= k < n is divisible by some p^s. Is limsup S(n) = infinity?",
  "meta": {
    "author": "Cambie, Kovac, Tao (Lean verified)",
    "sourceUrl": "https://erdosproblems.com/379",
    "date": "2024",
    "status": "complete",
    "proofRepoPath": "Proofs/Erdos379Problem.lean",
    "tags": [
      "erdos",
      "number-theory",
      "binomial-coefficients",
      "prime-powers",
      "lucas-theorem"
    ],
    "badge": "axiom",
    "sorries": 0,
    "erdosNumber": 379,
    "erdosUrl": "https://erdosproblems.com/379",
    "erdosProblemStatus": "proved",
    "dateAdded": "2026-01-18",
    "mathlib_version": "4.15.0",
    "mathlibDependencies": [
      {
        "theorem": "Nat.choose",
        "description": "Binomial coefficient function",
        "module": "Mathlib.Data.Nat.Choose.Basic"
      },
      {
        "theorem": "Filter.limsup",
        "description": "Limit superior for the main theorem statement",
        "module": "Mathlib.Order.Filter.AtTopBot.Basic"
      },
      {
        "theorem": "Nat.Prime",
        "description": "Primality predicate for prime power divisibility",
        "module": "Mathlib.Data.Nat.Prime.Defs"
      },
      {
        "theorem": "Nat.digits",
        "description": "Base-p digit representation for Lucas' theorem",
        "module": "Mathlib.Data.Nat.Digits"
      }
    ],
    "originalContributions": [
      "Verified divisibility examples for n = 3 and n = 9",
      "Definition of S(n) and alternative S'(n) from formal-conjectures",
      "Formalization of the witness sequence n = 3^{2^m}",
      "Connection to Lucas' theorem and base-3 representations",
      "Comparison with easier s(n) (existential vs universal over k)"
    ]
  },
  "overview": {
    "historicalContext": "Erdos Problem #379 concerns a subtle question about prime power divisibility of binomial coefficients. The function S(n) measures a 'uniform' divisibility property: the largest power s such that EVERY binomial coefficient C(n,k) for 1 <= k < n is divisible by some prime power p^s (where the prime p can depend on k).\n\nThe problem appeared in Erdos and Graham's 1980 collection [ErGr80, p.72]. An easier related function s(n) - where we only require ONE k to have high prime power divisibility - was known to satisfy s(n) ~ log(n).\n\nThe problem was solved affirmatively by Cambie, Kovac, and Tao, who showed that the key is to consider n = 3^{2^m}. For such n, Lucas' theorem on binomial coefficients modulo primes reveals that every C(n,k) is divisible by 3^m, giving S(n) >= m. Since m can be arbitrarily large, we get limsup S(n) = infinity.\n\nThe solution was formally verified in Lean, making this one of the Erdos problems with computer-verified proofs.",
    "problemStatement": "Let $S(n)$ denote the largest integer such that, for all $1 \\leq k < n$, the binomial coefficient $\\binom{n}{k}$ is divisible by $p^{S(n)}$ for some prime $p$ (depending on $k$). Is it true that\n$$\\limsup_{n \\to \\infty} S(n) = \\infty?$$\n\n**Answer**: YES\n\n**Key Construction**: $n = 3^{2^m}$ gives $S(n) \\geq m$.\n\n**Status**: SOLVED (Lean verified by Cambie, Kovac, Tao)",
    "proofStrategy": "We formalize the problem by defining:\n\n1. **maxPrimePowerExp(n,k)**: The maximum s such that p^s | C(n,k) for some prime p\n2. **S(n)**: The minimum of maxPrimePowerExp(n,k) over all 1 <= k < n\n3. **witnessSeq(m)**: The sequence n_m = 3^{2^m}\n\nThe key lemma is that for n = 3^{2^m}, every C(n,k) is divisible by 3^m. This follows from Lucas' theorem: the base-3 representation of 3^{2^m} is a 1 followed by 2^m zeros, and the combinatorics of Lucas' theorem forces high 3-divisibility.\n\nWe verify concrete examples (C(3,k) divisible by 3, C(9,k) divisible by 3 but not always 9) and state the main theorem that limsup S(n) = infinity as an axiom referencing the Lean-verified proof.",
    "keyInsights": [
      "**Universal vs Existential**: S(n) requires ALL k to have high divisibility, while the easier s(n) only requires one k. This universal quantifier makes S(n) much harder to analyze.",
      "**The witness 3^{2^m}**: Powers of 3 with very composite exponents (like 2^m) have special structure that forces uniform divisibility. The base-3 representation is key.",
      "**Lucas' Theorem**: Binomial coefficients C(m,n) mod p depend only on the base-p digits. When m = 3^{2^k} (a 1 followed by 2^k zeros in base 3), this structure forces divisibility.",
      "**Connection to Problem #175**: Related problem about binomial coefficient divisibility properties.",
      "**Lean Verification**: This is one of few Erdos problems with computer-verified proofs, providing high confidence in the solution."
    ]
  },
  "sections": [
    {
      "id": "definitions",
      "title": "Core Definitions",
      "startLine": 35,
      "endLine": 55,
      "summary": "maxPrimePowerExp, S(n), S'(n) definitions for the main function."
    },
    {
      "id": "basic-properties",
      "title": "Basic Properties",
      "startLine": 57,
      "endLine": 68,
      "summary": "S(n) >= 1 for n >= 2, and S bounds any prime power dividing all C(n,k)."
    },
    {
      "id": "witness-construction",
      "title": "The Key Construction",
      "startLine": 69,
      "endLine": 85,
      "summary": "The witness sequence n_m = 3^{2^m} and the key divisibility lemma."
    },
    {
      "id": "examples",
      "title": "Concrete Examples",
      "startLine": 86,
      "endLine": 111,
      "summary": "Verified divisibility for C(3,k) and C(9,k), showing 3 divides all but 9 doesn't."
    },
    {
      "id": "main-theorem",
      "title": "Main Theorem",
      "startLine": 112,
      "endLine": 127,
      "summary": "The solved theorem: limsup S(n) = infinity."
    },
    {
      "id": "comparison",
      "title": "Comparison with s(n)",
      "startLine": 128,
      "endLine": 147,
      "summary": "The easier function s(n) with existential quantifier grows like log(n)."
    },
    {
      "id": "lucas",
      "title": "Lucas' Theorem Connection",
      "startLine": 148,
      "endLine": 170,
      "summary": "How Lucas' theorem on base-p digits explains the 3^{2^m} construction."
    }
  ],
  "conclusion": {
    "summary": "We formalize Erdos Problem #379 about uniform prime power divisibility of binomial coefficients. The answer is YES: limsup S(n) = infinity. The key construction uses n = 3^{2^m}, which gives S(n) >= m by Lucas' theorem analysis of base-3 representations.",
    "implications": "This problem demonstrates several important themes:\n\n1. **Universal vs Existential Quantifiers**: The difference between 'for all k' (hard) and 'for some k' (easy) in divisibility questions.\n\n2. **Lucas' Theorem Applications**: Base-p representations provide powerful tools for analyzing binomial coefficients modulo primes.\n\n3. **Computer-Verified Mathematics**: The Lean formalization by Cambie, Kovac, and Tao represents a gold standard for proof reliability.",
    "openQuestions": [
      "What is the exact growth rate of S(n)?",
      "Can the construction 3^{2^m} be improved to give faster-growing S(n)?",
      "What other witness sequences achieve high S(n)?",
      "Are there connections to other properties of binomial coefficients?"
    ]
  }
}

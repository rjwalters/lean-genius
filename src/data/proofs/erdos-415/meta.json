{
  "id": "erdos-415",
  "title": "Erdős Problem #415: Ordering Patterns in Euler's Totient Function",
  "slug": "erdos-415",
  "description": "Let F(n) = largest k such that ALL k! ordering patterns appear in some φ(m+1),...,φ(m+k). Erdős proved F(n) ≍ log log log n. The exact constant and which pattern fails first remain OPEN.",
  "meta": {
    "author": "Erdős (1936)",
    "sourceUrl": "https://erdosproblems.com/415",
    "date": "1936",
    "status": "formalized",
    "proofRepoPath": "Proofs/Erdos415Problem.lean",
    "tags": [
      "erdos",
      "number-theory",
      "totient-function",
      "ordering-patterns",
      "asymptotics",
      "open-problem"
    ],
    "badge": "conjecture",
    "sorries": 18,
    "erdosNumber": 415,
    "erdosUrl": "https://erdosproblems.com/415",
    "erdosProblemStatus": "open",
    "mathlibDependencies": [
      {
        "theorem": "Nat.totient",
        "description": "Euler's totient function",
        "module": "Mathlib.Data.Nat.Totient"
      },
      {
        "theorem": "Equiv.Perm",
        "description": "Permutations for ordering patterns",
        "module": "Mathlib.GroupTheory.Perm.Basic"
      },
      {
        "theorem": "Real.log",
        "description": "Logarithm for triple-log bounds",
        "module": "Mathlib.Analysis.SpecialFunctions.Log.Basic"
      }
    ],
    "originalContributions": [
      "Formal definition of ordering patterns as permutations",
      "Definition of F(n) via pattern achievability",
      "Statement of the three open questions",
      "Formalization of triple-log asymptotic bounds",
      "Extension to other arithmetic functions (σ, τ, ω)"
    ]
  },
  "overview": {
    "historicalContext": "This problem concerns the remarkable regularity of ordering patterns in sequences of Euler's totient function. Given k consecutive values φ(m+1), ..., φ(m+k), their relative ordering is one of k! possible permutations. Erdős asked: how large can k be such that ALL k! patterns appear somewhere in φ(1), ..., φ(n)?\n\nIn 1936, Erdős proved F(n) ≍ log log log n — an astonishingly slow growth rate. The same triple-log behavior holds for other arithmetic functions like σ(n), τ(n), and ω(n).",
    "problemStatement": "**Definition:**\nF(n) = largest k such that all k! ordering patterns appear in some sequence φ(m+1), ..., φ(m+k) with m + k ≤ n.\n\n**Known:** F(n) ≍ log log log n (Erdős 1936)\n\n**Open Questions:**\n1. Is there a constant c with F(n) = (c + o(1)) log log log n?\n2. Is the strictly decreasing pattern always the first to fail?\n3. Is the 'natural' pattern (mimicking φ(1),...,φ(k)) the most common?",
    "proofStrategy": "The formalization:\n\n1. Defines `OrderingPattern k` as Equiv.Perm (Fin k)\n2. Defines `RealizesPattern` for when a sequence matches a pattern\n3. Defines `AllPatternsAchievable n k` requiring all k! patterns appear\n4. Defines `F n` as the supremum of achievable k\n5. States `AsymptoticTripleLog` for the known bounds\n6. Formalizes the three open questions\n7. Shows extension to σ, τ, and other functions",
    "keyInsights": [
      "**Triple Log Growth:** F(n) ≍ log log log n is remarkably slow. For n = 10^10^10, F(n) is only about 3-4!",
      "**Why So Slow:** k! patterns need k! independent chances. But φ values cluster heavily (many n share the same φ(n)), reducing independence.",
      "**Universality:** The same triple-log bound holds for σ, τ, ω, and any 'decent' arithmetic function.",
      "**The Hardest Pattern:** Strictly decreasing φ(m+1) > φ(m+2) > ... is conjectured to be the first pattern to fail.",
      "**φ Collisions:** Many integers share the same φ value (e.g., φ(1) = φ(2) = 1, φ(3) = φ(4) = φ(6) = 2)."
    ]
  },
  "sections": [
    {
      "id": "arithmetic-functions",
      "title": "Arithmetic Functions",
      "summary": "Definitions of φ, σ, τ, ω",
      "startLine": 31,
      "endLine": 43
    },
    {
      "id": "ordering-patterns",
      "title": "Ordering Patterns",
      "summary": "Patterns as permutations, realizing patterns",
      "startLine": 45,
      "endLine": 62
    },
    {
      "id": "f-function",
      "title": "The Function F(n)",
      "summary": "Definition and properties of F(n)",
      "startLine": 64,
      "endLine": 84
    },
    {
      "id": "known-bounds",
      "title": "Known Bounds",
      "summary": "Erdős 1936: F(n) ≍ log log log n",
      "startLine": 86,
      "endLine": 97
    },
    {
      "id": "open-questions",
      "title": "The Main Questions (OPEN)",
      "summary": "Exact constant, first-to-fail pattern, most common pattern",
      "startLine": 99,
      "endLine": 126
    },
    {
      "id": "specific-patterns",
      "title": "Specific Pattern Analysis",
      "summary": "Increasing, decreasing, alternating patterns",
      "startLine": 128,
      "endLine": 147
    },
    {
      "id": "phi-properties",
      "title": "Properties of φ",
      "summary": "Relevant facts about totient function",
      "startLine": 149,
      "endLine": 167
    },
    {
      "id": "other-functions",
      "title": "Extension to Other Functions",
      "summary": "Same bounds for σ, τ",
      "startLine": 169,
      "endLine": 186
    },
    {
      "id": "why-triple-log",
      "title": "Why Triple Log?",
      "summary": "Intuition for the slow growth",
      "startLine": 188,
      "endLine": 202
    }
  ],
  "conclusion": {
    "summary": "Erdős Problem #415 asks about ordering patterns in Euler's totient function. While Erdős proved F(n) ≍ log log log n in 1936, the exact constant, which pattern fails first, and which is most common all remain OPEN. The triple-log growth is universal across arithmetic functions.",
    "implications": "This problem connects to:\n\n1. **Analytic Number Theory:** Distribution of φ values and their correlations\n2. **Combinatorics:** Counting permutation patterns in sequences\n3. **Probabilistic Number Theory:** Independence in arithmetic functions\n4. **Order Statistics:** Extremal behavior of consecutive values\n5. **Ergodic Theory:** Long-range order in multiplicative functions",
    "openQuestions": [
      "What is the exact constant c in F(n) = (c + o(1)) log log log n?",
      "Is strictly decreasing always the first pattern to fail?",
      "Is the natural ordering (mimic φ(1),...,φ(k)) most common?",
      "What is F(n) for small specific values of n?",
      "How do patterns with equality (φ(m+1) = φ(m+2)) behave?"
    ]
  }
}

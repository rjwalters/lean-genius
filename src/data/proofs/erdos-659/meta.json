{
  "id": "erdos-659",
  "title": "Erdős Problem #659: Point Configurations with Few Distances",
  "slug": "erdos-659",
  "description": "Is there a set of n points in R² such that every 4-point subset determines at least 3 distances, yet the total distinct distances is O(n/√log n)? Answer: Yes, via the Moree-Osburn lattice.",
  "meta": {
    "author": "Moree-Osburn (2006), Lund-Sheffer",
    "sourceUrl": "https://erdosproblems.com/659",
    "date": "2006",
    "status": "complete",
    "proofRepoPath": "Proofs/Erdos659Problem.lean",
    "tags": [
      "erdos",
      "combinatorial-geometry",
      "distance-problems",
      "lattices"
    ],
    "badge": "wip",
    "sorries": 1,
    "erdosNumber": 659,
    "erdosUrl": "https://erdosproblems.com/659",
    "erdosProblemStatus": "proved",
    "mathlib_version": "4.15.0",
    "mathlibDependencies": [
      {
        "theorem": "Real.sqrt",
        "description": "Square root function on reals",
        "module": "Mathlib.Data.Real.Sqrt"
      },
      {
        "theorem": "Real.log",
        "description": "Natural logarithm",
        "module": "Mathlib.Analysis.SpecialFunctions.Log.Basic"
      },
      {
        "theorem": "dist",
        "description": "Metric space distance function",
        "module": "Mathlib.Topology.MetricSpace.Basic"
      }
    ],
    "originalContributions": [
      "Formalization of the 4-point distance property",
      "Definition of distinct distances for finite point sets",
      "Classification of 6 configurations with only 2 distances",
      "Educational explanation of Moree-Osburn lattice construction"
    ]
  },
  "overview": {
    "historicalContext": "This problem explores the interplay between local constraints (every 4 points determine many distances) and global behavior (few total distances). Erdős believed such configurations should exist and would yield bounds for related problems about point configurations.\n\nThe solution came from an unexpected direction: algebraic number theory. Moree and Osburn (2006) discovered that points on a 'stretched' integer lattice {(a, b√2) : a,b ∈ ℤ} have the remarkable property of avoiding regular geometric configurations while having few distinct distances. The key insight is that distances in this lattice have the form √(x² + 2y²), and by Landau's theorem, the count of integers representable this way grows as O(N/√log N).\n\nLund and Sheffer independently found this construction, and Grayzel later completed the proof by ruling out the pentagon configuration using computer assistance.",
    "problemStatement": "Is there a set of $n$ points in $\\mathbb{R}^2$ such that every subset of $4$ points determines at least $3$ distances, yet the total number of distinct distances is $\\ll \\frac{n}{\\sqrt{\\log n}}$?\n\n**Answer:** Yes. The truncated lattice $\\{(a, b\\sqrt{2}) : a,b \\in \\mathbb{Z}\\}$ achieves this bound.",
    "proofStrategy": "The proof uses the Moree-Osburn lattice construction. The strategy has two parts:\n\n1. **Few total distances**: Distances between lattice points have form √(x² + 2y²). By Landau's theorem on sums of two squares (generalized), the count of such integers ≤ N is O(N/√log N).\n\n2. **4-point property**: There are exactly 6 configurations of 4 points with only 2 distances. Five contain squares or equilateral triangles (impossible in this lattice due to √2 stretching). The sixth is 4 vertices of a regular pentagon, ruled out by explicit calculation.",
    "keyInsights": [
      "**Moree-Osburn lattice**: The set {(a, b√2) : a,b ∈ ℤ} 'stretches' the integer lattice by √2 in one direction, breaking symmetries that would create regular polygons",
      "**Landau's theorem**: The number of integers ≤ N representable as x² + 2y² is Θ(N/√log N), controlling the distance count",
      "**Configuration classification**: Only 6 ways exist for 4 points to have exactly 2 distances; this lattice avoids all of them",
      "**Quadratic forms**: Distances are √(x² + 2y²) - a positive definite binary quadratic form whose representation theory is well understood"
    ]
  },
  "sections": [
    {
      "id": "setup",
      "title": "Imports and Definitions",
      "startLine": 24,
      "endLine": 42,
      "summary": "Import Mathlib dependencies for real analysis and metric spaces"
    },
    {
      "id": "definitions",
      "title": "Core Definitions",
      "startLine": 44,
      "endLine": 57,
      "summary": "Define distinct distances and the 4-point property"
    },
    {
      "id": "axiom",
      "title": "Main Axiom",
      "startLine": 59,
      "endLine": 75,
      "summary": "State the Moree-Osburn construction works (requires deep number theory)"
    },
    {
      "id": "theorem",
      "title": "Main Theorem",
      "startLine": 77,
      "endLine": 94,
      "summary": "Derive the answer to Erdős #659 from the axiom"
    },
    {
      "id": "configurations",
      "title": "Two-Distance Configurations",
      "startLine": 96,
      "endLine": 113,
      "summary": "Enumerate the 6 configurations with only 2 distances among 4 points"
    }
  ],
  "conclusion": {
    "summary": "Erdős Problem #659 is answered affirmatively: large point sets exist with the 4-point property and few distinct distances. The Moree-Osburn lattice construction achieves O(n/√log n) distances while ensuring every 4-point subset determines at least 3 distances.",
    "implications": "This result connects discrete geometry to algebraic number theory, showing how arithmetic properties of quadratic forms control geometric configurations. It also provides effective bounds for related Erdős problems about squares in point sets.",
    "openQuestions": [
      "Can the O(n/√log n) bound be improved?",
      "Are there other lattice constructions with similar properties?",
      "What is the exact asymptotic constant in the distance count?"
    ]
  }
}
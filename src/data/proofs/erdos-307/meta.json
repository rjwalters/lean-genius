{
  "id": "erdos-307",
  "title": "Erdős #307: Prime Reciprocal Products",
  "slug": "erdos-307",
  "description": "Are there two finite sets of primes P, Q with (Σ 1/p)(Σ 1/q) = 1? Prime version: OPEN. Coprime version: SOLVED by Cambie with (1 + 1/5)(1/2 + 1/3) = 1.",
  "meta": {
    "author": "Barbeau (1976), Cambie",
    "sourceUrl": "https://erdosproblems.com/307",
    "date": "1976",
    "status": "formalized",
    "proofRepoPath": "Proofs/Erdos307Problem.lean",
    "tags": [
      "erdos",
      "number-theory",
      "primes",
      "egyptian-fractions",
      "reciprocals"
    ],
    "badge": "wip",
    "sorries": 6,
    "erdosNumber": 307,
    "erdosUrl": "https://erdosproblems.com/307",
    "erdosProblemStatus": "open",
    "mathlib_version": "4.15.0",
    "mathlibDependencies": [
      {
        "theorem": "Nat.Prime",
        "description": "Primality predicate",
        "module": "Mathlib.Data.Nat.Prime.Basic"
      },
      {
        "theorem": "Finset.sum",
        "description": "Summation over finite sets",
        "module": "Mathlib.Algebra.BigOperators.Group.Finset"
      },
      {
        "theorem": "Rat",
        "description": "Rational numbers",
        "module": "Mathlib.Data.Rat.Basic"
      }
    ],
    "originalContributions": [
      "Formalization of reciprocal sum products",
      "Verified Cambie's examples (coprime version)",
      "Strengthened coprime version definition",
      "Lower bound |P ∪ Q| ≥ 60 for prime solutions",
      "Connection to Egyptian fractions",
      "Computational intractability analysis"
    ]
  },
  "overview": {
    "historicalContext": "Erdős Problem #307 was posed by E. J. Barbeau in 1976 in 'Computer challenge corner: Problem 477: A brute force program' in the Journal of Recreational Mathematics.\n\nThe problem asks whether two finite sets of primes can have reciprocal sums that multiply to 1. This connects to Egyptian fractions and multiplicative number theory.\n\nThe weakened 'coprime version' (where elements need only be pairwise coprime, not prime) was solved by Cambie, who found elegant examples like (1 + 1/5)(1/2 + 1/3) = 1. The original prime version remains open after nearly 50 years.",
    "problemStatement": "**Question**: Do there exist two finite sets of primes P, Q such that\n$$ \\left(\\sum_{p \\in P} \\frac{1}{p}\\right) \\left(\\sum_{q \\in Q} \\frac{1}{q}\\right) = 1? $$\n\n**Status**: OPEN (prime version)\n\n**Coprime Version**: SOLVED by Cambie\n- $(1 + \\frac{1}{5})(\\frac{1}{2} + \\frac{1}{3}) = \\frac{6}{5} \\cdot \\frac{5}{6} = 1$\n- $(1 + \\frac{1}{41})(\\frac{1}{2} + \\frac{1}{3} + \\frac{1}{7}) = \\frac{42}{41} \\cdot \\frac{41}{42} = 1$\n\n**Known**: If P, Q are primes with product 1, then |P ∪ Q| ≥ 60",
    "proofStrategy": "We formalize the problem by:\n\n1. **reciprocalSum**: Σ_{n ∈ S} 1/n as a rational number\n2. **reciprocalProduct**: The product of two reciprocal sums\n3. **IsSetOfPrimes**: All elements are prime\n4. **IsPairwiseCoprime**: All pairs are coprime\n5. **Cambie's examples**: Verified computationally\n6. **Constraints**: P ∩ Q = ∅, |P ∪ Q| ≥ 60 for prime solutions\n7. **Computational bounds**: Search space ≈ 2^60 is intractable",
    "keyInsights": [
      "**Coprime solved, prime open**: Including 1 in a set makes balancing easier: 1 + 1/n = (n+1)/n. For prime sets, we can't use 1.",
      "**AM-GM constraint**: If (Σ 1/p)(Σ 1/q) = 1, then Σ 1/p + Σ 1/q ≥ 2 by AM-GM. This requires many primes since Σ 1/p grows like log log n.",
      "**Size bound |P ∪ Q| ≥ 60**: The first 60 primes give Σ 1/p ≈ 2.009, the minimum needed. Any solution needs at least 60 primes.",
      "**Computational intractability**: 2^60 ≈ 10^18 partitions to check. At 10^9/sec, this takes 36+ years.",
      "**Disjointness P ∩ Q = ∅**: If a prime appears in both sums, the product structure prevents equality to 1."
    ]
  },
  "sections": [
    {
      "id": "problem-statement",
      "title": "Problem Statement",
      "startLine": 40,
      "endLine": 58,
      "summary": "Definitions of reciprocal sums and the main problem."
    },
    {
      "id": "open-problem",
      "title": "The Open Problem (Prime Version)",
      "startLine": 60,
      "endLine": 73,
      "summary": "The main open question about prime sets."
    },
    {
      "id": "solved-coprime",
      "title": "The Solved Coprime Version",
      "startLine": 75,
      "endLine": 145,
      "summary": "Cambie's verified examples solving the coprime version."
    },
    {
      "id": "strengthened-coprime",
      "title": "Strengthened Coprime Version",
      "startLine": 147,
      "endLine": 158,
      "summary": "The open variant requiring 1 ∉ P ∪ Q."
    },
    {
      "id": "constraints",
      "title": "Constraints on Prime Solutions",
      "startLine": 160,
      "endLine": 196,
      "summary": "Disjointness and size bounds for prime solutions."
    },
    {
      "id": "hardness",
      "title": "Why the Problem is Hard",
      "startLine": 198,
      "endLine": 219,
      "summary": "Slow divergence and computational intractability."
    },
    {
      "id": "egyptian",
      "title": "Related Egyptian Fraction Problems",
      "startLine": 221,
      "endLine": 241,
      "summary": "Connection to unit fraction representations."
    },
    {
      "id": "computational",
      "title": "Computational Approaches",
      "startLine": 243,
      "endLine": 255,
      "summary": "Search space analysis and intractability."
    },
    {
      "id": "why-one",
      "title": "Why Does 1 Appear in Coprime Examples?",
      "startLine": 257,
      "endLine": 274,
      "summary": "The role of 1 in making solutions possible."
    },
    {
      "id": "alternative",
      "title": "Alternative Formulations",
      "startLine": 276,
      "endLine": 293,
      "summary": "Multiplicative and LCD formulations."
    },
    {
      "id": "partial",
      "title": "Partial Results",
      "startLine": 295,
      "endLine": 313,
      "summary": "Non-existence for small set sizes."
    },
    {
      "id": "summary",
      "title": "Summary",
      "startLine": 315,
      "endLine": 346,
      "summary": "Main results combined."
    }
  ],
  "conclusion": {
    "summary": "This formalization captures Erdős Problem #307 on prime reciprocal products. The coprime version is solved (Cambie's examples), but the prime version remains open. Any prime solution requires at least 60 primes, making exhaustive search infeasible.",
    "implications": "The problem connects number theory (primes, Egyptian fractions) with computational complexity (intractable search spaces). The contrast between the solved coprime version and open prime version illustrates how the structure of primes (no 1, slow-growing reciprocal sums) creates fundamental obstacles.",
    "openQuestions": [
      "Does a prime solution exist?",
      "Does a coprime solution with 1 ∉ P ∪ Q exist?",
      "What is the minimum |P ∪ Q| for a prime solution (if one exists)?",
      "Can the bound be improved beyond 60?"
    ]
  }
}
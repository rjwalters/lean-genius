{
  "id": "erdos-1086",
  "title": "Erdős Problem #1086: Triangles of Equal Area",
  "slug": "erdos-1086",
  "description": "Let g(n) be the maximum number of triangles with the same area determined by n points in ℝ². Best bounds: n² log log n ≪ g(n) ≪ n^{20/9} (Erdős-Purdy 1971, Raz-Sharir 2017). The Erdős-Purdy conjecture predicts g(n) = Θ(n² polylog(n)). Higher-dimensional generalizations involve g_d^r(n) for r-simplices in ℝ^d. Status: OPEN.",
  "meta": {
    "author": "Oppenheim (problem), Erdős-Purdy (1971), Pach-Sharir (1992), Dumitrescu-Sharir-Tóth (2009), Raz-Sharir (2017)",
    "sourceUrl": "https://erdosproblems.com/1086",
    "date": "1971-2017",
    "status": "complete",
    "proofRepoPath": "Proofs/Erdos1086Problem.lean",
    "tags": [
      "erdos",
      "geometry",
      "combinatorics",
      "incidence-geometry",
      "triangles",
      "extremal-combinatorics"
    ],
    "badge": "axiom",
    "sorries": 0,
    "erdosNumber": 1086,
    "erdosUrl": "https://erdosproblems.com/1086",
    "erdosProblemStatus": "open",
    "dateAdded": "2026-01-22",
    "mathlib_version": "4.15.0",
    "mathlibDependencies": [
      {
        "theorem": "EuclideanSpace",
        "description": "Euclidean space ℝ² for point representation",
        "module": "Mathlib.Analysis.InnerProductSpace.EuclideanDist"
      },
      {
        "theorem": "Finset.powersetCard",
        "description": "Subsets of fixed cardinality for triangle enumeration",
        "module": "Mathlib.Data.Finset.Basic"
      },
      {
        "theorem": "Real.log",
        "description": "Natural logarithm for lower bound n² log log n",
        "module": "Mathlib.Analysis.SpecialFunctions.Log.Basic"
      },
      {
        "theorem": "Real.rpow",
        "description": "Real exponentiation for fractional exponents (n^{20/9})",
        "module": "Mathlib.Analysis.SpecialFunctions.Pow.Real"
      }
    ],
    "originalContributions": [
      "Point2D, Triangle, triangleArea definitions using shoelace formula",
      "countTrianglesWithArea via Finset.powersetCard 3 filtering",
      "maxTrianglesWithSameArea and g(n) via sSup",
      "lower_bound_erdos_purdy: n² log log n lower bound",
      "upper_bound_erdos_purdy_1971: original n^{5/2} upper bound",
      "upper_bound_raz_sharir_2017: current best n^{20/9} upper bound",
      "erdos_purdy_conjecture: Θ(n² polylog(n)) typed statement",
      "g_dim axiom for higher-dimensional simplex generalization",
      "g2_is_g relating g_dim 2 2 to g",
      "Higher-dimensional bounds: g_3^2, g_6^2, Purdy g_4^2/g_5^2",
      "oppenheim_lenz_construction lower bound for g_{2k+2}^k",
      "erdos_purdy_conjecture_high_dim: typed upper bound conjecture",
      "incidence_reduction and szemeredi_trotter_bound typed axioms",
      "erdos_1086_statement and erdos_1086_summary genuine theorems"
    ]
  },
  "overview": {
    "historicalContext": "**Erdős Problem #1086: Triangles of Equal Area**\n\nOriginally posed by Oppenheim, this problem asks: given n points in the plane, how many triangles with the same area can they determine? The function g(n) measures this maximum.\n\n**Historical Development:**\n- **Oppenheim:** Posed the original question about equal-area triangles\n- **Erdős-Purdy (1971):** Established the first bounds: n² log log n ≪ g(n) ≪ n^{5/2}\n- **Pach-Sharir (1992):** Improved the upper bound using point-curve incidence techniques\n- **Dumitrescu-Sharir-Tóth (2009):** Further improvements to the upper bound\n- **Apfelbaum-Sharir (2010):** Continued refinements\n- **Raz-Sharir (2017):** Current best upper bound g(n) ≪ n^{20/9}\n\n**Key Connection:** The problem reduces to counting point-curve incidences. For a fixed base edge (A,B), the locus of points C giving a triangle of area α is a pair of parallel lines. The Szemerédi-Trotter incidence theorem is the main tool for upper bounds.",
    "problemStatement": "**Problem Statement (OPEN)**\n\nLet $g(n)$ be the maximum number of triangles with the same area that can be formed from $n$ points in $\\mathbb{R}^2$.\n\n**Known Bounds:**\n- Lower: $n^2 \\log \\log n \\ll g(n)$ (Erdős-Purdy 1971)\n- Upper: $g(n) \\ll n^{20/9}$ (Raz-Sharir 2017)\n- Exponent gap: $2$ vs $20/9 \\approx 2.222$\n\n**Conjecture:** $g(n) = \\Theta(n^2 \\operatorname{polylog}(n))$\n\n**Higher Dimensions:** $g_d^r(n)$ counts $r$-simplices of the same volume from $n$ points in $\\mathbb{R}^d$. The Oppenheim-Lenz construction gives $g_{2k+2}^k(n) \\geq c \\cdot n^{k+1}$.",
    "proofStrategy": "**Formalization Approach**\n\n1. **Geometric Definitions (lines 38-69):**\n   - `Point2D`: points in ℝ² via `EuclideanSpace ℝ (Fin 2)`\n   - `triangleArea`: shoelace formula ½|x_A(y_B-y_C) + ...|\n   - `Triangle`: structure with distinctness proofs\n\n2. **Counting Function g(n) (lines 71-91):**\n   - `countTrianglesWithArea`: filter powersetCard 3 by area\n   - `maxTrianglesWithSameArea`: supremum over areas\n   - `g n`: supremum over all n-point configurations\n\n3. **Known Bounds (lines 93-118):**\n   - Lower: n² log log n (Erdős-Purdy)\n   - Upper: n^{5/2} (1971), n^{20/9} (2017)\n   - Conjecture: Θ(n² polylog(n))\n\n4. **Higher Dimensions (lines 120-161):**\n   - `g_dim d r n`: axiomatized generalization\n   - Bounds for d = 3, 4, 5, 6\n   - Oppenheim-Lenz construction\n\n5. **Incidence Geometry (lines 181-200):**\n   - `incidence_reduction`: triangle counting → point-line incidences\n   - `szemeredi_trotter_bound`: O(n^{2/3}m^{2/3} + n + m)\n\n6. **Summary (lines 202-233):**\n   - `erdos_1086_statement` and `erdos_1086_summary`: genuine theorems",
    "keyInsights": [
      "**Incidence Reduction:** For fixed base edge AB and area α, point C lies on two lines parallel to AB — reducing triangle counting to point-line incidences",
      "**Szemerédi-Trotter Tool:** The ST theorem bounding point-line incidences to O(n^{2/3}m^{2/3} + n + m) is the main technique for upper bounds",
      "**Exponent Gap:** The current gap between exponent 2 (lower) and 20/9 ≈ 2.222 (upper) is the open problem — Erdős-Purdy conjecture the lower bound is closer to the truth",
      "**Grid Construction:** A √n × √n integer grid gives g(n) ≥ n²/8, showing quadratic behavior is achievable",
      "**Higher-Dimensional Richness:** The problem generalizes to simplices in ℝ^d with interesting dimension-dependent phenomena — the critical dimension 2k+2 for k-simplices",
      "**Progressive Upper Bounds:** The upper exponent decreased from 5/2 (1971) to 20/9 (2017) over 46 years, approaching but not reaching the conjectured quadratic"
    ]
  },
  "sections": [
    {
      "id": "definitions",
      "title": "Basic Definitions",
      "summary": "Point2D, triangleArea (shoelace), Triangle structure",
      "startLine": 38,
      "endLine": 69
    },
    {
      "id": "counting",
      "title": "The Function g(n)",
      "summary": "countTrianglesWithArea, maxTrianglesWithSameArea, g definition",
      "startLine": 71,
      "endLine": 91
    },
    {
      "id": "bounds",
      "title": "Known Bounds",
      "summary": "lower_bound_erdos_purdy, upper_bound_erdos_purdy_1971, upper_bound_raz_sharir_2017, erdos_purdy_conjecture",
      "startLine": 93,
      "endLine": 118
    },
    {
      "id": "higher-dim",
      "title": "Higher-Dimensional Generalizations",
      "summary": "g_dim, g2_is_g, bounds for d=3,4,5,6, oppenheim_lenz_construction, erdos_purdy_conjecture_high_dim",
      "startLine": 120,
      "endLine": 161
    },
    {
      "id": "examples",
      "title": "Simple Examples",
      "summary": "three_points_one_triangle, collinear_degenerate, grid_lower_bound",
      "startLine": 163,
      "endLine": 179
    },
    {
      "id": "incidence",
      "title": "Connection to Incidence Geometry",
      "summary": "incidence_reduction, szemeredi_trotter_bound",
      "startLine": 181,
      "endLine": 200
    },
    {
      "id": "main-results",
      "title": "Main Results",
      "summary": "erdos_1086_statement, erdos_1086_gap_open, erdos_1086_summary",
      "startLine": 202,
      "endLine": 233
    }
  ],
  "conclusion": {
    "summary": "Erdős Problem #1086 asks to estimate g(n), the maximum number of equal-area triangles from n points in ℝ². The best bounds are n² log log n ≪ g(n) ≪ n^{20/9} (Erdős-Purdy 1971, Raz-Sharir 2017), with the Erdős-Purdy conjecture predicting Θ(n² polylog(n)). The problem connects to Szemerédi-Trotter incidence geometry and generalizes to higher-dimensional simplices. The formalization includes typed conjectures, incidence-based reductions, and genuine theorems combining the main bounds.",
    "implications": "**Connections to Combinatorial Geometry**\n\n1. **Incidence Geometry:** The problem is fundamentally about point-curve incidences — the Szemerédi-Trotter theorem and its generalizations are the main tools\n\n2. **Erdős Distinct Distances:** Related to the distinct distances problem (Erdős #184) — both concern extremal point configuration geometry\n\n3. **Algebraic Methods:** Recent upper bound improvements use polynomial partitioning (Guth-Katz framework) applied to the incidence formulation\n\n4. **Higher Dimensions:** The dimension 2k+2 threshold for k-simplices reveals a dimension-dependent phase transition in extremal geometry\n\n5. **Grid Extremality:** Integer lattice grids are conjectured to be near-extremal, as in many Erdős-type point configuration problems",
    "openQuestions": [
      "Close the gap between exponents 2 and 20/9 for g(n)",
      "Prove or disprove the Erdős-Purdy conjecture g(n) = Θ(n² polylog(n))",
      "Improve the upper bound below n^{20/9}",
      "Determine exact values of g(n) for small n",
      "Find exact formulas for g_d^r(n) in higher dimensions"
    ]
  }
}

[
  {
    "id": "ann-81-overview",
    "proofId": "erdos-81",
    "range": { "startLine": 1, "endLine": 35 },
    "type": "concept",
    "title": "Problem Overview",
    "content": "**Erdős Problem #81: Clique Partitions of Chordal Graphs**\n\n**Question:** For a chordal graph $G$ on $n$ vertices, can its edges be partitioned into $n^2/6 + O(n)$ cliques?\n\n**Status:** OPEN\n\n**Gap:** Current bounds are $(1/4 - \\varepsilon)n^2$ (upper) vs $n^2/6$ (lower).",
    "mathContext": "The problem sits at the intersection of structural graph theory and extremal combinatorics. Chordal graphs generalize trees and complete graphs; they are exactly the graphs with perfect elimination orderings. The clique partition problem is related to intersection number and chromatic number of the complement.",
    "relatedConcepts": ["Chordal graphs", "Clique partitions", "Split graphs", "Perfect elimination ordering", "Intersection number"],
    "significance": "critical"
  },
  {
    "id": "ann-81-induced-cycle",
    "proofId": "erdos-81",
    "range": { "startLine": 57, "endLine": 62 },
    "type": "definition",
    "title": "Induced Cycle",
    "content": "`hasInducedCycleOfLength G k` defines an induced cycle of length $k$ as an injective map $\\text{Fin}\\,k \\to V$ where consecutive vertices are adjacent and non-consecutive vertices are non-adjacent. The modular arithmetic in the non-adjacency condition handles the cyclic structure.",
    "mathContext": "An induced cycle (or hole) of length $k \\geq 4$ is the obstruction to being chordal. The condition requires both injectivity (distinct vertices) and that the only adjacencies are consecutive edges — no 'chords' exist. This is strictly stronger than containing a cycle as a subgraph.",
    "relatedConcepts": ["Function.Injective", "Fin", "SimpleGraph.Adj", "induced subgraph"],
    "significance": "key"
  },
  {
    "id": "ann-81-chordal",
    "proofId": "erdos-81",
    "range": { "startLine": 69, "endLine": 70 },
    "type": "definition",
    "title": "Chordal Graph",
    "content": "`IsChordal G` states that $G$ has no induced cycles of length $\\geq 4$. Equivalently, every cycle of length $\\geq 4$ has a chord (an edge between non-adjacent cycle vertices).\n\n**Examples:** Trees (no cycles), complete graphs, and interval graphs are all chordal. Cycles $C_k$ for $k \\geq 4$ are NOT chordal.",
    "mathContext": "Chordal graphs form a well-studied class in structural graph theory. Key properties: they are perfect graphs (Berge's weak perfect graph theorem), they have clique trees, and they are exactly the intersection graphs of subtrees of a tree. Recognition is polynomial via the perfect elimination ordering.",
    "relatedConcepts": ["hasInducedCycleOfLength", "Perfect graphs", "Interval graphs", "Clique tree"],
    "significance": "critical"
  },
  {
    "id": "ann-81-clique-partition",
    "proofId": "erdos-81",
    "range": { "startLine": 83, "endLine": 88 },
    "type": "definition",
    "title": "Clique Partition Structure",
    "content": "`CliquePartition G` bundles a finite set of cliques with proofs that: (1) each set is a valid clique, (2) every edge is covered, and (3) each edge belongs to exactly one clique (`∃!` uniqueness). The `cliquePartitionNumber` (line 93) is the minimum over all such partitions.",
    "mathContext": "The clique partition number $\\overline{\\chi}(G)$ equals the chromatic number of the complement: $\\overline{\\chi}(G) = \\chi(\\overline{G})$. For chordal graphs, $\\overline{G}$ is co-chordal, and the relationship to perfect graph theory is central. The `Nat.find` construction ensures the minimum exists by providing a trivial upper bound of $|V|^2$.",
    "relatedConcepts": ["Finset", "ExistsUnique", "Nat.find", "chromatic number", "complement graph"],
    "significance": "critical"
  },
  {
    "id": "ann-81-split-graph",
    "proofId": "erdos-81",
    "range": { "startLine": 107, "endLine": 113 },
    "type": "definition",
    "title": "Split Graph",
    "content": "`IsSplitGraph G` states that the vertex set partitions into $K$ (a clique — all pairwise adjacent) and $I$ (an independent set — no edges within). The conditions require disjointness ($K \\cap I = \\emptyset$) and completeness ($K \\cup I = V$).\n\nSplit graphs are chordal (line 118), and the extremal construction for Problem #81 is a split graph.",
    "mathContext": "Split graphs were introduced by Földes and Hammer (1977). They are exactly the graphs where both $G$ and $\\overline{G}$ are chordal. A graph is split if and only if it has no induced $2K_2$, $C_4$, or $C_5$. The Erdős-Ko-Rado theorem and Turán-type problems often involve split-like structures.",
    "relatedConcepts": ["IsClique", "Disjoint", "Finset.univ", "Földes-Hammer characterization"],
    "significance": "critical"
  },
  {
    "id": "ann-81-split-chordal",
    "proofId": "erdos-81",
    "range": { "startLine": 118, "endLine": 118 },
    "type": "axiom",
    "title": "Split Implies Chordal",
    "content": "`split_is_chordal`: Every split graph is chordal. Axiomatized because the proof requires showing that the bipartition $K \\cup I$ prevents any induced cycle of length $\\geq 4$.",
    "mathContext": "In a split graph with clique $K$ and independent set $I$, any cycle must alternate between $K$ and $I$. But consecutive vertices in a cycle must be adjacent, and no two vertices in $I$ are adjacent, so at most two consecutive cycle vertices can be in $I$. This forces any cycle of length $\\geq 4$ to have a chord through $K$.",
    "relatedConcepts": ["IsSplitGraph", "IsChordal", "bipartition"],
    "significance": "supporting"
  },
  {
    "id": "ann-81-extremal",
    "proofId": "erdos-81",
    "range": { "startLine": 129, "endLine": 147 },
    "type": "theorem",
    "title": "Extremal Construction and Lower Bound",
    "content": "`extremal_construction_exists` (axiom): For $n \\geq 3$, there exists a split graph on $n$ vertices requiring $\\geq n^2/6$ cliques.\n\n`lower_bound` (theorem, line 140): Derives the chordal lower bound from the split graph construction by applying `split_is_chordal`. This is a genuine theorem — the proof extracts the split graph, converts it to chordal, and preserves the partition bound.",
    "mathContext": "The construction takes $K_{n/3}$ and $2n/3$ isolated vertices, connecting all pairs. The bipartite edges between $K_{n/3}$ and the independent set form $(n/3)(2n/3) = 2n^2/9$ edges. Each clique in a partition can cover at most one edge from each 'star' centered at an isolated vertex, leading to $\\geq n^2/6$ cliques. The proof at line 144–147 is a clean application of `split_is_chordal`.",
    "relatedConcepts": ["extremal_construction_exists", "split_is_chordal", "cliquePartitionNumber", "complete bipartite graph"],
    "significance": "critical"
  },
  {
    "id": "ann-81-eoz",
    "proofId": "erdos-81",
    "range": { "startLine": 158, "endLine": 159 },
    "type": "axiom",
    "title": "Erdős-Ordman-Zalcstein Upper Bound",
    "content": "`erdos_ordman_zalcstein` (1993): Every chordal graph on $n$ vertices has a clique partition with $\\leq (1/4 - \\varepsilon)n^2$ cliques for some $\\varepsilon > 0$.\n\n**Gap:** $1/4 \\approx 0.25$ vs $1/6 \\approx 0.167$ (factor $\\approx 1.5$).",
    "mathContext": "The bound improves on the trivial $\\binom{n}{2}$ by exploiting the chordal structure. The small $\\varepsilon$ represents a modest improvement over $n^2/4$. The proof uses the perfect elimination ordering to group edges efficiently, but the greedy approach alone gives only $(1/4)n^2$ — the $\\varepsilon$ improvement requires a more refined analysis.",
    "relatedConcepts": ["IsChordal", "cliquePartitionNumber", "perfect elimination ordering"],
    "significance": "critical"
  },
  {
    "id": "ann-81-ceo",
    "proofId": "erdos-81",
    "range": { "startLine": 166, "endLine": 167 },
    "type": "axiom",
    "title": "Chen-Erdős-Ordman Split Graph Bound",
    "content": "`chen_erdos_ordman_split` (1994): Every split graph on $n$ vertices needs $\\leq 3n^2/16 + O(n)$ cliques.\n\n**Note:** $3/16 = 0.1875$, between $1/6 \\approx 0.167$ (conjectured) and $1/4 \\approx 0.25$ (general chordal). This is already close to optimal for the extremal split graph case.",
    "mathContext": "For a split graph with clique $K$ of size $k$ and independent set $I$ of size $n-k$, the clique partition number depends on $k$. The bound $3n^2/16$ is optimized at $k = n/4$: the $\\binom{k}{2}$ edges within $K$ need $O(k)$ cliques (from a clique cover of $K_{k}$), and the $k(n-k)$ bipartite edges need careful grouping.",
    "relatedConcepts": ["IsSplitGraph", "cliquePartitionNumber", "bipartite edges"],
    "significance": "key"
  },
  {
    "id": "ann-81-conjecture",
    "proofId": "erdos-81",
    "range": { "startLine": 178, "endLine": 181 },
    "type": "definition",
    "title": "The Erdős-81 Conjecture",
    "content": "`erdos_81_conjecture` states that every chordal graph on $n$ vertices has a clique partition with $\\leq n^2/6 + n$ cliques. Defined as a `Prop` (not axiom), so it can be referenced without assuming it.",
    "mathContext": "The conjecture asserts that the extremal split graph construction is essentially tight — no chordal graph requires significantly more than $n^2/6$ cliques. The linear term $+n$ absorbs boundary effects. If true, this would mean the leading coefficient is exactly $1/6$, matching the lower bound.",
    "relatedConcepts": ["erdos_81_conjecture", "IsChordal", "cliquePartitionNumber"],
    "significance": "critical"
  },
  {
    "id": "ann-81-gap-open",
    "proofId": "erdos-81",
    "range": { "startLine": 190, "endLine": 192 },
    "type": "axiom",
    "title": "Gap Status: OPEN",
    "content": "`erdos_81_gap_open` asserts two facts: (1) the rational inequality $1/4 > 1/6$ (the gap exists), and (2) the conjecture `erdos_81_conjecture` is false (i.e., the problem remains unresolved — no proof of the conjecture exists).",
    "mathContext": "This axiom encodes the current state of knowledge. The first conjunct is a trivial arithmetic fact. The second conjunct, $\\neg$`erdos_81_conjecture`, is a modeling choice: since the conjecture is open, we cannot assume it true. In a formal sense, axiomatizing its negation prevents the proof from being trivialized. If the conjecture is eventually proved, this axiom would need to be removed.",
    "relatedConcepts": ["erdos_81_conjecture", "Rational arithmetic", "open problem status"],
    "significance": "key"
  },
  {
    "id": "ann-81-gap-analysis",
    "proofId": "erdos-81",
    "range": { "startLine": 205, "endLine": 206 },
    "type": "theorem",
    "title": "Gap Analysis",
    "content": "`gap_analysis`: The rational inequality $(1 : \\mathbb{Q})/4 > 1/6$, proved by `norm_num`. This quantifies the gap between the upper bound coefficient $1/4$ and the conjectured coefficient $1/6$.",
    "mathContext": "The gap factor is $\\frac{1/4}{1/6} = 3/2$, meaning the current upper bound allows up to 50% more cliques than conjectured. Closing this gap — either by improving the upper bound or finding a counterexample to the conjecture — is the core open question.",
    "relatedConcepts": ["Rat", "norm_num", "gap analysis"],
    "significance": "supporting"
  },
  {
    "id": "ann-81-split-extremal",
    "proofId": "erdos-81",
    "range": { "startLine": 212, "endLine": 216 },
    "type": "axiom",
    "title": "Split Graphs as Extremal Case",
    "content": "`split_graphs_extremal`: If the conjecture is true, then split graphs also satisfy the $n^2/6 + O(n)$ bound. This is a logical consequence — split graphs are chordal, so the conjecture implies the bound for them.",
    "mathContext": "This axiom is logically redundant (it follows from the conjecture and `split_is_chordal`), but it highlights the structural insight: the extremal construction is a split graph, and split graphs may be the 'hardest' case. If a proof of the conjecture proceeds by first handling split graphs, this would be a natural intermediate step.",
    "relatedConcepts": ["erdos_81_conjecture", "IsSplitGraph", "IsChordal"],
    "significance": "supporting"
  },
  {
    "id": "ann-81-simplicial",
    "proofId": "erdos-81",
    "range": { "startLine": 229, "endLine": 230 },
    "type": "definition",
    "title": "Simplicial Vertex",
    "content": "`IsSimplicial G v` states that for vertex $v$, all pairs of neighbors are adjacent — i.e., the neighborhood $N(v)$ forms a clique.",
    "mathContext": "Simplicial vertices are the building blocks of perfect elimination orderings. In a chordal graph, there is always at least one simplicial vertex (Dirac 1961). Removing a simplicial vertex preserves chordality, giving the inductive structure that characterizes chordal graphs. The simplicial vertex and its neighbors form a maximal clique.",
    "relatedConcepts": ["SimpleGraph.Adj", "clique", "perfect elimination ordering", "Dirac's theorem"],
    "significance": "key"
  },
  {
    "id": "ann-81-peo",
    "proofId": "erdos-81",
    "range": { "startLine": 237, "endLine": 247 },
    "type": "definition",
    "title": "Perfect Elimination Ordering and Characterization",
    "content": "`HasPerfectEliminationOrdering G` states that there exists a bijection $\\sigma : \\text{Fin}\\,|V| \\to V$ such that each $\\sigma(i)$ is simplicial in the subgraph induced by $\\{\\sigma(j) : j \\geq i\\}$.\n\n`chordal_iff_peo` (line 246): A graph is chordal if and only if it has a PEO. This is the Fulkerson-Gross theorem (1965).",
    "mathContext": "The PEO characterization is computationally powerful: Lexicographic Breadth-First Search (Lex-BFS) produces a PEO in $O(n+m)$ time for chordal graphs. The PEO also gives the clique tree structure and allows computing the clique number, chromatic number, and maximum independent set in polynomial time — all NP-hard on general graphs.",
    "relatedConcepts": ["Function.Bijective", "Fintype.card", "SimpleGraph.induce", "Lex-BFS", "Fulkerson-Gross theorem"],
    "significance": "key"
  },
  {
    "id": "ann-81-peo-partition",
    "proofId": "erdos-81",
    "range": { "startLine": 259, "endLine": 261 },
    "type": "axiom",
    "title": "PEO-Based 2-Approximation",
    "content": "`peo_gives_clique_partition`: For a chordal graph, the PEO-based greedy algorithm produces a clique partition with $\\leq 2 \\cdot \\overline{\\chi}(G)$ cliques, where $\\overline{\\chi}(G)$ is the optimal clique partition number.",
    "mathContext": "The greedy algorithm processes vertices in PEO order, assigning each vertex's neighborhood clique as a partition element. This can create at most twice the optimal number of cliques because each edge might be 'wasted' (assigned to a clique that could have been merged). The factor of 2 is the best known approximation ratio for this approach.",
    "relatedConcepts": ["CliquePartition", "cliquePartitionNumber", "approximation algorithm"],
    "significance": "key"
  },
  {
    "id": "ann-81-optimal-partition",
    "proofId": "erdos-81",
    "range": { "startLine": 269, "endLine": 272 },
    "type": "axiom",
    "title": "Existence of Optimal Partition",
    "content": "`optimal_partition_open`: For every chordal graph, there exists a clique partition achieving the minimum size. This is the existence assertion for the optimization problem.",
    "mathContext": "While the existence of an optimal partition follows from finiteness (finitely many possible partitions), the algorithmic question of finding it efficiently remains open. The NP-hardness of minimum clique partition for general graphs does not immediately apply to chordal graphs due to their special structure.",
    "relatedConcepts": ["CliquePartition", "cliquePartitionNumber", "NP-hardness", "chordal recognition"],
    "significance": "supporting"
  },
  {
    "id": "ann-81-intersection",
    "proofId": "erdos-81",
    "range": { "startLine": 283, "endLine": 296 },
    "type": "definition",
    "title": "Intersection Number and Relation",
    "content": "`intersectionNumber G` is the minimum number of cliques whose edges cover all of $G$'s edges (cliques may overlap). `partition_geq_intersection` (line 295): the clique partition number $\\geq$ the intersection number, since partition is more restrictive than cover.",
    "mathContext": "The intersection number $\\theta(G)$ equals the clique cover number of $G$, which by König-type duality relates to the maximum matching in the edge-clique incidence structure. For chordal graphs, $\\theta(G) \\leq \\overline{\\chi}(G)$ with equality in some cases. The gap between cover and partition can be significant for non-chordal graphs.",
    "relatedConcepts": ["Nat.find", "IsClique", "cliquePartitionNumber", "clique cover", "edge cover"],
    "significance": "supporting"
  },
  {
    "id": "ann-81-summary",
    "proofId": "erdos-81",
    "range": { "startLine": 309, "endLine": 317 },
    "type": "theorem",
    "title": "Summary Theorem",
    "content": "`erdos_81_summary` is a **genuine theorem** for $n \\geq 3$: combines (1) the lower bound — some chordal graph on $n$ vertices needs $\\geq n^2/6$ cliques — with (2) the gap $1/4 > 1/6$. The proof applies `lower_bound` and `norm_num`.",
    "mathContext": "The proof uses the anonymous constructor $\\langle\\ldots, \\ldots\\rangle$ to combine the existential lower bound (from the `lower_bound` theorem, which itself uses `extremal_construction_exists` and `split_is_chordal`) with the arithmetic gap fact. The `by norm_num` tactic handles the rational arithmetic.",
    "relatedConcepts": ["lower_bound", "norm_num", "And.intro", "existential quantification"],
    "significance": "critical"
  },
  {
    "id": "ann-81-main",
    "proofId": "erdos-81",
    "range": { "startLine": 325, "endLine": 333 },
    "type": "theorem",
    "title": "Main Theorem",
    "content": "`erdos_81` is a **genuine theorem**: for any chordal graph $G$, combines (1) the Erdős-Ordman-Zalcstein upper bound $(1/4 - \\varepsilon)n^2$ with (2) the PEO-based 2-approximation. The proof directly applies both axiomatized results.",
    "mathContext": "The proof uses the anonymous constructor to pair the two results: `erdos_ordman_zalcstein G hChordal` (the upper bound) and `peo_gives_clique_partition G hChordal` (the algorithmic result). Both require the chordality hypothesis `hChordal`, which is passed directly. This theorem captures what is known constructively about any given chordal graph.",
    "relatedConcepts": ["erdos_ordman_zalcstein", "peo_gives_clique_partition", "IsChordal", "And.intro"],
    "significance": "critical"
  }
]

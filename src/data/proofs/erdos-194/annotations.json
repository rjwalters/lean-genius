[
  {
    "id": "ann-e194-header",
    "proofId": "erdos-194",
    "range": { "startLine": 1, "endLine": 28 },
    "type": "concept",
    "title": "Problem Overview",
    "content": "**Erdos Problem #194: Chaotic Orderings**\n\nThis problem asks: Must any ordering (enumeration) of the real numbers contain a monotone k-term arithmetic progression?\n\n**Answer: NO**\n\nEven for k = 3, Ardal, Brown, and Jungic (2011) showed that \"chaotic orderings\" exist - enumerations of Q (and R) that contain no monotone 3-term AP.\n\n**What is a monotone AP?**\nThree numbers x < y < z form an AP if y - x = z - y. It's monotone in an enumeration if the indices also increase (or decrease) together.",
    "mathContext": "This problem connects combinatorics, order theory, and Ramsey theory. The surprising result is that dense sets can be enumerated to avoid natural patterns.",
    "significance": "critical",
    "relatedConcepts": ["Arithmetic progressions", "Orderings", "Ramsey theory"]
  },
  {
    "id": "ann-e194-ap-def",
    "proofId": "erdos-194",
    "range": { "startLine": 45, "endLine": 51 },
    "type": "definition",
    "title": "Arithmetic Progression (3-term)",
    "content": "**isArithmeticProgression3(x, y, z):**\n\nThree real numbers form an arithmetic progression if the middle term is the average of the other two.\n\n**Definition:**\n```lean\ndef isArithmeticProgression3 (x y z : R) : Prop :=\n  y - x = z - y\n```\n\n**Examples:**\n- 1, 2, 3 form an AP (2-1 = 3-2 = 1)\n- 3, 7, 11 form an AP (7-3 = 11-7 = 4)\n- 1, 2, 4 do NOT form an AP (2-1 != 4-2)",
    "significance": "critical",
    "relatedConcepts": ["Arithmetic sequences", "Common difference"]
  },
  {
    "id": "ann-e194-ap-equiv",
    "proofId": "erdos-194",
    "range": { "startLine": 53, "endLine": 64 },
    "type": "theorem",
    "title": "AP Characterization",
    "content": "**ap3_iff_avg:**\n\nx, y, z form an AP if and only if 2y = x + z.\n\n**Proof:**\nFrom y - x = z - y, adding y to both sides gives 2y - x = z, hence 2y = x + z.\n\nThis equivalent form is often easier to check computationally.",
    "significance": "supporting",
    "relatedConcepts": ["Arithmetic mean"]
  },
  {
    "id": "ann-e194-increasing-ap",
    "proofId": "erdos-194",
    "range": { "startLine": 66, "endLine": 78 },
    "type": "definition",
    "title": "Increasing and Decreasing APs",
    "content": "**isIncreasingAP3(x, y, z):**\nAn AP where x < y < z (values strictly increase).\n\n**isDecreasingAP3(x, y, z):**\nAn AP where x > y > z (values strictly decrease).\n\n**Note:** These are the \"natural\" orderings of an AP. The problem asks about the relationship between this value ordering and the enumeration ordering.",
    "significance": "key",
    "relatedConcepts": ["Ordering", "Monotonicity"]
  },
  {
    "id": "ann-e194-enumeration",
    "proofId": "erdos-194",
    "range": { "startLine": 86, "endLine": 94 },
    "type": "definition",
    "title": "Enumeration Structure",
    "content": "**Enumeration(S):**\n\nAn enumeration of a subset S of R is represented as a structure with:\n- A function toFun : N -> R that assigns each natural number to a real\n- A proof that all values are in S\n- A proof that the function is injective (no repeats)\n\n```lean\nstructure Enumeration (S : Set R) where\n  toFun : N -> R\n  mem : forall n, toFun n in S\n  inj : Function.Injective toFun\n```\n\nThis captures the idea of \"listing\" elements in a specific order.",
    "mathContext": "Enumerations are bijections from N to countable sets. For uncountable sets like R, we work with countable subsets.",
    "significance": "critical",
    "relatedConcepts": ["Bijections", "Countability"]
  },
  {
    "id": "ann-e194-monotone-inc-ap",
    "proofId": "erdos-194",
    "range": { "startLine": 110, "endLine": 120 },
    "type": "definition",
    "title": "Monotone Increasing AP in Enumeration",
    "content": "**hasMonotoneIncreasingAP3(e):**\n\nAn enumeration e has a monotone increasing AP if there exist indices i < j < k such that:\n- The values e(i) < e(j) < e(k) form an increasing sequence\n- These same values form an arithmetic progression\n\n```lean\ndef hasMonotoneIncreasingAP3 (e : Enumeration S) : Prop :=\n  exists i j k, i < j and j < k and\n    isIncreasingAP3 (e.toFun i) (e.toFun j) (e.toFun k)\n```\n\n**Key Point:** Both the index order AND the value order must be increasing.",
    "significance": "critical",
    "relatedConcepts": ["Monotonicity", "Index ordering"]
  },
  {
    "id": "ann-e194-monotone-dec-ap",
    "proofId": "erdos-194",
    "range": { "startLine": 122, "endLine": 132 },
    "type": "definition",
    "title": "Monotone Decreasing AP in Enumeration",
    "content": "**hasMonotoneDecreasingAP3(e):**\n\nAn enumeration e has a monotone decreasing AP if there exist indices i < j < k such that:\n- The values e(i) > e(j) > e(k) form a decreasing sequence\n- These same values form an arithmetic progression\n\n**Note:** The indices still increase (i < j < k), but the values decrease. This captures \"seeing a decreasing AP as you traverse the enumeration.\"",
    "significance": "key",
    "relatedConcepts": ["Decreasing sequences"]
  },
  {
    "id": "ann-e194-chaotic",
    "proofId": "erdos-194",
    "range": { "startLine": 148, "endLine": 153 },
    "type": "definition",
    "title": "Chaotic Ordering",
    "content": "**isChaotic(e):**\n\nAn enumeration is chaotic if it contains NO monotone 3-term arithmetic progression of either kind.\n\n```lean\ndef isChaotic (e : Enumeration S) : Prop :=\n  not(hasMonotoneAP3 e)\n```\n\n**The Name:** \"Chaotic\" captures the idea that the ordering is so scrambled that natural patterns (APs) never align with the enumeration order.",
    "significance": "critical",
    "relatedConcepts": ["Pattern avoidance", "Scrambling"]
  },
  {
    "id": "ann-e194-main-axiom",
    "proofId": "erdos-194",
    "range": { "startLine": 155, "endLine": 161 },
    "type": "axiom",
    "title": "Chaotic Ordering Exists for Rationals",
    "content": "**chaotic_ordering_rationals:**\n\nThere exists an enumeration of the rationals Q (embedded in R) that is chaotic.\n\n```lean\naxiom chaotic_ordering_rationals :\n  exists e : Enumeration {x : R | exists q : Q, x = q}, isChaotic e\n```\n\n**This is the main result** of Ardal, Brown, and Jungic (2011). The construction uses base-3 digit patterns.",
    "mathContext": "The proof is constructive but intricate, involving ternary representations and careful ordering to break all potential APs.",
    "significance": "critical",
    "relatedConcepts": ["Constructive proof", "Base-3 representation"]
  },
  {
    "id": "ann-e194-main-theorem",
    "proofId": "erdos-194",
    "range": { "startLine": 179, "endLine": 186 },
    "type": "theorem",
    "title": "Erdos Problem #194: Main Result",
    "content": "**erdos_194:**\n\nThere exists an infinite set S and an enumeration of S that is chaotic.\n\n```lean\ntheorem erdos_194 :\n    exists S : Set R, S.Infinite and exists e : Enumeration S, isChaotic e\n```\n\n**Answer to Erdos:** The question asked \"must any ordering contain a monotone AP?\" This proves the answer is NO.",
    "significance": "critical",
    "relatedConcepts": ["Counterexample", "Existence proof"]
  },
  {
    "id": "ann-e194-natural-ordering",
    "proofId": "erdos-194",
    "range": { "startLine": 188, "endLine": 194 },
    "type": "axiom",
    "title": "Natural Ordering Has APs",
    "content": "**natural_ordering_has_AP:**\n\nIf an enumeration is order-preserving (n < m implies e(n) < e(m)), then it DOES have monotone APs.\n\n**Intuition:** The \"natural\" way to list rationals (by size) trivially has monotone APs - any three rationals in increasing order that happen to form an AP will also have increasing indices.\n\nSo chaotic orderings must be quite \"unnatural\" - they scramble the order relationship.",
    "significance": "key",
    "relatedConcepts": ["Order-preserving", "Trivial APs"]
  },
  {
    "id": "ann-e194-construction",
    "proofId": "erdos-194",
    "range": { "startLine": 202, "endLine": 219 },
    "type": "axiom",
    "title": "Construction Uses Base-3",
    "content": "**construction_uses_base3:**\n\nThe chaotic ordering is constructed using base-3 (ternary) representations.\n\n**Idea:**\n1. Write each rational in base 3\n2. Define an ordering based on comparing digit patterns\n3. The specific comparison rule is designed to break AP patterns\n\n**Why it works:**\nIf x < y < z form an AP (y = (x+z)/2), their ternary representations have a specific relationship. The ordering is designed so that this relationship never corresponds to ordered indices.\n\nThe full construction is quite technical and beyond simple formalization.",
    "mathContext": "Base-3 is key because it relates to the \"middle\" property of APs (y is the average).",
    "significance": "key",
    "relatedConcepts": ["Ternary representation", "Digit patterns"]
  },
  {
    "id": "ann-e194-k-term",
    "proofId": "erdos-194",
    "range": { "startLine": 225, "endLine": 235 },
    "type": "axiom",
    "title": "Extension to k-term APs",
    "content": "**chaotic_ordering_k_term:**\n\nThe construction works for ANY k >= 3, not just k = 3.\n\nThere exist orderings of Q that avoid monotone k-term APs for any k.\n\n**Significance:** The k = 3 case is not special - the construction is robust enough to avoid longer progressions as well.",
    "significance": "key",
    "relatedConcepts": ["Generalization", "k-term progressions"]
  },
  {
    "id": "ann-e194-summary",
    "proofId": "erdos-194",
    "range": { "startLine": 289, "endLine": 299 },
    "type": "theorem",
    "title": "Summary Theorem",
    "content": "**erdos_194_summary:**\n\nCombines the main results:\n1. Chaotic orderings exist for infinite sets\n2. The construction extends to all k >= 3\n\n**Historical Note:** This result disproves the natural conjecture that any enumeration of a dense set must contain monotone APs. The construction is counterintuitive and elegant.",
    "significance": "key",
    "relatedConcepts": ["Summary", "Completeness"]
  },
  {
    "id": "ann-e194-answer",
    "proofId": "erdos-194",
    "range": { "startLine": 301, "endLine": 309 },
    "type": "theorem",
    "title": "The Answer: Disproof",
    "content": "**erdos_194_answer:**\n\nExplicitly states that the conjecture is FALSE.\n\n```lean\ntheorem erdos_194_answer : \n    not(forall (S : Set R) (e : Enumeration S), S.Infinite -> hasMonotoneAP3 e)\n```\n\n**Proof:** By contradiction using the existence of chaotic orderings.\n\nThis is the formal disproof of the original Erdos question.",
    "significance": "critical",
    "relatedConcepts": ["Disproof", "Counterexample"]
  }
]

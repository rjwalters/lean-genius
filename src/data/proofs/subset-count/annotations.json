[
  {
    "id": "ann-intro",
    "proofId": "subset-count",
    "range": { "startLine": 1, "endLine": 42 },
    "type": "concept",
    "title": "Counting Subsets",
    "content": "The number of subsets of an n-element set is exactly $2^n$:\n\n$$|S| = n \\implies |\\mathcal{P}(S)| = 2^n$$\n\n**Why 2^n?**\n- Each element is either IN or OUT of a subset\n- That's 2 choices per element\n- With n elements: $2 \\times 2 \\times \\cdots \\times 2 = 2^n$\n\nThis is Wiedijk's 100 Theorems #52.",
    "significance": "critical",
    "relatedConcepts": ["power set", "combinatorics", "binary counting"]
  },
  {
    "id": "ann-main-theorem",
    "proofId": "subset-count",
    "range": { "startLine": 44, "endLine": 52 },
    "type": "theorem",
    "title": "Main Theorem",
    "content": "**The Number of Subsets Theorem**:\n\n```\ntheorem card_powerset_eq_two_pow (s : Finset a) :\n    s.powerset.card = 2 ^ s.card\n```\n\nThis follows directly from Mathlib's `Finset.card_powerset`.\n\nThe proof in Mathlib uses induction: an empty set has 1 subset, and adding an element doubles the count (each existing subset can include or exclude the new element).",
    "mathContext": "$|\\mathcal{P}(S)| = 2^{|S|}$",
    "significance": "critical",
    "relatedConcepts": ["Finset", "powerset", "cardinality"]
  },
  {
    "id": "ann-binary-bijection",
    "proofId": "subset-count",
    "range": { "startLine": 59, "endLine": 74 },
    "type": "concept",
    "title": "Binary String Bijection",
    "content": "Subsets correspond to binary strings:\n\n| Subset of {1,2,3} | Binary | Decimal |\n|-------------------|--------|--------|\n| {}                | 000    | 0      |\n| {1}               | 100    | 1      |\n| {2}               | 010    | 2      |\n| {1,2}             | 110    | 3      |\n| {3}               | 001    | 4      |\n| {1,3}             | 101    | 5      |\n| {2,3}             | 011    | 6      |\n| {1,2,3}           | 111    | 7      |\n\nThis gives exactly $2^3 = 8$ subsets, numbered 0-7.",
    "mathContext": "Subsets $\\leftrightarrow$ binary strings",
    "significance": "key",
    "relatedConcepts": ["characteristic function", "binary representation", "bijection"]
  },
  {
    "id": "ann-empty-set",
    "proofId": "subset-count",
    "range": { "startLine": 78, "endLine": 80 },
    "type": "example",
    "title": "Example: Empty Set",
    "content": "The empty set has exactly **1 subset**: itself.\n\n$$|\\mathcal{P}(\\emptyset)| = 2^0 = 1$$\n\nThis is the base case for inductive proofs about powersets.",
    "mathContext": "$\\mathcal{P}(\\emptyset) = \\{\\emptyset\\}$",
    "significance": "supporting",
    "relatedConcepts": ["empty set", "base case"]
  },
  {
    "id": "ann-singleton",
    "proofId": "subset-count",
    "range": { "startLine": 82, "endLine": 84 },
    "type": "example",
    "title": "Example: Singleton",
    "content": "A singleton set $\\{a\\}$ has exactly **2 subsets**: $\\{\\}$ and $\\{a\\}$.\n\n$$|\\mathcal{P}(\\{a\\})| = 2^1 = 2$$\n\nEither the element is in the subset, or it isn't.",
    "mathContext": "$\\mathcal{P}(\\{a\\}) = \\{\\emptyset, \\{a\\}\\}$",
    "significance": "supporting",
    "relatedConcepts": ["singleton", "binary choice"]
  },
  {
    "id": "ann-three-elements",
    "proofId": "subset-count",
    "range": { "startLine": 86, "endLine": 87 },
    "type": "example",
    "title": "Example: Three Elements",
    "content": "The set $\\{1, 2, 3\\}$ has **8 subsets**:\n\n$$\\{\\}, \\{1\\}, \\{2\\}, \\{3\\}, \\{1,2\\}, \\{1,3\\}, \\{2,3\\}, \\{1,2,3\\}$$\n\n$$|\\mathcal{P}(\\{1,2,3\\})| = 2^3 = 8$$",
    "mathContext": "$2^3 = 8$",
    "significance": "supporting",
    "relatedConcepts": ["enumeration", "verification"]
  },
  {
    "id": "ann-doubling",
    "proofId": "subset-count",
    "range": { "startLine": 112, "endLine": 118 },
    "type": "lemma",
    "title": "Adding an Element Doubles Subsets",
    "content": "When you add a new element to a set, the number of subsets **doubles**:\n\n$$|\\mathcal{P}(S \\cup \\{a\\})| = 2 \\cdot |\\mathcal{P}(S)|$$\n\n**Why?** Each subset of $S$ gives rise to two subsets of $S \\cup \\{a\\}$:\n1. The original subset (not containing $a$)\n2. The original subset plus $a$\n\nThis is the key insight for the inductive proof.",
    "mathContext": "Adding one element: $2^n \\to 2^{n+1}$",
    "significance": "key",
    "relatedConcepts": ["induction", "recursive counting"]
  },
  {
    "id": "ann-binomial",
    "proofId": "subset-count",
    "range": { "startLine": 120, "endLine": 133 },
    "type": "theorem",
    "title": "Sum of Binomial Coefficients",
    "content": "The subsets of an n-element set can be partitioned by size:\n- 0-element subsets: $\\binom{n}{0}$\n- 1-element subsets: $\\binom{n}{1}$\n- ...\n- n-element subsets: $\\binom{n}{n}$\n\nSumming all sizes:\n$$\\sum_{k=0}^{n} \\binom{n}{k} = 2^n$$\n\nThis is a special case of the binomial theorem with $x = y = 1$.",
    "mathContext": "$\\sum \\binom{n}{k} = 2^n$",
    "significance": "key",
    "relatedConcepts": ["binomial coefficients", "binomial theorem", "Pascal's triangle"]
  },
  {
    "id": "ann-fintype",
    "proofId": "subset-count",
    "range": { "startLine": 135, "endLine": 142 },
    "type": "theorem",
    "title": "Fintype Formulation",
    "content": "For a type with finitely many elements (a `Fintype`), the total number of finite subsets is $2^n$:\n\n```\ntheorem fintype_card_finset (a : Type*) [Fintype a] :\n    Fintype.card (Finset a) = 2 ^ Fintype.card a\n```\n\nThis provides a type-theoretic view of the same result.",
    "mathContext": "Type-level subset counting",
    "significance": "supporting",
    "relatedConcepts": ["Fintype", "type theory", "cardinality"]
  },
  {
    "id": "ann-powerset-properties",
    "proofId": "subset-count",
    "range": { "startLine": 93, "endLine": 101 },
    "type": "lemma",
    "title": "Powerset Membership",
    "content": "Two key facts about powersets:\n\n1. **Empty set**: $\\emptyset \\in \\mathcal{P}(S)$ for any set $S$\n2. **Self-membership**: $S \\in \\mathcal{P}(S)$\n\nThe characterization is: $T \\in \\mathcal{P}(S) \\iff T \\subseteq S$",
    "mathContext": "$T \\in \\mathcal{P}(S) \\iff T \\subseteq S$",
    "significance": "supporting",
    "relatedConcepts": ["subset relation", "membership"]
  },
  {
    "id": "ann-nonempty",
    "proofId": "subset-count",
    "range": { "startLine": 103, "endLine": 110 },
    "type": "lemma",
    "title": "Powerset is Never Empty",
    "content": "The powerset of any set is **never empty**:\n- It always contains at least $\\emptyset$\n- Therefore $|\\mathcal{P}(S)| \\geq 1$\n- In fact, $|\\mathcal{P}(S)| = 2^{|S|} \\geq 2^0 = 1$\n\nThis means subset counting always gives a positive result.",
    "mathContext": "$|\\mathcal{P}(S)| > 0$",
    "significance": "supporting",
    "relatedConcepts": ["nonempty sets", "lower bounds"]
  }
]

[
  {
    "id": "ann-intro",
    "proofId": "triangular-reciprocals",
    "range": {"startLine": 8, "endLine": 47},
    "type": "concept",
    "title": "Sum of Reciprocals of Triangular Numbers: Wiedijk #42",
    "content": "**The Sum of Reciprocals of Triangular Numbers**:\n\n$$\\sum_{n=1}^{\\infty} \\frac{1}{T_n} = \\sum_{n=1}^{\\infty} \\frac{2}{n(n+1)} = 2$$\n\nwhere $T_n = \\frac{n(n+1)}{2}$ is the $n$-th triangular number.\n\n**Triangular Numbers**: $1, 3, 6, 10, 15, 21, \\ldots$\n- Count dots in equilateral triangles\n- $T_n = 1 + 2 + \\cdots + n$\n\n**Historical**: The Pythagoreans studied triangular numbers around 500 BCE. This beautiful identity uses a **telescoping series** argument.",
    "significance": "critical",
    "relatedConcepts": ["triangular numbers", "telescoping series", "infinite series"]
  },
  {
    "id": "ann-triangular-def",
    "proofId": "triangular-reciprocals",
    "range": {"startLine": 53, "endLine": 62},
    "type": "definition",
    "title": "Triangular Numbers",
    "content": "**Definition of Triangular Numbers**:\n\n$$T_n = \\frac{n(n+1)}{2} = 1 + 2 + \\cdots + n$$\n\n**Lean**:\n```lean\ndef triangular (n : ℕ) : ℕ := n * (n + 1) / 2\n```\n\n**First few values**:\n- $T_1 = 1$\n- $T_2 = 3$\n- $T_3 = 6$\n- $T_4 = 10$\n- $T_5 = 15$\n\n**Visual**: These count dots in triangular arrays.",
    "mathContext": "Tₙ = n(n+1)/2",
    "significance": "major",
    "relatedConcepts": ["figurate numbers", "arithmetic progression", "Gauss sum"]
  },
  {
    "id": "ann-partial-fraction",
    "proofId": "triangular-reciprocals",
    "range": {"startLine": 64, "endLine": 90},
    "type": "theorem",
    "title": "Partial Fraction Decomposition",
    "content": "**Key Identity (Partial Fractions)**:\n\n$$\\frac{2}{n(n+1)} = \\frac{2}{n} - \\frac{2}{n+1}$$\n\nEquivalently: $\\frac{1}{n(n+1)} = \\frac{1}{n} - \\frac{1}{n+1}$\n\n**Why this works**:\n$$\\frac{2}{n} - \\frac{2}{n+1} = \\frac{2(n+1) - 2n}{n(n+1)} = \\frac{2}{n(n+1)} \\checkmark$$\n\n**Lean Proof**:\n```lean\ntheorem partial_fraction (n : ℕ) (hn : n ≠ 0) :\n    (2 : ℝ) / (n * (n + 1)) = 2 / n - 2 / (n + 1)\n```\n\nThis identity converts products in denominators into differences, enabling telescoping.",
    "mathContext": "2/(n(n+1)) = 2/n - 2/(n+1)",
    "significance": "critical",
    "relatedConcepts": ["partial fractions", "field_simp", "ring"]
  },
  {
    "id": "ann-telescoping",
    "proofId": "triangular-reciprocals",
    "range": {"startLine": 92, "endLine": 130},
    "type": "theorem",
    "title": "Telescoping Sum",
    "content": "**Finite Telescoping Sum**:\n\n$$\\sum_{k=1}^{n} \\frac{2}{k(k+1)} = 2 - \\frac{2}{n+1}$$\n\n**How it telescopes**:\n$$\\left(\\frac{2}{1} - \\frac{2}{2}\\right) + \\left(\\frac{2}{2} - \\frac{2}{3}\\right) + \\left(\\frac{2}{3} - \\frac{2}{4}\\right) + \\cdots$$\n\nAll intermediate terms cancel:\n$$= \\frac{2}{1} - \\frac{2}{n+1} = 2 - \\frac{2}{n+1}$$\n\n**As $n \\to \\infty$**: The sum approaches $2$.\n\n**Lean**: Proved by induction on $n$.",
    "mathContext": "Σ 2/(k(k+1)) = 2 - 2/(n+1)",
    "significance": "critical",
    "relatedConcepts": ["telescoping", "induction", "limit"]
  },
  {
    "id": "ann-convergence",
    "proofId": "triangular-reciprocals",
    "range": {"startLine": 132, "endLine": 168},
    "type": "theorem",
    "title": "Series Convergence",
    "content": "**Convergence Proof**:\n\nThe series $\\sum \\frac{1}{n(n+1)}$ converges because:\n\n$$\\frac{1}{n(n+1)} < \\frac{1}{n^2}$$\n\nand the **p-series** $\\sum \\frac{1}{n^2}$ converges (since $p = 2 > 1$).\n\n**Lean**:\n```lean\ntheorem summable_reciprocal_product :\n    Summable (fun n : ℕ => (1 : ℝ) / (n * (n + 1)))\n```\n\n**Comparison test**: Bounded above by a convergent series implies convergence.\n\n**Mathlib**: Uses `Real.summable_nat_rpow_inv` for the p-series.",
    "mathContext": "1/(n(n+1)) ≤ 1/n²",
    "significance": "major",
    "relatedConcepts": ["comparison test", "p-series", "Summable"]
  },
  {
    "id": "ann-main-theorem",
    "proofId": "triangular-reciprocals",
    "range": {"startLine": 170, "endLine": 247},
    "type": "theorem",
    "title": "Main Theorem: Sum Equals 2",
    "content": "**Sum of Reciprocals of Triangular Numbers** (Wiedijk #42):\n\n$$\\sum_{n=1}^{\\infty} \\frac{2}{n(n+1)} = 2$$\n\n**Proof Strategy**:\n1. Show partial sums equal $2 - \\frac{2}{n+1}$\n2. Prove this converges to $2$ as $n \\to \\infty$\n3. Use $\\epsilon$-$N$ definition of convergence\n\n**Lean**:\n```lean\ntheorem sum_reciprocals_triangular :\n    HasSum (fun n : ℕ => if n = 0 then 0\n                         else 2 / (n * (n + 1))) 2\n```\n\n**tsum version**:\n```lean\ntheorem tsum_reciprocals_triangular :\n    ∑' n : ℕ, ... = 2\n```",
    "mathContext": "Σ 2/(n(n+1)) = 2",
    "significance": "critical",
    "relatedConcepts": ["HasSum", "tsum", "Metric.tendsto_atTop"]
  },
  {
    "id": "ann-corollary",
    "proofId": "triangular-reciprocals",
    "range": {"startLine": 249, "endLine": 265},
    "type": "theorem",
    "title": "Corollary: Unscaled Sum",
    "content": "**Corollary**: Sum of $\\frac{1}{n(n+1)}$ equals 1:\n\n$$\\sum_{n=1}^{\\infty} \\frac{1}{n(n+1)} = 1$$\n\nThis follows by dividing the main result by 2.\n\n**Relation to triangular numbers**:\n$$\\sum_{n=1}^{\\infty} \\frac{1}{T_n} = \\sum_{n=1}^{\\infty} \\frac{2}{n(n+1)} = 2$$\n\nSo the sum of reciprocals of triangular numbers is exactly 2.",
    "mathContext": "Σ 1/(n(n+1)) = 1",
    "significance": "major",
    "relatedConcepts": ["scaling", "reciprocal triangular"]
  },
  {
    "id": "ann-connection",
    "proofId": "triangular-reciprocals",
    "range": {"startLine": 267, "endLine": 291},
    "type": "theorem",
    "title": "Connection to Triangular Numbers",
    "content": "**Reciprocal of Triangular Number**:\n\n$$\\frac{1}{T_n} = \\frac{2}{n(n+1)}$$\n\nsince $T_n = \\frac{n(n+1)}{2}$.\n\n**Lean**:\n```lean\ntheorem reciprocal_triangular (n : ℕ) (hn : n ≠ 0) :\n    (1 : ℝ) / (triangular n) = 2 / (n * (n + 1))\n```\n\n**Divisibility**: $n(n+1)$ is always even (consecutive integers), so division by 2 is exact.\n\nThis connects the abstract sum $\\sum \\frac{2}{n(n+1)}$ to the concrete triangular numbers.",
    "mathContext": "1/Tₙ = 2/(n(n+1))",
    "significance": "major",
    "relatedConcepts": ["even divisibility", "consecutive integers"]
  },
  {
    "id": "ann-examples",
    "proofId": "triangular-reciprocals",
    "range": {"startLine": 293, "endLine": 298},
    "type": "note",
    "title": "Verified Examples",
    "content": "**Triangular Number Examples**:\n\n| $n$ | $T_n$ | Formula |\n|-----|-------|----------|\n| 1 | 1 | $1 \\cdot 2 / 2 = 1$ |\n| 2 | 3 | $2 \\cdot 3 / 2 = 3$ |\n| 3 | 6 | $3 \\cdot 4 / 2 = 6$ |\n| 4 | 10 | $4 \\cdot 5 / 2 = 10$ |\n| 5 | 15 | $5 \\cdot 6 / 2 = 15$ |\n\nAll verified with `native_decide`.",
    "significance": "minor",
    "relatedConcepts": ["native_decide", "numerical verification"]
  }
]

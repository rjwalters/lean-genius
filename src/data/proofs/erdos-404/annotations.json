[
  {
    "id": "ann-404-header",
    "proofId": "erdos-404",
    "range": { "startLine": 1, "endLine": 32 },
    "type": "concept",
    "title": "Problem Overview",
    "content": "**Erdős Problem #404** asks about prime power divisibility of factorial sums. For a strictly increasing sequence a₁ < a₂ < ... < aₙ starting at a, when can p^k divide a₁! + a₂! + ... + aₙ!? The function f(a,p) measures the maximum such k. Lin proved f(2,2) ≤ 254.",
    "mathContext": "Posed by Erdős-Graham (1980). Connects p-adic analysis with factorial combinatorics. Related to Problem #403.",
    "significance": "critical",
    "relatedConcepts": ["p-adic valuation", "factorials", "divisibility"]
  },
  {
    "id": "ann-404-imports",
    "proofId": "erdos-404",
    "range": { "startLine": 34, "endLine": 50 },
    "type": "supporting",
    "title": "Imports and Setup",
    "content": "We import factorial definitions, p-adic valuation tools, filter limits, and big operators. The namespace Erdos404 contains all definitions for this problem.",
    "significance": "supporting",
    "relatedConcepts": ["Mathlib", "Lean 4"]
  },
  {
    "id": "ann-404-strictseq",
    "proofId": "erdos-404",
    "range": { "startLine": 52, "endLine": 58 },
    "type": "definition",
    "title": "Strictly Increasing Sequence",
    "content": "**StrictIncSeq a** is a strictly increasing finite sequence starting at a. It captures the index set a = a₁ < a₂ < ... < aₙ over which we sum factorials.",
    "mathContext": "Defined as a structure with length, sequence function, starting condition, and strict monotonicity.",
    "significance": "key",
    "relatedConcepts": ["sequence", "monotonicity"]
  },
  {
    "id": "ann-404-factsum",
    "proofId": "erdos-404",
    "range": { "startLine": 59, "endLine": 61 },
    "type": "definition",
    "title": "Factorial Sum",
    "content": "**factorialSum s** = a₁! + a₂! + ... + aₙ! is the sum of factorials over the sequence s. This is the quantity whose divisibility we study.",
    "significance": "critical",
    "relatedConcepts": ["factorial", "sum"]
  },
  {
    "id": "ann-404-divides",
    "proofId": "erdos-404",
    "range": { "startLine": 63, "endLine": 69 },
    "type": "definition",
    "title": "Divisibility Predicate and f(a,p)",
    "content": "**dividesByPrimePower a k p** holds if some sequence starting at a has factorial sum divisible by p^k. **f(a,p)** is the supremum of all such k - the central function of the problem.",
    "mathContext": "f(a,p) = sup{k : p^k | some factorial sum starting at a}. May be infinite.",
    "significance": "critical",
    "relatedConcepts": ["supremum", "divisibility"]
  },
  {
    "id": "ann-404-q1",
    "proofId": "erdos-404",
    "range": { "startLine": 81, "endLine": 85 },
    "type": "theorem",
    "title": "Main Question",
    "content": "**erdos_404_q1**: For which (a, p) is f(a,p) < ∞? This asks when there's a uniform upper bound on prime power divisibility of factorial sums starting at a.",
    "significance": "critical",
    "relatedConcepts": ["finiteness", "bound"]
  },
  {
    "id": "ann-404-secondary",
    "proofId": "erdos-404",
    "range": { "startLine": 90, "endLine": 97 },
    "type": "axiom",
    "title": "Secondary Question",
    "content": "**secondaryQuestion**: Does there exist p and infinite sequence {aᵢ} such that v_p(Σ_{i≤k} aᵢ!) → ∞? This asks if partial sums can have unbounded p-adic valuation.",
    "mathContext": "A positive answer would imply certain f(a,p) are infinite for strategic choices of sequence.",
    "significance": "critical",
    "relatedConcepts": ["limit", "p-adic valuation"]
  },
  {
    "id": "ann-404-lin",
    "proofId": "erdos-404",
    "range": { "startLine": 103, "endLine": 106 },
    "type": "theorem",
    "title": "Lin's Bound",
    "content": "**lin_bound**: Lin (1976) proved f(2,2) ≤ 254. This means no sum of factorials starting at 2 is divisible by 2^255. The main quantitative result for this problem.",
    "mathContext": "This is the only concrete upper bound known for any (a,p) pair.",
    "significance": "critical",
    "relatedConcepts": ["bound", "Lin"]
  },
  {
    "id": "ann-404-lin-meaning",
    "proofId": "erdos-404",
    "range": { "startLine": 108, "endLine": 111 },
    "type": "theorem",
    "title": "Lin's Bound Interpretation",
    "content": "**lin_bound_meaning**: For any strictly increasing sequence starting at 2, the factorial sum is not divisible by 2^255. An equivalent formulation of Lin's result.",
    "significance": "key",
    "relatedConcepts": ["interpretation"]
  },
  {
    "id": "ann-404-legendre",
    "proofId": "erdos-404",
    "range": { "startLine": 117, "endLine": 123 },
    "type": "definition",
    "title": "Legendre's Formula",
    "content": "**legendreSum n p** = Σ_{i≥1} ⌊n/p^i⌋ gives v_p(n!), the p-adic valuation of n!. This classical formula is essential for understanding factorial divisibility.",
    "mathContext": "Legendre's formula counts how many times p divides n! by summing contributions from p, p², p³, etc.",
    "significance": "key",
    "relatedConcepts": ["Legendre", "p-adic valuation"]
  },
  {
    "id": "ann-404-asymp",
    "proofId": "erdos-404",
    "range": { "startLine": 125, "endLine": 128 },
    "type": "theorem",
    "title": "Asymptotic Formula",
    "content": "**padic_val_factorial_asymp**: For large n, v_p(n!)/n → 1/(p-1). This asymptotic governs the growth rate of p-adic valuations of factorials.",
    "significance": "key",
    "relatedConcepts": ["asymptotic", "limit"]
  },
  {
    "id": "ann-404-modular",
    "proofId": "erdos-404",
    "range": { "startLine": 134, "endLine": 137 },
    "type": "theorem",
    "title": "Factorial Sum Modular Structure",
    "content": "**factorial_sum_mod**: If a₁ < a₂, then a₁! + a₂! ≡ a₁! (mod a₂!). The larger factorial dominates modularly.",
    "significance": "key",
    "relatedConcepts": ["modular arithmetic"]
  },
  {
    "id": "ann-404-factored",
    "proofId": "erdos-404",
    "range": { "startLine": 143, "endLine": 146 },
    "type": "theorem",
    "title": "Factorization Lemma",
    "content": "**factorial_sum_factored**: a₁! + a₂! = a₁!(1 + a₂!/a₁!). This factorization helps analyze divisibility by extracting the common factor.",
    "significance": "key",
    "relatedConcepts": ["factorization"]
  },
  {
    "id": "ann-404-example1",
    "proofId": "erdos-404",
    "range": { "startLine": 152, "endLine": 154 },
    "type": "example",
    "title": "Example: 2! + 3! = 8",
    "content": "2! + 3! = 2 + 6 = 8 = 2³. This shows f(2,2) ≥ 3. A concrete example demonstrating the phenomenon.",
    "significance": "supporting",
    "relatedConcepts": ["example"]
  },
  {
    "id": "ann-404-example2",
    "proofId": "erdos-404",
    "range": { "startLine": 156, "endLine": 158 },
    "type": "example",
    "title": "Example: 1! + 2! = 3",
    "content": "1! + 2! = 1 + 2 = 3. This shows 3 | (1! + 2!), so f(1,3) ≥ 1.",
    "significance": "supporting",
    "relatedConcepts": ["example"]
  },
  {
    "id": "ann-404-heuristics",
    "proofId": "erdos-404",
    "range": { "startLine": 163, "endLine": 174 },
    "type": "concept",
    "title": "Heuristics",
    "content": "**Informal reasoning:** For fixed a, f(a,p) should decrease as p → ∞ (larger primes are harder to achieve high powers). For fixed p, f(a,p) might increase as a → ∞ (access to larger factorials). The problem cannot be resolved by finite computation.",
    "significance": "supporting",
    "relatedConcepts": ["heuristics"]
  },
  {
    "id": "ann-404-special",
    "proofId": "erdos-404",
    "range": { "startLine": 180, "endLine": 188 },
    "type": "concept",
    "title": "Special Cases",
    "content": "**Special cases:** For a=1, we study 1 + (larger factorials). For p=2, Lin's bound applies. These are the most accessible cases for analysis.",
    "significance": "supporting",
    "relatedConcepts": ["special cases"]
  }
]

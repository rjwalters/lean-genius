{
  "id": "erdos-271",
  "title": "Erdős Problem #271: Stanley Sequences",
  "slug": "erdos-271",
  "description": "For any n, define the greedy AP-free sequence A(n) starting 0, n. Can the aₖ be explicitly determined? How fast do they grow? Partial results exist but the general problem is OPEN.",
  "meta": {
    "author": "Erdős, Odlyzko, Stanley, Moy",
    "sourceUrl": "https://erdosproblems.com/271",
    "date": "1978-2011",
    "status": "complete",
    "proofRepoPath": "Proofs/Erdos271Problem.lean",
    "tags": [
      "erdos",
      "combinatorics",
      "arithmetic-progressions",
      "sequences",
      "greedy-algorithms",
      "partially-open"
    ],
    "badge": "axiom",
    "sorries": 0,
    "erdosNumber": 271,
    "erdosUrl": "https://erdosproblems.com/271",
    "erdosProblemStatus": "open",
    "dateAdded": "2026-01-19",
    "mathlib_version": "4.15.0",
    "mathlibDependencies": [
      {
        "theorem": "Finset.image",
        "description": "Image of a finite set",
        "module": "Mathlib.Data.Finset.Basic"
      },
      {
        "theorem": "Filter.atTop",
        "description": "Filter at infinity",
        "module": "Mathlib.Order.Filter.Basic"
      },
      {
        "theorem": "Real.log",
        "description": "Natural logarithm",
        "module": "Mathlib.Analysis.SpecialFunctions.Log.Basic"
      }
    ],
    "originalContributions": [
      "IsThreeAP: three-term AP definition",
      "IsAPFree: AP-free set predicate",
      "stanleySequence: greedy AP-free sequence",
      "hasDigit2InBase3: base-3 digit predicate",
      "noDigit2InBase3: A(1) characterization predicate",
      "a1_characterization axiom: base-3 characterization",
      "log2of3: growth exponent log₂3 ≈ 1.585",
      "hasPolynomialGrowth: first growth type",
      "hasQuadraticLogGrowth: second growth type",
      "odlyzko_stanley_dichotomy_conjecture: main open problem",
      "moy_upper_bound axiom: (1/2+ε)k² bound",
      "van_doorn_sothanaphan_explicit axiom: explicit bound",
      "erdos_271 theorem: partial results"
    ]
  },
  "overview": {
    "historicalContext": "**Erdős Problem #271: Stanley Sequences**\n\nStanley sequences are greedy constructions avoiding three-term arithmetic progressions. Given n, the sequence A(n) starts with 0, n and continues by always choosing the smallest integer that maintains AP-freeness.\n\n**Historical Development:**\n- **Odlyzko & Stanley (1978):** Characterized A(1), A(3^k), A(2·3^k); proposed dichotomy conjecture\n- **Lindhurst (1990):** Computational evidence that A(4) may have quadratic-log growth\n- **Moy (2011):** Proved aₖ ≤ (1/2+ε)k² for large k\n- **van Doorn & Sothanaphan:** Explicit bound aₖ ≤ (k-1)(k+2)/2 + n\n\n**Status:** OPEN for general n; partially solved for special cases.",
    "problemStatement": "**Problem Statement (Partially Open)**\n\nFor any $n$, let $A(n) = \\{a_0, a_1, a_2, \\ldots\\}$ with:\n- $a_0 = 0$, $a_1 = n$\n- For $k \\geq 1$: $a_{k+1}$ is the least integer keeping the sequence AP-free\n\n**Questions:**\n1. Can the $a_k$ be explicitly determined?\n2. How fast do they grow?\n\n**Known:**\n- $A(1)$ = integers with no digit 2 in base 3\n- $a_k \\leq (k-1)(k+2)/2 + n$ for all $k$\n\n**Conjectured (Odlyzko-Stanley):**\nEvery sequence has either:\n- $a_k \\sim k^{\\log_2 3}$, or\n- $a_k \\sim k^2/\\log k$",
    "proofStrategy": "**Formalization Approach**\n\n1. **AP Definitions:** IsThreeAP, IsAPFree predicates\n\n2. **Stanley Sequences:** stanleySequence function, basic properties\n\n3. **Base-3 Characterization:** hasDigit2InBase3, noDigit2InBase3 for A(1)\n\n4. **Growth Rates:** log2of3, hasPolynomialGrowth, hasQuadraticLogGrowth\n\n5. **Upper Bounds:** Moy's theorem, van Doorn-Sothanaphan explicit bound\n\n6. **Conjectures:** Odlyzko-Stanley dichotomy, A(4) conjecture",
    "keyInsights": [
      "**A(1) Characterization:** Base-3 numbers with only digits 0 and 1",
      "**Growth Exponent:** log₂3 ≈ 1.585 for 'nice' sequences like A(1)",
      "**Dichotomy Conjecture:** Two possible growth rates - no intermediates",
      "**A(4) Mystery:** Computational data suggests quadratic-log growth",
      "**Upper Bound:** aₖ ≤ (k-1)(k+2)/2 + n (explicit, for all k)",
      "**Connection to Combinatorics:** Stanley sequences are fundamental in additive combinatorics"
    ]
  },
  "sections": [
    {
      "id": "ap-definitions",
      "title": "Arithmetic Progressions",
      "summary": "IsThreeAP, IsAPFree, IsAPFree' predicates",
      "startLine": 39,
      "endLine": 66
    },
    {
      "id": "stanley-sequences",
      "title": "Stanley Sequences",
      "summary": "stanleySequence definition and basic properties",
      "startLine": 68,
      "endLine": 107
    },
    {
      "id": "a1-characterization",
      "title": "The Sequence A(1)",
      "summary": "Base-3 characterization, elements, growth rate",
      "startLine": 109,
      "endLine": 156
    },
    {
      "id": "odlyzko-stanley",
      "title": "Odlyzko-Stanley Characterizations",
      "summary": "A(3^k), A(2·3^k) characterizations",
      "startLine": 158,
      "endLine": 178
    },
    {
      "id": "growth-conjectures",
      "title": "Growth Rate Conjectures",
      "summary": "Dichotomy conjecture, A(4) conjecture",
      "startLine": 180,
      "endLine": 227
    },
    {
      "id": "upper-bounds",
      "title": "Upper Bounds",
      "summary": "Moy's theorem, van Doorn-Sothanaphan explicit bound",
      "startLine": 229,
      "endLine": 258
    },
    {
      "id": "specific-values",
      "title": "Specific Values",
      "summary": "A(1), A(2), A(4) computed elements",
      "startLine": 260,
      "endLine": 283
    },
    {
      "id": "sum-free-connection",
      "title": "Connection to Sum-Free Sets",
      "summary": "IsSumFree, difference from AP-free",
      "startLine": 285,
      "endLine": 312
    },
    {
      "id": "main-results",
      "title": "Main Results",
      "summary": "erdos_271 theorem, historical timeline",
      "startLine": 314,
      "endLine": 362
    }
  ],
  "conclusion": {
    "summary": "Erdős Problem #271 is PARTIALLY SOLVED. A(1) has an explicit base-3 characterization, and similar results hold for A(3^k) and A(2·3^k). Upper bounds are proven: aₖ ≤ (1/2+ε)k² eventually (Moy) and aₖ ≤ (k-1)(k+2)/2 + n always. The Odlyzko-Stanley dichotomy conjecture (two possible growth rates) remains OPEN.",
    "implications": "**Combinatorial Significance**\n\n1. **Additive Combinatorics:** Stanley sequences are fundamental objects avoiding arithmetic progressions\n\n2. **Base-k Representations:** The A(1) characterization connects to digital representations\n\n3. **Growth Rate Questions:** The dichotomy conjecture would classify all such sequences\n\n4. **Algorithmic Aspects:** Greedy algorithms for AP-avoidance",
    "openQuestions": [
      "Prove the Odlyzko-Stanley dichotomy conjecture",
      "Determine the growth rate of A(4)",
      "Find explicit formulas for more sequences",
      "Characterize which n give polynomial vs. quadratic-log growth"
    ]
  }
}

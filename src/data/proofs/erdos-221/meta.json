{
  "id": "erdos-221",
  "title": "Erdős Problem #221: Additive Complements with Powers of 2",
  "slug": "erdos-221",
  "description": "Is there a set A ⊆ ℕ with |A ∩ {1,...,N}| ≪ N/log N such that every large integer can be written as 2^k + a for some k ≥ 0 and a ∈ A? SOLVED: YES, by Ruzsa (1972) using an ingenious construction based on powers of 5.",
  "meta": {
    "author": "Lorentz (1954), Ruzsa (1972, 2001)",
    "sourceUrl": "https://erdosproblems.com/221",
    "date": "1972",
    "status": "complete",
    "proofRepoPath": "Proofs/Erdos221Problem.lean",
    "tags": [
      "erdos",
      "additive-number-theory",
      "additive-complements",
      "powers-of-2",
      "primitive-roots",
      "solved"
    ],
    "badge": "mathlib",
    "sorries": 0,
    "erdosNumber": 221,
    "erdosUrl": "https://erdosproblems.com/221",
    "erdosProblemStatus": "solved",
    "dateAdded": "2026-01-28",
    "mathlib_version": "4.15.0",
    "mathlibDependencies": [
      {
        "theorem": "Finset.filter",
        "description": "Filtering finite sets",
        "module": "Mathlib.Data.Finset.Basic"
      },
      {
        "theorem": "Real.log",
        "description": "Natural logarithm on reals",
        "module": "Mathlib.Analysis.SpecialFunctions.Log.Basic"
      },
      {
        "theorem": "ZMod",
        "description": "Integers modulo n",
        "module": "Mathlib.NumberTheory.ZetaFunction"
      },
      {
        "theorem": "Filter.Tendsto",
        "description": "Filter convergence for limits",
        "module": "Mathlib.Data.Real.Basic"
      }
    ],
    "originalContributions": [
      "PowersOfTwo definition: {n | ∃ k, n = 2^k}",
      "IsAdditiveComplementForLarge definition",
      "IsComplementToPowersOfTwo definition",
      "countingFunction, HasDensityNOverLogN, HasLorentzDensity, HasAsymptoticOptimalDensity",
      "Erdos221Conjecture: main problem statement",
      "lorentz_1954 axiom: first positive result",
      "ruzsaConstant, RuzsaCoreSet, RuzsaSet: Ruzsa's construction",
      "two_primitive_root_mod_five_power axiom",
      "ruzsa_is_complement, ruzsa_density axioms",
      "ruzsa_1972 theorem: verified from axioms",
      "ExactComplementExists, ruzsa_2001_exact_complement axiom",
      "density_lower_bound axiom: optimality of N/log N",
      "optimal_density theorem: tight bounds",
      "primitive_root_order axiom: multiplicative order of 2 mod 5^n",
      "powers_cover_residues axiom: coverage of coprime residues",
      "GeneralizedComplement definition, generalization_to_any_base axiom",
      "sumset_covering, additive_basis_order_two axioms",
      "erdos_221_summary, erdos_221_main, erdos_221 theorems"
    ]
  },
  "overview": {
    "historicalContext": "This problem asks about additive complements to the exponentially sparse set of powers of 2. Lorentz (1954) first showed such complements exist with density O(N log log N / log N). Ruzsa (1972) achieved the optimal bound O(N / log N) with an elegant construction using powers of 5, exploiting the fact that 2 is a primitive root mod 5^n. In 2001, Ruzsa refined this to construct an 'exact' complement with asymptotically optimal density N / log₂ N.",
    "problemStatement": "Is there a set A ⊆ ℕ such that: (1) |A ∩ {1,...,N}| ≪ N/log N for all large N, and (2) every large integer can be written as 2^k + a for some k ≥ 0 and a ∈ A?",
    "proofStrategy": "Ruzsa's construction: A = { 5^n · m : m ≥ 1 and 5^n ≥ C log m } + {0, 1} where C = 1/(5 log 2). The key insight is that 2 is a primitive root modulo 5^n for all n ≥ 1, meaning powers of 2 cover all residues coprime to 5^n. This ensures every large integer has the required representation while the constraint 5^n ≥ C log m keeps A sparse.",
    "keyInsights": [
      "2 is a primitive root modulo 5^n for all n ≥ 1 - this is the key algebraic fact",
      "Powers of 2 cover all residues coprime to 5^n, enabling the coverage",
      "The condition 5^n ≥ C log m ensures sparsity O(N/log N)",
      "Lorentz's 1954 result was the first positive answer but not optimal",
      "Ruzsa's 2001 'exact complement' achieves asymptotic density N/log₂ N",
      "The density N/log N is optimal up to constants - a lower bound also exists"
    ]
  },
  "sections": [
    {
      "id": "basic-definitions",
      "title": "Basic Definitions",
      "startLine": 44,
      "endLine": 59,
      "summary": "Defines powers of 2, additive complements, and the main property."
    },
    {
      "id": "counting-functions",
      "title": "Counting Functions",
      "startLine": 61,
      "endLine": 83,
      "summary": "Defines counting function and various density bounds (N/log N, Lorentz, optimal)."
    },
    {
      "id": "main-conjecture",
      "title": "The Main Problem Statement",
      "startLine": 85,
      "endLine": 91,
      "summary": "States Erdős Problem #221 as a formal conjecture."
    },
    {
      "id": "lorentz-1954",
      "title": "Lorentz's Result (1954)",
      "startLine": 93,
      "endLine": 99,
      "summary": "The first positive result with weaker density bound."
    },
    {
      "id": "ruzsa-construction",
      "title": "Ruzsa's Construction (1972)",
      "startLine": 101,
      "endLine": 130,
      "summary": "Defines Ruzsa's set using powers of 5 and proves the main theorem."
    },
    {
      "id": "solved",
      "title": "Erdős Problem #221 - SOLVED",
      "startLine": 132,
      "endLine": 137,
      "summary": "The answer to Problem #221 is YES."
    },
    {
      "id": "optimal-construction",
      "title": "Ruzsa's Optimal Construction (2001)",
      "startLine": 139,
      "endLine": 148,
      "summary": "The exact additive complement achieving asymptotic density N/log₂ N."
    },
    {
      "id": "optimality",
      "title": "Why N/log N is Optimal",
      "startLine": 150,
      "endLine": 168,
      "summary": "Shows the density bound is tight from both directions."
    },
    {
      "id": "primitive-roots",
      "title": "Connection to Primitive Roots",
      "startLine": 170,
      "endLine": 188,
      "summary": "primitive_root_order and powers_cover_residues axioms."
    },
    {
      "id": "generalizations",
      "title": "Generalizations",
      "startLine": 190,
      "endLine": 204,
      "summary": "GeneralizedComplement definition, generalization_to_any_base axiom."
    },
    {
      "id": "related",
      "title": "Related Problems",
      "startLine": 206,
      "endLine": 225,
      "summary": "sumset_covering and additive_basis_order_two axioms."
    },
    {
      "id": "summary",
      "title": "Summary",
      "startLine": 227,
      "endLine": 274,
      "summary": "erdos_221_summary, erdos_221_main, erdos_221 theorems."
    }
  ],
  "conclusion": {
    "summary": "Erdős Problem #221 is SOLVED. The answer is YES: Ruzsa (1972) constructed a set A with |A ∩ {1,...,N}| = O(N/log N) such that every large integer is 2^k + a for some k ≥ 0 and a ∈ A. The construction uses A = { 5^n · m : 5^n ≥ C log m } + {0,1}, exploiting that 2 is a primitive root mod 5^n. Ruzsa (2001) later achieved the asymptotically optimal density N/log₂ N.",
    "implications": "This result reveals deep connections between additive combinatorics and multiplicative number theory (primitive roots). It shows that even very sparse sets can 'complement' the powers of 2 to cover all integers.",
    "openQuestions": [
      "Find explicit constants for the density bounds",
      "Generalize to other bases (powers of g instead of 2)",
      "What is the exact constant in the asymptotic N/log₂ N?",
      "Study the structure of all optimal complements"
    ]
  }
}

[
  {
    "id": "ann-e248-header",
    "proofId": "erdos-248",
    "range": {
      "startLine": 1,
      "endLine": 24
    },
    "type": "concept",
    "title": "Problem Statement and History",
    "content": "Erdos Problem #248 asks whether there are infinitely many integers n such that the number of distinct prime divisors of n+k grows at most linearly in k. Remarkably, Erdos and Graham admitted in 1980: 'we just know too little about sieves to be able to handle such a question.'",
    "mathContext": "The notation omega(n+k) << k means omega(n+k) <= C*k for some constant C independent of k. The problem was open for 45 years until Tao and Teravainen's 2025 solution.",
    "significance": "supporting",
    "relatedConcepts": [
      "sieve theory",
      "prime factors",
      "Erdos problems"
    ]
  },
  {
    "id": "ann-e248-imports",
    "proofId": "erdos-248",
    "range": {
      "startLine": 26,
      "endLine": 29
    },
    "type": "concept",
    "title": "Mathlib Imports",
    "content": "We import Mathlib modules for prime numbers, factorization (which provides primeFactors), set cardinality, and real numbers.",
    "significance": "supporting",
    "relatedConcepts": [
      "Mathlib",
      "prime numbers"
    ]
  },
  {
    "id": "ann-e248-omega-def",
    "proofId": "erdos-248",
    "range": {
      "startLine": 44,
      "endLine": 46
    },
    "type": "definition",
    "title": "Prime Omega Function omega(n)",
    "content": "The **prime omega function** omega(n) counts the number of distinct prime divisors of n. For example, omega(12) = 2 because 12 = 2^2 * 3 has exactly two distinct primes: 2 and 3.",
    "mathContext": "We define `omega n := n.primeFactors.card` using Mathlib's primeFactors which returns the finite set of prime divisors. The cardinality of this set gives us omega(n).",
    "significance": "key",
    "relatedConcepts": [
      "arithmetic functions",
      "prime factorization",
      "multiplicative functions"
    ]
  },
  {
    "id": "ann-e248-omega-examples",
    "proofId": "erdos-248",
    "range": {
      "startLine": 48,
      "endLine": 59
    },
    "type": "lemma",
    "title": "Verified Values of omega(n)",
    "content": "We verify concrete values using native_decide: omega(1) = 0 (no prime divisors), omega(2) = 1 (only 2), omega(6) = 2 (primes 2, 3), and omega(30) = 3 (primes 2, 3, 5).",
    "mathContext": "The native_decide tactic compiles the decidable proposition to native code and evaluates it, giving a machine-checked certificate of these equalities.",
    "significance": "supporting",
    "relatedConcepts": [
      "decidability",
      "native_decide",
      "computation"
    ]
  },
  {
    "id": "ann-e248-smooth-tail",
    "proofId": "erdos-248",
    "range": {
      "startLine": 71,
      "endLine": 75
    },
    "type": "definition",
    "title": "Smooth-Tail Integers",
    "content": "We define the set of **smooth-tail integers** as those n satisfying Erdos's condition: omega(n+k) <= C*k for all k >= 1. These are 'exceptional' starting points where consecutive integers have unusually few prime factors.",
    "mathContext": "In Lean: `smoothTailIntegers C := {n : N | forall k >= 1, (omega(n+k) : R) <= C * k}`. The coercion to R allows comparison with the real number C*k.",
    "significance": "key",
    "relatedConcepts": [
      "set comprehension",
      "smooth numbers",
      "prime distribution"
    ]
  },
  {
    "id": "ann-e248-main-axiom",
    "proofId": "erdos-248",
    "range": {
      "startLine": 76,
      "endLine": 92
    },
    "type": "theorem",
    "title": "Main Theorem (Axiom): Tao-Teravainen 2025",
    "content": "**Erdos Problem #248 SOLVED**: There exists C > 0 such that the set of smooth-tail integers is infinite. This groundbreaking result was proved by Terence Tao and Joni Teravainen in December 2025.",
    "mathContext": "We state this as an axiom: `exists C : R, C > 0 and (smoothTailIntegers C).Infinite`. The proof requires deep sieve theory - specifically, quantitative bounds on correlations of multiplicative functions - which is far beyond current Mathlib formalization.",
    "significance": "critical",
    "relatedConcepts": [
      "sieve theory",
      "analytic number theory",
      "Tao-Teravainen"
    ]
  },
  {
    "id": "ann-e248-omega-prime",
    "proofId": "erdos-248",
    "range": {
      "startLine": 99,
      "endLine": 104
    },
    "type": "theorem",
    "title": "omega(p) = 1 for Primes",
    "content": "For any prime p, omega(p) = 1 since the only prime divisor of p is itself. This is a fundamental property of the prime omega function.",
    "mathContext": "The proof uses hp.primeFactors which, for a prime p, simplifies to the singleton {p}. The cardinality of a singleton is 1.",
    "significance": "supporting",
    "relatedConcepts": [
      "prime numbers",
      "prime factorization"
    ]
  },
  {
    "id": "ann-e248-small-examples",
    "proofId": "erdos-248",
    "range": {
      "startLine": 105,
      "endLine": 115
    },
    "type": "lemma",
    "title": "Smooth-Tail Condition for n=1",
    "content": "We verify that n=1 satisfies the smooth-tail condition with C=2 for small values of k. For instance, omega(2)=1 <= 2, omega(3)=1 <= 4, omega(4)=1 <= 6, omega(5)=1 <= 8, omega(6)=2 <= 10.",
    "mathContext": "These verifications use native_decide on natural number inequalities. While we don't prove n=1 works for all k, these examples illustrate the condition.",
    "significance": "supporting",
    "relatedConcepts": [
      "examples",
      "verification"
    ]
  },
  {
    "id": "ann-e248-nonempty",
    "proofId": "erdos-248",
    "range": {
      "startLine": 130,
      "endLine": 133
    },
    "type": "theorem",
    "title": "Corollary: Nonemptiness",
    "content": "As a simple corollary of the main theorem, the set of smooth-tail integers is nonempty. If a set is infinite, it must be nonempty.",
    "mathContext": "We use Set.Infinite.nonempty to derive nonemptiness from the axiom erdos_248. This gives us an existential witness without constructing a specific n.",
    "significance": "supporting",
    "relatedConcepts": [
      "set theory",
      "infinite sets"
    ]
  }
]

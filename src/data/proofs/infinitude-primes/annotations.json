[
  {
    "id": "ann-imports",
    "proofId": "infinitude-primes",
    "range": { "startLine": 15, "endLine": 17 },
    "type": "context",
    "title": "Mathlib Imports",
    "content": "This proof uses Mathlib's established definitions for primes and factorials. `Nat.Prime` provides a robust prime definition, while `Nat.factorial` gives us the factorial function with all its key properties already proven.",
    "mathContext": "Mathlib provides `Nat.Prime p` and `n.factorial` with extensive lemma libraries.",
    "significance": "supporting",
    "relatedConcepts": ["Mathlib", "prime definition", "factorial"]
  },
  {
    "id": "ann-dvd-factorial",
    "proofId": "infinitude-primes",
    "range": { "startLine": 23, "endLine": 27 },
    "type": "theorem",
    "title": "Divisibility in Factorial",
    "content": "Any positive integer $k \\leq n$ divides $n!$. This is because $k$ appears as one of the factors in the product $1 \\cdot 2 \\cdots n$.\n\nWe simply invoke Mathlib's `Nat.dvd_factorial` which already has this proven.",
    "mathContext": "$0 < k \\leq n \\Rightarrow k \\mid n!$\n\nThis is why $n! + 1$ cannot share any small prime factors with $n!$.",
    "significance": "critical",
    "relatedConcepts": ["factorial properties", "product divisibility"]
  },
  {
    "id": "ann-factorial-ge-two",
    "proofId": "infinitude-primes",
    "range": { "startLine": 29, "endLine": 33 },
    "type": "lemma",
    "title": "n! + 1 is at least 2",
    "content": "For any $n$, we have $n! + 1 \\geq 2$. Since $n! \\geq 1$ (factorials are always positive), adding 1 gives us at least 2.\n\nThis ensures that $n! + 1$ has at least one prime divisor.",
    "mathContext": "$n! \\geq 1 \\Rightarrow n! + 1 \\geq 2$",
    "significance": "supporting",
    "relatedConcepts": ["positivity", "prime divisor existence"]
  },
  {
    "id": "ann-dvd-add-one",
    "proofId": "infinitude-primes",
    "range": { "startLine": 35, "endLine": 40 },
    "type": "lemma",
    "title": "The Key Divisibility Lemma",
    "content": "If $p$ divides both $a$ and $a+1$, then $p$ divides 1. This is the heart of Euclid's proof.\n\nThe proof: if $p \\mid a$ and $p \\mid (a+1)$, then $p \\mid ((a+1) - a) = 1$.\n\nSince no prime divides 1, this creates the contradiction we need.",
    "mathContext": "$p \\mid a \\land p \\mid (a+1) \\Rightarrow p \\mid 1$\n\nEquivalently: consecutive integers are coprime.",
    "significance": "critical",
    "relatedConcepts": ["coprimality", "consecutive integers", "proof by contradiction"]
  },
  {
    "id": "ann-main-theorem",
    "proofId": "infinitude-primes",
    "range": { "startLine": 44, "endLine": 83 },
    "type": "theorem",
    "title": "Euclid's Theorem: Unbounded Primes",
    "content": "**For any $n$, there exists a prime $p > n$.**\n\nThe proof constructs $Q = n! + 1$ and reasons:\n1. $Q \\geq 2$, so $Q$ has a prime divisor $p$ (using `Nat.exists_prime_and_dvd`)\n2. Suppose for contradiction that $p \\leq n$\n3. Then $p \\mid n!$ (since $p$ is a factor in $1 \\cdot 2 \\cdots n$)\n4. But $p \\mid Q = n! + 1$\n5. So $p \\mid ((n!+1) - n!) = 1$\n6. Since $p \\mid 1$, we have $p = 1$\n7. **Contradiction**: $p$ is prime, so $p \\neq 1$\n\nTherefore $p > n$. Since $n$ was arbitrary, primes are unbounded.",
    "mathContext": "$\\forall n, \\exists p$ prime, $p > n$\n\nKey insight: if $p \\mid n!$ and $p \\mid (n!+1)$, then $p \\mid 1$, which is impossible for primes.",
    "significance": "critical",
    "prerequisites": ["ann-dvd-factorial", "ann-dvd-add-one", "ann-factorial-ge-two"],
    "relatedConcepts": ["Euclid's proof", "constructive existence", "proof by contradiction"]
  },
  {
    "id": "ann-primes-infinite",
    "proofId": "infinitude-primes",
    "range": { "startLine": 85, "endLine": 87 },
    "type": "theorem",
    "title": "Infinitude of Primes (Final Statement)",
    "content": "The theorem `primes_infinite` is simply an alias for `unbounded_primes`, stating the result in a form emphasizing infinitude: for any bound $n$, there exists a prime exceeding it.",
    "mathContext": "The sequence $2, 3, 5, 7, 11, 13, 17, \\ldots$ never terminates.",
    "significance": "key",
    "relatedConcepts": ["unboundedness", "infinity"]
  },
  {
    "id": "ann-corollary-gt-prime",
    "proofId": "infinitude-primes",
    "range": { "startLine": 91, "endLine": 93 },
    "type": "corollary",
    "title": "Every Prime Has a Larger Prime",
    "content": "Given any prime $p$, there exists another prime $q > p$. This follows immediately from unbounded_primes: we can always find a prime larger than any given number, including primes.",
    "mathContext": "$\\forall p$ prime, $\\exists q$ prime, $q > p$",
    "significance": "supporting",
    "relatedConcepts": ["prime sequences", "successor primes"]
  },
  {
    "id": "ann-no-largest",
    "proofId": "infinitude-primes",
    "range": { "startLine": 95, "endLine": 100 },
    "type": "corollary",
    "title": "No Largest Prime",
    "content": "There is no largest prime. If there were a prime $p$ such that all primes $q \\leq p$, then by unbounded_primes we could find a prime $q > p$, contradicting that $p$ is largest.\n\nThis is the contrapositive way of saying primes are infinite.",
    "mathContext": "$\\neg \\exists p$ prime such that $\\forall q$ prime, $q \\leq p$",
    "significance": "key",
    "relatedConcepts": ["unboundedness", "proof by contradiction"]
  }
]

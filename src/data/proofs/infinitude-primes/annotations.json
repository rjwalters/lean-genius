[
  {
    "id": "ann-divides-def",
    "proofId": "infinitude-primes",
    "range": { "startLine": 17, "endLine": 22 },
    "type": "definition",
    "title": "Divisibility Definition",
    "content": "We say $n$ **divides** $m$ (written $n \\mid m$) if there exists a natural number $k$ such that $m = k \\cdot n$. This is the foundational concept for number theory.\n\nThe notation `n ∣ m` is defined as syntactic sugar for `divides n m`, and `n ∤ m` means $n$ does not divide $m$.",
    "mathContext": "$n \\mid m \\iff \\exists k \\in \\mathbb{N}, m = kn$\n\nFor example: $3 \\mid 12$ because $12 = 4 \\cdot 3$",
    "significance": "key",
    "relatedConcepts": ["factors", "multiples", "GCD"]
  },
  {
    "id": "ann-reg-def",
    "proofId": "infinitude-primes",
    "range": { "startLine": 24, "endLine": 30 },
    "type": "definition",
    "title": "Regular Numbers and Range Predicates",
    "content": "A **regular** number is one that is at least 2. This excludes 0 and 1, which have special divisibility properties that would complicate our primality definitions.\n\nThe `RegularRange` predicate captures numbers in the range $[2, n)$, used for expressing 'no proper divisors'.",
    "mathContext": "$\\text{Reg}(n) \\iff n \\geq 2$\n\n$r \\triangleleft n \\iff 2 \\leq r < n$",
    "significance": "supporting",
    "relatedConcepts": ["primality", "composite numbers"]
  },
  {
    "id": "ann-prime-def",
    "proofId": "infinitude-primes",
    "range": { "startLine": 32, "endLine": 34 },
    "type": "definition",
    "title": "Prime (Euclid's Definition)",
    "content": "A number $p$ is **prime** if $p \\geq 2$ and whenever $p$ divides a product $nm$, it must divide at least one of $n$ or $m$. This is Euclid's characterization, equivalent to the usual definition.",
    "mathContext": "$p$ is prime $\\iff$ ($p \\geq 2$) $\\land$ ($p \\mid nm \\Rightarrow p \\mid n \\lor p \\mid m$)\n\nThis property is sometimes called 'Euclid's Lemma' and is the key to unique factorization.",
    "significance": "critical",
    "relatedConcepts": ["Euclid's lemma", "fundamental theorem of arithmetic"]
  },
  {
    "id": "ann-natprime-def",
    "proofId": "infinitude-primes",
    "range": { "startLine": 36, "endLine": 38 },
    "type": "definition",
    "title": "Natural Prime Definition",
    "content": "An alternative characterization: $p$ is prime if $p \\geq 2$ and no number between 2 and $p-1$ divides $p$. This is the 'no proper divisors' definition, often more intuitive and easier to check computationally.",
    "mathContext": "$p$ is NatPrime $\\iff$ ($p \\geq 2$) $\\land$ ($\\forall m, 2 \\leq m < p \\Rightarrow m \\nmid p$)",
    "significance": "key",
    "relatedConcepts": ["divisibility testing", "trial division"]
  },
  {
    "id": "ann-dvd-self",
    "proofId": "infinitude-primes",
    "range": { "startLine": 40, "endLine": 41 },
    "type": "lemma",
    "title": "Every Number Divides Itself",
    "content": "Every number $n$ divides itself: we have $n = 1 \\cdot n$, so the witness is $k = 1$.",
    "mathContext": "$n \\mid n$ for all $n$\n\nThis makes divisibility a reflexive relation.",
    "significance": "supporting",
    "relatedConcepts": ["reflexivity", "divisibility"]
  },
  {
    "id": "ann-dvd-trans",
    "proofId": "infinitude-primes",
    "range": { "startLine": 43, "endLine": 46 },
    "type": "lemma",
    "title": "Divisibility is Transitive",
    "content": "If $a \\mid b$ and $b \\mid c$, then $a \\mid c$. The proof: if $b = ma$ and $c = nb$, then $c = n(ma) = (nm)a$.",
    "mathContext": "$a \\mid b \\land b \\mid c \\Rightarrow a \\mid c$\n\nThis makes divisibility a transitive relation on $\\mathbb{N}$.",
    "significance": "supporting",
    "relatedConcepts": ["transitive relations", "factor chains"]
  },
  {
    "id": "ann-one-dvd-one",
    "proofId": "infinitude-primes",
    "range": { "startLine": 48, "endLine": 58 },
    "type": "lemma",
    "title": "Only 1 Divides 1",
    "content": "If $a \\mid 1$, then $a = 1$. This is **crucial**: no prime can divide 1, which is the key to the contradiction in Euclid's proof.\n\nThe proof shows that if $1 = ka$, then both $k \\geq 1$ and $a \\geq 1$. But also $a \\leq ka = 1$, so $a = 1$.",
    "mathContext": "$a \\mid 1 \\Rightarrow a = 1$\n\nEquivalently: 1 is a **unit**—its only divisor is itself.",
    "significance": "critical",
    "relatedConcepts": ["units", "invertibility"]
  },
  {
    "id": "ann-factorial",
    "proofId": "infinitude-primes",
    "range": { "startLine": 60, "endLine": 63 },
    "type": "definition",
    "title": "Factorial Definition",
    "content": "The **factorial** $n!$ is defined recursively: $0! = 1$ and $(n+1)! = (n+1) \\cdot n!$. It equals the product of all positive integers up to $n$.\n\nLean's pattern matching makes this definition elegant and directly computable.",
    "mathContext": "$n! = 1 \\cdot 2 \\cdot 3 \\cdots n = \\prod_{k=1}^{n} k$\n\nFor example: $5! = 120$",
    "significance": "critical",
    "relatedConcepts": ["combinatorics", "gamma function", "recursion"]
  },
  {
    "id": "ann-dvd-fact",
    "proofId": "infinitude-primes",
    "range": { "startLine": 65, "endLine": 78 },
    "type": "theorem",
    "title": "Divisibility in Factorial",
    "content": "Any positive integer $k \\leq n$ divides $n!$. This is because $k$ appears as one of the factors in the product $1 \\cdot 2 \\cdots n$.\n\nThe proof uses strong induction: if $k = n$, then $k$ is the leading factor; otherwise, $k$ divides $(n-1)!$ by induction, hence divides $n \\cdot (n-1)! = n!$.",
    "mathContext": "$0 < k \\leq n \\Rightarrow k \\mid n!$\n\nThis is why $n! + 1$ cannot share any small prime factors with $n!$.",
    "significance": "critical",
    "relatedConcepts": ["factorial properties", "product divisibility", "induction"]
  },
  {
    "id": "ann-fact-pos",
    "proofId": "infinitude-primes",
    "range": { "startLine": 80, "endLine": 83 },
    "type": "lemma",
    "title": "Factorial is Positive",
    "content": "For all $n$, we have $n! > 0$. This is proved by induction: $0! = 1 > 0$, and $(n+1)! = (n+1) \\cdot n!$ is a product of positive numbers.",
    "mathContext": "$\\forall n, n! \\geq 1$",
    "significance": "supporting",
    "relatedConcepts": ["positivity", "induction"]
  },
  {
    "id": "ann-prime-divisor",
    "proofId": "infinitude-primes",
    "range": { "startLine": 85, "endLine": 93 },
    "type": "theorem",
    "title": "Every Number ≥ 2 Has a Prime Divisor",
    "content": "Every integer $n \\geq 2$ has at least one prime divisor. The proof uses **well-ordering**: among all divisors of $n$ that are $\\geq 2$, take the smallest. This minimal divisor must be prime—if it had a proper divisor, that would be an even smaller divisor of $n$.\n\nLean's `Nat.find_min_of_exists` captures this well-ordering argument.",
    "mathContext": "$n \\geq 2 \\Rightarrow \\exists p$ prime, $p \\mid n$\n\nThis is a consequence of the fundamental theorem of arithmetic.",
    "significance": "critical",
    "relatedConcepts": ["well-ordering", "fundamental theorem of arithmetic", "minimal counterexample"]
  },
  {
    "id": "ann-main-theorem",
    "proofId": "infinitude-primes",
    "range": { "startLine": 95, "endLine": 128 },
    "type": "theorem",
    "title": "Euclid's Theorem: Unbounded Primes",
    "content": "**For any $n$, there exists a prime $p > n$.**\n\nThe proof constructs $Q = n! + 1$ and reasons:\n1. $Q \\geq 2$, so $Q$ has a prime divisor $p$\n2. Suppose for contradiction that $p \\leq n$\n3. Then $p \\mid n!$ (since $p$ is a factor in $1 \\cdot 2 \\cdots n$)\n4. But $p \\mid Q = n! + 1$\n5. So $p \\mid (Q - n!) = 1$\n6. **Contradiction**: no prime divides 1\n\nTherefore $p > n$. Since $n$ was arbitrary, primes are unbounded.",
    "mathContext": "$\\forall n, \\exists p$ prime, $p > n$\n\nKey insight: if $p \\mid n!$ and $p \\mid (n!+1)$, then $p \\mid 1$, which is impossible for $p \\geq 2$.",
    "significance": "critical",
    "prerequisites": ["ann-dvd-fact", "ann-one-dvd-one", "ann-prime-divisor"],
    "relatedConcepts": ["Euclid's proof", "constructive existence", "proof by contradiction"]
  },
  {
    "id": "ann-primes-infinite",
    "proofId": "infinitude-primes",
    "range": { "startLine": 130, "endLine": 131 },
    "type": "theorem",
    "title": "Infinitude of Primes (Final Statement)",
    "content": "The theorem `primes_infinite` is simply an alias for `unbounded_primes`, stating the result in a form emphasizing infinitude: for any bound $n$, there exists a prime exceeding it.\n\nThis equivalence shows that 'infinitely many primes' and 'primes are unbounded' are the same statement.",
    "mathContext": "The sequence $2, 3, 5, 7, 11, 13, 17, \\ldots$ never terminates.",
    "significance": "key",
    "relatedConcepts": ["unboundedness", "infinity"]
  }
]

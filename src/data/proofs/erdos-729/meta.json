{
  "id": "erdos-729",
  "title": "Erdős Problem #729: Factorial Divisibility Modulo Small Primes",
  "slug": "erdos-729",
  "description": "Let C > 0. Are there infinitely many (a, b, n) with a + b > n + C·log n such that n!/(a!b!) has denominator with only small primes? Barreto-Leeham proved NO: the bound a + b ≤ n + O(log n) persists even ignoring small primes.",
  "meta": {
    "author": "Barreto-Leeham (solution), Erdős (1968)",
    "sourceUrl": "https://erdosproblems.com/729",
    "date": "2020s",
    "status": "complete",
    "proofRepoPath": "Proofs/Erdos729Problem.lean",
    "tags": [
      "erdos",
      "number-theory",
      "factorials",
      "divisibility",
      "legendre-formula"
    ],
    "badge": "axiom",
    "sorries": 2,
    "erdosNumber": 729,
    "erdosUrl": "https://erdosproblems.com/729",
    "erdosProblemStatus": "solved",
    "mathlibDependencies": [
      {
        "theorem": "Nat.factorial",
        "description": "Factorial function for natural numbers",
        "module": "Mathlib.Data.Nat.Factorial.Basic"
      },
      {
        "theorem": "padicValNat",
        "description": "p-adic valuation of natural numbers",
        "module": "Mathlib.NumberTheory.Padics.PadicVal"
      },
      {
        "theorem": "Real.log",
        "description": "Natural logarithm for growth bounds",
        "module": "Mathlib.Analysis.SpecialFunctions.Log.Basic"
      }
    ],
    "originalContributions": [
      "Formalized factorial divisibility modulo small primes",
      "Axiomatized Barreto-Leeham's extension of Erdős's bound",
      "Connected Legendre's formula to the divisibility constraint",
      "Defined relaxed divisibility allowing small prime factors"
    ]
  },
  "overview": {
    "historicalContext": "Erdős (1968) proved that if a!b! | n! then a + b ≤ n + O(log n), using Legendre's formula with powers of 2. Problem #729 asks whether this bound persists when 'ignoring small primes' in the denominator. Barreto and Leeham proved it does, adapting the technique from Problem #728.",
    "problemStatement": "Let C > 0 be a constant. Are there infinitely many integers a, b, n with a + b > n + C·log n such that the denominator of n!/(a!b!) contains only primes ≪_C 1?",
    "proofStrategy": "The proof extends Erdős's powers-of-2 argument. Legendre's formula gives v_p(n!) = (n - s_p(n))/(p-1) where s_p(n) is the digit sum in base p. The key insight is that large primes contribute substantially to divisibility constraints, making the bound robust to ignoring finitely many small primes.",
    "keyInsights": [
      "Legendre's formula: v_2(n!) = n - s_2(n) where s_2(n) is the binary digit sum",
      "If a!b! | n! then v_p(a!) + v_p(b!) ≤ v_p(n!) for all primes p",
      "The constraint from powers of 2 alone gives a + b ≤ n + O(log n)",
      "Ignoring small primes doesn't weaken this bound—large primes carry the constraint"
    ]
  },
  "sections": [
    {
      "id": "basic-definitions",
      "title": "Basic Definitions",
      "startLine": 35,
      "endLine": 55,
      "summary": "Factorial p-adic valuations, Legendre's formula, and divisibility predicates."
    },
    {
      "id": "erdos-classical",
      "title": "Erdős's Classical Result (1968)",
      "startLine": 57,
      "endLine": 73,
      "summary": "The classical bound: a!b! | n! implies a + b ≤ n + O(log n)."
    },
    {
      "id": "relaxed-condition",
      "title": "The Relaxed Condition",
      "startLine": 75,
      "endLine": 93,
      "summary": "Definitions for divisibility modulo small primes."
    },
    {
      "id": "question",
      "title": "The Question",
      "startLine": 95,
      "endLine": 106,
      "summary": "Formalization of 'infinitely many exceptions' with only small primes in denominator."
    },
    {
      "id": "barreto-leeham",
      "title": "Barreto-Leeham Resolution",
      "startLine": 108,
      "endLine": 122,
      "summary": "The answer is NO: the bound persists even modulo small primes."
    },
    {
      "id": "proof-strategy",
      "title": "Proof Strategy",
      "startLine": 124,
      "endLine": 139,
      "summary": "Connection to Problem #728 and extension of Erdős's argument."
    },
    {
      "id": "legendre-details",
      "title": "Legendre's Formula Details",
      "startLine": 141,
      "endLine": 159,
      "summary": "Detailed p-adic valuation formulas including digit sums."
    },
    {
      "id": "implications",
      "title": "Implications",
      "startLine": 161,
      "endLine": 177,
      "summary": "Factorial structure rigidity and binomial coefficient connections."
    },
    {
      "id": "main-statement",
      "title": "Main Problem Statement",
      "startLine": 179,
      "endLine": 192,
      "summary": "Complete formalization combining classical and extended results."
    },
    {
      "id": "summary",
      "title": "Summary",
      "startLine": 194,
      "endLine": 212,
      "summary": "Summary theorem: the answer is NO, bound persists modulo small primes."
    }
  ],
  "conclusion": {
    "summary": "Erdős Problem #729 is solved negatively: there are NOT infinitely many (a, b, n) with a + b > n + C·log n where the denominator of n!/(a!b!) has only small prime factors. The bound a + b ≤ n + O(log n) is intrinsic to factorial structure.",
    "implications": "The result shows that factorial divisibility constraints come from all primes collectively, not just a few small ones. Large primes carry sufficient information to enforce the logarithmic bound.",
    "openQuestions": [
      "What is the optimal constant in the O(log n) term?",
      "Can the proof be made constructive?",
      "How does the bound behave for specific families of (a, b, n)?"
    ]
  }
}

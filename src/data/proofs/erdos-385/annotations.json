[
  {
    "id": "ann-e385-header",
    "proofId": "erdos-385",
    "range": { "startLine": 1, "endLine": 26 },
    "type": "concept",
    "title": "Problem Overview",
    "content": "**Erdős Problem #385** studies F(n) = max{m + p(m) : m < n, m composite}, where p(m) is the least prime divisor. Two questions: (1) Is F(n) > n for all large n? (2) Does F(n) - n → ∞? Both remain open. Posed by Erdős, Eggleton, and Selfridge.",
    "mathContext": "The function F(n) measures how far composite numbers below n can 'reach beyond' n when augmented by their smallest prime factor. F(10) = 12 via m = 9, p(9) = 3.",
    "significance": "critical",
    "relatedConcepts": ["composite numbers", "least prime divisor", "OEIS A322292"]
  },
  {
    "id": "ann-e385-imports",
    "proofId": "erdos-385",
    "range": { "startLine": 28, "endLine": 36 },
    "type": "concept",
    "title": "Imports and Namespace",
    "content": "**Targeted Mathlib imports** for prime numbers, factorization, finite sets, filters, and real analysis. The namespace Erdos385 encapsulates all definitions.",
    "mathContext": "Uses Nat.minFac for least prime divisor, Filter.atTop for 'eventually' statements, Set.Finite for finiteness results, and Real.sqrt for the conjectured lower bound.",
    "significance": "supporting",
    "relatedConcepts": ["Mathlib", "Lean 4", "namespace"]
  },
  {
    "id": "ann-e385-composite",
    "proofId": "erdos-385",
    "range": { "startLine": 50, "endLine": 51 },
    "type": "definition",
    "title": "Composite Numbers",
    "content": "**A composite number** is an integer greater than 1 that is not prime. These are exactly the numbers with non-trivial factorizations: 4, 6, 8, 9, 10, 12, ... The definition is straightforward: n > 1 ∧ ¬n.Prime.",
    "mathContext": "IsComposite(n) ≡ n > 1 ∧ ¬n.Prime. This captures the standard mathematical definition. The key property for this problem is that composite numbers have a prime divisor ≤ √n.",
    "significance": "key",
    "relatedConcepts": ["primality", "factorization"]
  },
  {
    "id": "ann-e385-least-prime",
    "proofId": "erdos-385",
    "range": { "startLine": 53, "endLine": 75 },
    "type": "definition",
    "title": "Least Prime Divisor",
    "content": "**leastPrimeDivisor(n)** wraps Mathlib's `minFac` to compute the smallest prime dividing n. Two theorems are proved: (1) it is prime for composite inputs, (2) it divides n. The axiom states p(m) ≤ √m for composite m.",
    "mathContext": "For composite n, if p(n) > √n then n/p(n) < √n < p(n), but n/p(n) is a divisor smaller than p(n), contradicting minimality. This is why p(m) ≤ √m, which gives the trivial upper bound F(n) ≤ n + √n.",
    "significance": "critical",
    "relatedConcepts": ["minFac", "prime divisor", "square root bound"]
  },
  {
    "id": "ann-e385-function-f",
    "proofId": "erdos-385",
    "range": { "startLine": 79, "endLine": 94 },
    "type": "definition",
    "title": "The Function F(n)",
    "content": "**F(n)** is the maximum of m + p(m) over all composite m < n, implemented using Finset.sup'. FSet provides an alternative set-based view. F(n) measures how far composite numbers below n can 'reach' when augmented by their smallest prime factor.",
    "mathContext": "F(n) = sup'{m + p(m) : m ∈ Finset.range(n), m composite}. Uses Finset.sup' (nonempty supremum) with a proof that at least one composite exists below n. Returns 0 for small n with no composites below.",
    "significance": "critical",
    "relatedConcepts": ["Finset.sup'", "optimization", "composite structure"]
  },
  {
    "id": "ann-e385-upper-bound",
    "proofId": "erdos-385",
    "range": { "startLine": 98, "endLine": 100 },
    "type": "axiom",
    "title": "Trivial Upper Bound",
    "content": "**F(n) ≤ n + √n** because any composite m < n has p(m) ≤ √m ≤ √(n-1), giving m + p(m) < n + √n. This bound is tight: Erdős conjectured F(n) ≥ n + (1-o(1))√n.",
    "mathContext": "The axiom states F(n) ≤ n + Nat.sqrt(n) for n > 4. The proof would chain leastPrimeDivisor_le_sqrt with the monotonicity of √ and the bound m < n.",
    "significance": "key",
    "relatedConcepts": ["upper bound", "square root", "asymptotic tightness"]
  },
  {
    "id": "ann-e385-question1",
    "proofId": "erdos-385",
    "range": { "startLine": 104, "endLine": 109 },
    "type": "definition",
    "title": "Question 1: F(n) > n Eventually",
    "content": "**Question 1 (OPEN)**: Is F(n) > n for all sufficiently large n? This asks whether for large n, we can always find a composite m < n whose sum with its least prime factor exceeds n. Equivalent to Problem #430.",
    "mathContext": "erdos385Question1 ≡ ∀ᶠ n in atTop, F(n) > n. The 'eventually' quantifier (∀ᶠ in atTop) means there exists N such that F(n) > n for all n ≥ N.",
    "significance": "critical",
    "relatedConcepts": ["eventually", "Filter.atTop", "Problem #430"]
  },
  {
    "id": "ann-e385-question2",
    "proofId": "erdos-385",
    "range": { "startLine": 111, "endLine": 121 },
    "type": "definition",
    "title": "Question 2: F(n) - n → ∞",
    "content": "**Question 2 (OPEN)**: Does F(n) - n → ∞ as n → ∞? This is stronger than Question 1 — not only does F(n) eventually exceed n, but the excess grows without bound.",
    "mathContext": "erdos385Question2 ≡ Tendsto (λ n ↦ (F n : ℤ) - n) atTop atTop. Uses integer subtraction to avoid natural number truncation issues. Question 2 ⟹ Question 1.",
    "significance": "critical",
    "relatedConcepts": ["Tendsto", "divergence", "integer subtraction"]
  },
  {
    "id": "ann-e385-connection430",
    "proofId": "erdos-385",
    "range": { "startLine": 123, "endLine": 132 },
    "type": "concept",
    "title": "Connection to Problem #430",
    "content": "**Sarosh Adenwalla** observed that Question 1 is equivalent to Erdős Problem #430. The axiom q2_implies_q1 records that Question 2 (divergence) is strictly stronger than Question 1 (eventual positivity).",
    "mathContext": "q2_implies_q1 : erdos385Question2 → erdos385Question1. If F(n) - n → ∞ then eventually F(n) - n > 0, i.e., F(n) > n. This is a standard relationship between divergence and eventual positivity.",
    "significance": "key",
    "relatedConcepts": ["Problem #430", "logical implication", "Adenwalla"]
  },
  {
    "id": "ann-e385-lower-bound",
    "proofId": "erdos-385",
    "range": { "startLine": 134, "endLine": 144 },
    "type": "definition",
    "title": "Conjectured Lower Bound",
    "content": "**Conjectured**: F(n) ≥ n + (1 - o(1))√n. This means the upper bound F(n) ≤ n + √n is essentially tight. For any ε > 0, eventually F(n) ≥ n + (1 - ε)√n.",
    "mathContext": "conjecturedLowerBound ≡ ∀ ε > 0, ∀ᶠ n in atTop, (F n : ℝ) ≥ n + (1 - ε)·√n. Uses real-valued arithmetic to express the o(1) term. This is stronger than both questions.",
    "significance": "key",
    "relatedConcepts": ["asymptotic lower bound", "o(1) notation", "real analysis"]
  },
  {
    "id": "ann-e385-examples",
    "proofId": "erdos-385",
    "range": { "startLine": 146, "endLine": 155 },
    "type": "proof",
    "title": "Composite Number Examples",
    "content": "**Concrete verification** that 4, 9, and 6 are composite numbers. These serve as witnesses for the F function: F(10) = 12 is achieved by m = 9 with p(9) = 3, giving 9 + 3 = 12 > 10.",
    "mathContext": "Each proof uses omega for the n > 1 condition and decide for the ¬n.Prime condition. These are fully constructive with no sorry.",
    "significance": "supporting",
    "relatedConcepts": ["decidability", "omega", "concrete verification"]
  },
  {
    "id": "ann-e385-derived",
    "proofId": "erdos-385",
    "range": { "startLine": 169, "endLine": 175 },
    "type": "axiom",
    "title": "Derived: Finite Exceptions",
    "content": "**If Question 1 holds**, then only finitely many n have F(n) ≤ n. This is the contrapositive view: the 'eventually' quantifier means the exceptions form a finite set.",
    "mathContext": "finitely_many_exceptions : erdos385Question1 → {n : ℕ | F n ≤ n}.Finite. This follows from the definition of Filter.Eventually for atTop: eventually P means {n | ¬P n} is bounded.",
    "significance": "key",
    "relatedConcepts": ["finite exceptions", "eventually", "Filter semantics"]
  }
]

[
  {
    "id": "erdos-218-header",
    "proofId": "erdos-218",
    "type": "context",
    "range": { "startLine": 1, "endLine": 30 },
    "title": "Problem Overview",
    "content": "Erdős Problem #218: Let d_n = p_{n+1} - p_n. Conjectures: (1) {n : d_{n+1} ≥ d_n} has density 1/2, (2) {n : d_{n+1} ≤ d_n} has density 1/2, (3) infinitely many n have d_n = d_{n+1}. All three OPEN. Terence Tao: 'looks difficult'.",
    "mathContext": "From Erdős [Er55c], [Er57], [Er61], [Er65b], [Er85c]. Conjecture 3 equivalent to infinitely many 3-term APs of consecutive primes.",
    "significance": "essential",
    "relatedConcepts": ["prime gaps", "natural density", "arithmetic progressions", "Prime Number Theorem"]
  },
  {
    "id": "erdos-218-nthprime",
    "proofId": "erdos-218",
    "type": "definition",
    "range": { "startLine": 43, "endLine": 67 },
    "title": "Prime Enumeration",
    "content": "nthPrime(n) = Nat.nth Nat.Prime n gives the n-th prime (0-indexed). Properties: always prime, strictly increasing. Specific values: nthPrime 0 = 2, nthPrime 1 = 3, nthPrime 2 = 5.",
    "mathContext": "nthPrime n = Nat.nth Nat.Prime n. nthPrime_prime: (nthPrime n).Prime. nthPrime_strictMono: StrictMono nthPrime.",
    "significance": "essential",
    "relatedConcepts": ["Nat.nth", "prime enumeration", "Nat.Prime"]
  },
  {
    "id": "erdos-218-primegap",
    "proofId": "erdos-218",
    "type": "definition",
    "range": { "startLine": 69, "endLine": 100 },
    "title": "Prime Gap Function",
    "content": "primeGap(n) = nthPrime(n+1) - nthPrime(n) = d_n. primeGap_pos: proved (gaps always positive, from strict monotonicity). Specific values: primeGap 0 = 1, primeGap 1 = 2, primeGap 2 = 2, primeGap 3 = 4.",
    "mathContext": "primeGap n = nthPrime(n+1) - nthPrime n. By PNT, average gap ~ log(p_n).",
    "significance": "essential",
    "relatedConcepts": ["prime gaps", "Prime Number Theorem", "natural number subtraction"]
  },
  {
    "id": "erdos-218-density",
    "proofId": "erdos-218",
    "type": "definition",
    "range": { "startLine": 102, "endLine": 126 },
    "title": "Natural Density",
    "content": "HasDensity(S, d): lim_{N→∞} |S ∩ [0,N)| / N = d via Tendsto/nhds. upperDensity via limsup, lowerDensity via liminf. hasDensity_iff_upper_lower: density exists iff upper = lower = d.",
    "mathContext": "HasDensity S d ≡ Tendsto (fun N => (Finset.filter (· ∈ S) (Finset.range N)).card / N) atTop (nhds d).",
    "significance": "essential",
    "relatedConcepts": ["asymptotic density", "Tendsto", "limsup", "liminf"]
  },
  {
    "id": "erdos-218-keysets",
    "proofId": "erdos-218",
    "type": "definition",
    "range": { "startLine": 128, "endLine": 171 },
    "title": "The Key Sets",
    "content": "gapIncreasingSet = {n : d_n ≤ d_{n+1}}. gapDecreasingSet = {n : d_{n+1} ≤ d_n}. gapEqualSet = {n : d_n = d_{n+1}}. gapEqualSet_eq_inter: proved (equal = increasing ∩ decreasing). Examples: 0 ∈ increasing, 1 ∈ equal.",
    "mathContext": "gapEqualSet = gapIncreasingSet ∩ gapDecreasingSet. Proved by le_antisymm.",
    "significance": "essential",
    "relatedConcepts": ["set intersection", "gap comparisons", "le_antisymm"]
  },
  {
    "id": "erdos-218-conjectures",
    "proofId": "erdos-218",
    "type": "conjecture",
    "range": { "startLine": 173, "endLine": 202 },
    "title": "The Three Conjectures (OPEN)",
    "content": "erdos_218a (axiom): HasDensity gapIncreasingSet (1/2). erdos_218b (axiom): HasDensity gapDecreasingSet (1/2). erdos_218c (axiom): gapEqualSet.Infinite. All three remain OPEN.",
    "mathContext": "Conjectures 1+2 together imply gapEqualSet has density 0 (equality rare). Symmetry heuristic supports density 1/2.",
    "significance": "essential",
    "relatedConcepts": ["open problems", "natural density", "symmetry arguments"]
  },
  {
    "id": "erdos-218-ap",
    "proofId": "erdos-218",
    "type": "result",
    "range": { "startLine": 204, "endLine": 235 },
    "title": "Connection to Arithmetic Progressions",
    "content": "threePrimesInAP(n): p_n + p_{n+2} = 2·p_{n+1}. gapEqual_iff_ap (axiom): n ∈ gapEqualSet ↔ threePrimesInAP n. infinitely_many_3ap_from_218c: proved (gapEqualSet.Infinite → apTriples.Infinite, via convert).",
    "mathContext": "d_n = d_{n+1} ⟺ p_n, p_{n+1}, p_{n+2} form an AP. Example: 3, 5, 7 with difference 2.",
    "significance": "essential",
    "relatedConcepts": ["arithmetic progressions", "consecutive primes", "Green-Tao"]
  },
  {
    "id": "erdos-218-greentao",
    "proofId": "erdos-218",
    "type": "context",
    "range": { "startLine": 237, "endLine": 248 },
    "title": "Green-Tao Theorem",
    "content": "green_tao (axiom): For any k, ∃ a d > 0, ∀ i < k, (a + i·d).Prime. This gives arbitrarily long APs of primes, but they need not be consecutive. Does not directly imply Conjecture 3.",
    "mathContext": "Green-Tao (2008) is much stronger than needed but addresses a different question (non-consecutive vs consecutive primes).",
    "significance": "supporting",
    "relatedConcepts": ["Szemerédi's theorem", "additive combinatorics", "arbitrarily long APs"]
  },
  {
    "id": "erdos-218-partial",
    "proofId": "erdos-218",
    "type": "result",
    "range": { "startLine": 250, "endLine": 271 },
    "title": "Partial Results",
    "content": "gapIncreasingSet_infinite (axiom): gaps must increase infinitely often (PNT: gaps grow on average). gapDecreasingSet_infinite (axiom): after large gaps, smaller gaps follow. average_gap_growth (axiom): gap/log(p) bounded.",
    "mathContext": "Both sets infinite, but exact density 1/2 unknown. Whether gapEqualSet is infinite also unknown.",
    "significance": "essential",
    "relatedConcepts": ["Prime Number Theorem", "infinite sets", "gap growth"]
  },
  {
    "id": "erdos-218-symmetry",
    "proofId": "erdos-218",
    "type": "context",
    "range": { "startLine": 273, "endLine": 300 },
    "title": "Symmetry Heuristic and Partition",
    "content": "Heuristic: if gap comparisons were random, density 1/2 for each direction. partition (proved): strictlyIncreasing ∪ strictlyDecreasing ∪ gapEqualSet = Set.univ. The difficulty is that primes have subtle correlations.",
    "mathContext": "partition: proved by cases on Nat.lt_or_ge and le_antisymm. Decomposition of ℕ by gap comparison.",
    "significance": "supporting",
    "relatedConcepts": ["probabilistic models", "prime randomness", "Cramér model"]
  },
  {
    "id": "erdos-218-summary",
    "proofId": "erdos-218",
    "type": "result",
    "range": { "startLine": 302, "endLine": 342 },
    "title": "Summary: OPEN",
    "content": "erdos_218_summary: (gapIncreasingSet.Infinite ∧ gapDecreasingSet.Infinite) ∧ (gapEqualSet.Infinite ↔ apTriples.Infinite). Proved from axioms. erdos_218_open: True (trivial). All three density conjectures remain OPEN.",
    "mathContext": "Summary combines known results: both sets infinite (axioms), equal gaps ↔ 3-term APs (from gapEqual_iff_ap axiom).",
    "significance": "essential",
    "relatedConcepts": ["open problems", "prime gaps", "arithmetic progressions"]
  }
]

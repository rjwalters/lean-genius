{
  "id": "erdos-218",
  "title": "Erdős Problem #218: Prime Gap Densities",
  "slug": "erdos-218",
  "description": "Let d_n = p_{n+1} - p_n be the prime gap. Erdős conjectured that the sets where d_{n+1} ≥ d_n and d_{n+1} ≤ d_n each have density 1/2, and that infinitely many equal gaps d_n = d_{n+1} exist. OPEN.",
  "meta": {
    "author": "Erdős (1955-1985)",
    "sourceUrl": "https://erdosproblems.com/218",
    "status": "formalized",
    "proofRepoPath": "Proofs/Erdos218Problem.lean",
    "tags": [
      "number-theory",
      "prime-gaps",
      "natural-density",
      "arithmetic-progressions",
      "open-problem"
    ],
    "badge": "axiom",
    "sorries": 0,
    "erdosNumber": 218,
    "erdosUrl": "https://erdosproblems.com/218",
    "erdosProblemStatus": "open"
  },
  "overview": {
    "historicalContext": "Erdős Problem #218 studies the local behavior of prime gaps, appearing across papers from 1955-1985. While the Prime Number Theorem describes average gap growth, this problem asks about the statistical distribution of local gap comparisons. Terence Tao assessed this as 'looks difficult'.",
    "problemStatement": "Let d_n = p_{n+1} - p_n. Conjectures: (1) {n : d_{n+1} ≥ d_n} has density 1/2, (2) {n : d_{n+1} ≤ d_n} has density 1/2, (3) infinitely many n have d_n = d_{n+1}. All three remain OPEN. Conjecture 3 is equivalent to infinitely many 3-term APs of consecutive primes.",
    "proofStrategy": "The formalization defines nthPrime (via Nat.nth), primeGap, HasDensity (via Tendsto), and the three key sets (gapIncreasingSet, gapDecreasingSet, gapEqualSet). The three conjectures are axioms. Key proved results: primeGap_pos, gapEqualSet_eq_inter, partition of ℕ by gap comparison. The connection gapEqual ↔ threePrimesInAP is axiomatized. Green-Tao theorem is stated for context.",
    "keyInsights": [
      "d_n = p_{n+1} - p_n measures gaps between consecutive primes",
      "Natural density captures the asymptotic proportion of integers with a property",
      "Equal gaps d_n = d_{n+1} means p_n, p_{n+1}, p_{n+2} form an arithmetic progression",
      "Symmetry heuristic: if gap comparisons were random, density 1/2 would be natural",
      "Primes have subtle correlations that defeat simple probabilistic arguments",
      "Green-Tao gives long APs in primes, but not necessarily of consecutive primes"
    ]
  },
  "sections": [
    {
      "id": "prime-enum",
      "title": "Part 1: Prime Enumeration and Gaps",
      "startLine": 43,
      "endLine": 67,
      "summary": "nthPrime via Nat.nth, nthPrime_prime, nthPrime_strictMono, specific values."
    },
    {
      "id": "prime-gaps",
      "title": "Part 2: Prime Gaps",
      "startLine": 69,
      "endLine": 100,
      "summary": "primeGap definition, primeGap_pos (proved), specific gap values."
    },
    {
      "id": "density",
      "title": "Part 3: Natural Density",
      "startLine": 102,
      "endLine": 126,
      "summary": "HasDensity, upperDensity, lowerDensity definitions."
    },
    {
      "id": "key-sets",
      "title": "Part 4: The Sets of Interest",
      "startLine": 128,
      "endLine": 171,
      "summary": "gapIncreasingSet, gapDecreasingSet, gapEqualSet, gapEqualSet_eq_inter (proved)."
    },
    {
      "id": "conjectures",
      "title": "Part 5: The Conjectures (OPEN)",
      "startLine": 173,
      "endLine": 202,
      "summary": "erdos_218a, erdos_218b, erdos_218c axioms (all OPEN)."
    },
    {
      "id": "ap-connection",
      "title": "Part 6: Connection to Arithmetic Progressions",
      "startLine": 204,
      "endLine": 224,
      "summary": "threePrimesInAP, gapEqual_iff_ap axiom, infinitely_many_3ap_from_218c (proved)."
    },
    {
      "id": "examples",
      "title": "Part 7: Known Examples of Equal Gaps",
      "startLine": 226,
      "endLine": 235,
      "summary": "example_ap_1, apTriples definition, ap_357 axiom."
    },
    {
      "id": "green-tao",
      "title": "Part 8: Connection to Green-Tao",
      "startLine": 237,
      "endLine": 248,
      "summary": "Green-Tao theorem axiom; does not directly imply conjecture 3."
    },
    {
      "id": "partial",
      "title": "Part 9: Partial Results",
      "startLine": 250,
      "endLine": 271,
      "summary": "gapIncreasingSet_infinite, gapDecreasingSet_infinite axioms, average_gap_growth."
    },
    {
      "id": "symmetry",
      "title": "Part 10: Symmetry Argument (Heuristic)",
      "startLine": 273,
      "endLine": 300,
      "summary": "Heuristic for density 1/2, partition theorem (proved)."
    },
    {
      "id": "summary",
      "title": "Part 11: Summary",
      "startLine": 302,
      "endLine": 342,
      "summary": "erdos_218_summary (proved from axioms), erdos_218_open."
    }
  ],
  "conclusion": {
    "summary": "Erdős Problem #218 asks about the natural density of indices where consecutive prime gaps increase, decrease, or stay equal. All three parts remain OPEN. The equal gap conjecture is equivalent to infinitely many 3-term APs of consecutive primes. Green-Tao gives arbitrarily long APs in primes but not necessarily consecutive.",
    "implications": "Understanding local gap behavior versus average behavior of primes. Equal gaps correspond to 3-term APs of consecutive primes. Tests our understanding of pseudo-random behavior of primes.",
    "openQuestions": [
      "Do the sets {n : d_{n+1} ≥ d_n} and {n : d_{n+1} ≤ d_n} have density 1/2?",
      "Are there infinitely many n with d_n = d_{n+1}?",
      "What is the density of the equal gap set (expected to be 0)?",
      "Can Green-Tao methods be adapted to consecutive primes?"
    ]
  }
}

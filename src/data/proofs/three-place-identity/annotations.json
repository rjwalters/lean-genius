[
  {
    "id": "relative-identity-structure",
    "proofId": "three-place-identity",
    "range": {
      "startLine": 52,
      "endLine": 62
    },
    "type": "definition",
    "title": "The RelativeIdentity Structure",
    "content": "This is the core innovation: instead of binary identity x = y, we use a three-place predicate Id(x, y, z) meaning 'x regards y as identical to z.' The key insight is that identity becomes perspectival—different viewpoints x may identify different pairs of objects.",
    "mathContext": "For each fixed x, the relation Id(x, -, -) must satisfy reflexivity, symmetry, and transitivity—making it an equivalence relation. But there's no requirement that these equivalences agree across different viewpoints.",
    "significance": "critical",
    "prerequisites": ["equivalence-relation", "predicate-logic"],
    "relatedConcepts": ["quine-identity", "indistinguishability", "leibniz-law"]
  },
  {
    "id": "mem-from-id",
    "proofId": "three-place-identity",
    "range": {
      "startLine": 106,
      "endLine": 112
    },
    "type": "definition",
    "title": "Bridge D1: Existence as Distinguishability",
    "content": "The first definitional bridge: y ∈' x := ¬Id(x, y, x). This says 'y is a member of x' when 'x does NOT regard y as identical to x itself.' Philosophically stunning: existence is derived from distinguishability from non-existence!",
    "mathContext": "The viewpoint x serves as an 'ontological origin.' What exists for x is precisely what x distinguishes from the undifferentiated background (x itself playing the role of 'nothing'). This formalizes Rota's 'identity precedes existence.'",
    "significance": "critical",
    "prerequisites": ["relative-identity-structure"],
    "relatedConcepts": ["ontology", "existence", "rota-primacy"]
  },
  {
    "id": "mem-from-id-irrefl",
    "proofId": "three-place-identity",
    "range": {
      "startLine": 118,
      "endLine": 123
    },
    "type": "theorem",
    "title": "Automatic Foundation",
    "content": "A beautiful consequence: in the derived membership, x never contains itself! This follows automatically from the reflexivity of relative identity: Id(x, x, x) always holds, so ¬Id(x, x, x) is always false.",
    "mathContext": "This means D1 automatically produces membership relations satisfying the Foundation axiom. The identity axioms encode well-foundedness for free.",
    "significance": "key",
    "prerequisites": ["mem-from-id", "relative-identity-structure"],
    "relatedConcepts": ["foundation-axiom", "well-founded", "regularity"]
  },
  {
    "id": "id-from-mem",
    "proofId": "three-place-identity",
    "range": {
      "startLine": 144,
      "endLine": 150
    },
    "type": "definition",
    "title": "Bridge D2: Identity from Membership Status",
    "content": "The second bridge: Id∈(x, y, z) := (y ∈ x ∧ z ∈ x) ∨ (¬y ∈ x ∧ ¬z ∈ x). This says 'x regards y and z as identical' when they have the same membership status in x—either both members or both non-members.",
    "mathContext": "This connects directly to Quine's insight: identity within a language is indistinguishability with respect to that language's predicates. Here the predicate is 'member of x', and the viewpoint x determines which predicate matters.",
    "significance": "critical",
    "prerequisites": ["set-membership"],
    "relatedConcepts": ["quine-identity", "indiscernibility", "leibniz-law"]
  },
  {
    "id": "id-from-mem-iff",
    "proofId": "three-place-identity",
    "range": {
      "startLine": 153,
      "endLine": 165
    },
    "type": "lemma",
    "title": "Same Status Characterization",
    "content": "We prove Id∈(x, y, z) ↔ (y ∈ x ↔ z ∈ x). This elegant characterization shows that D2-identity is exactly biconditional membership: y and z are identified by x iff they have logically equivalent membership in x.",
    "mathContext": "The proof uses case analysis on whether y ∈ x. This characterization makes the connection to Quine explicit and simplifies later reasoning.",
    "significance": "supporting",
    "prerequisites": ["id-from-mem"],
    "relatedConcepts": ["biconditional", "logical-equivalence"]
  },
  {
    "id": "d2-preserves-reflexivity",
    "proofId": "three-place-identity",
    "range": {
      "startLine": 180,
      "endLine": 185
    },
    "type": "tactic",
    "title": "Reflexivity from Excluded Middle",
    "content": "To show Id∈(x, y, y) for any x, y: either y ∈ x or ¬y ∈ x (excluded middle). In the first case, y ∈ x ∧ y ∈ x holds; in the second, ¬y ∈ x ∧ ¬y ∈ x holds. Either way, the disjunction is satisfied.",
    "mathContext": "This uses classical logic essentially. In intuitionistic logic, we couldn't assume y ∈ x ∨ ¬y ∈ x without proof. The classical setting is appropriate for ZF foundations.",
    "significance": "supporting",
    "prerequisites": ["excluded-middle", "classical-logic"],
    "relatedConcepts": ["law-of-excluded-middle", "classical-vs-intuitionistic"]
  },
  {
    "id": "d2-preserves-transitivity",
    "proofId": "three-place-identity",
    "range": {
      "startLine": 193,
      "endLine": 210
    },
    "type": "tactic",
    "title": "Transitivity by Case Analysis",
    "content": "The transitivity proof is the most intricate. Given Id∈(x, y, z) and Id∈(x, z, w), we case-split on which disjunct holds for each. Two cases lead to contradictions (z is both member and non-member), and two cases give the result directly.",
    "mathContext": "The four cases: (both,both), (both,neither), (neither,both), (neither,neither). The middle two are impossible by consistency. This is a nice example of exhaustive case analysis in Lean.",
    "significance": "key",
    "prerequisites": ["case-analysis", "propositional-logic"],
    "relatedConcepts": ["case-split", "proof-by-cases"]
  },
  {
    "id": "foundation-axiom",
    "proofId": "three-place-identity",
    "range": {
      "startLine": 224,
      "endLine": 232
    },
    "type": "definition",
    "title": "The Foundation (Regularity) Axiom",
    "content": "ZF's Foundation axiom: ∀x. ¬(x ∈ x). No set is a member of itself. This seems like a technical detail but is ESSENTIAL for the round-trip theorem. Without it, the mutual interpretability breaks down.",
    "mathContext": "Foundation ensures x can serve as a 'null element'—something that genuinely contains nothing. In non-well-founded set theories (like Aczel's AFA), the round-trip fails, suggesting a deep connection between well-foundedness and the identity-membership duality.",
    "significance": "critical",
    "prerequisites": ["zf-set-theory"],
    "relatedConcepts": ["regularity", "well-founded-sets", "aczel-afa"]
  },
  {
    "id": "round-trip-theorem",
    "proofId": "three-place-identity",
    "range": {
      "startLine": 255,
      "endLine": 280
    },
    "type": "theorem",
    "title": "The Round-Trip Theorem",
    "content": "THE key theorem: starting from membership ∈, going to identity via D2, then back to membership via D1, we recover the original: ∈' ↔ ∈. This establishes that identity and membership are mutually interpretable.",
    "mathContext": "The proof expands definitions and uses Foundation crucially. The expression simplifies because x ∉ x (by Foundation), making the 'y ∈ x ∧ x ∈ x' disjunct always false. What remains is ¬(¬y ∈ x), which is just y ∈ x.",
    "significance": "critical",
    "prerequisites": ["mem-from-id", "id-from-mem", "foundation-axiom"],
    "relatedConcepts": ["mutual-interpretability", "definitional-equivalence"]
  },
  {
    "id": "round-trip-foundation-use",
    "proofId": "three-place-identity",
    "range": {
      "startLine": 265,
      "endLine": 268
    },
    "type": "insight",
    "title": "Why Foundation is Essential",
    "content": "The line 'have foundation_x : ¬ M.mem x x := M.foundation x' is where Foundation enters. Without it, we couldn't simplify '(y ∈ x ∧ x ∈ x) ∨ (¬y ∈ x ∧ ¬x ∈ x)'. The first disjunct might be satisfiable!",
    "mathContext": "This is why the theorem fails for non-well-founded set theories. If we allow x ∈ x, then x identifies y with x when y ∈ x (both are members), breaking the intended semantics.",
    "significance": "key",
    "prerequisites": ["foundation-axiom"],
    "relatedConcepts": ["non-well-founded-sets", "aczel-afa"]
  },
  {
    "id": "tauto-proof",
    "proofId": "three-place-identity",
    "range": {
      "startLine": 283,
      "endLine": 288
    },
    "type": "tactic",
    "title": "The Power of tauto",
    "content": "The alternative proof using 'tauto' is remarkably short: just unfold definitions, introduce the Foundation hypothesis, and let the tautology checker handle the rest. This demonstrates that the core logic is purely propositional.",
    "mathContext": "The 'tauto' tactic in Lean handles classical propositional logic automatically. Once we have ¬(x ∈ x) as a hypothesis, the equivalence MemFromId ↔ mem is a propositional tautology.",
    "significance": "supporting",
    "prerequisites": ["propositional-logic", "lean-tactics"],
    "relatedConcepts": ["tauto-tactic", "decision-procedures"]
  },
  {
    "id": "universality-theorem",
    "proofId": "three-place-identity",
    "range": {
      "startLine": 324,
      "endLine": 327
    },
    "type": "theorem",
    "title": "The Universality Theorem",
    "content": "The culmination: identity theory can express all of mathematics. Since ZF is a universal foundation and derived membership ∈' is equivalent to original ∈, any ZF axiom true of ∈ is equally true of ∈'. Identity theory + ZF-on-∈' is consistent.",
    "mathContext": "This is a meta-theorem: it says identity theory is 'open-ended' in Etter's terminology—capable of expressing any mathematical structure. The three-place identity predicate, with its minimal axioms, suffices for all of mathematics.",
    "significance": "critical",
    "prerequisites": ["round-trip-theorem", "zf-set-theory"],
    "relatedConcepts": ["foundational-adequacy", "interpretability", "relative-consistency"]
  },
  {
    "id": "trivial-identity",
    "proofId": "three-place-identity",
    "range": {
      "startLine": 392,
      "endLine": 397
    },
    "type": "definition",
    "title": "Example: Trivial Identity",
    "content": "The trivial identity identifies everything with everything from every viewpoint: Id(x,y,z) = True always. This satisfies the axioms vacuously but is philosophically uninteresting—there's no distinguishing power.",
    "mathContext": "The derived membership from trivial identity would be: y ∈' x iff ¬True, i.e., never. So the trivial identity induces empty membership—nothing exists for anyone.",
    "significance": "supporting",
    "prerequisites": ["relative-identity-structure"],
    "relatedConcepts": ["trivial-examples", "degenerate-cases"]
  },
  {
    "id": "discrete-identity",
    "proofId": "three-place-identity",
    "range": {
      "startLine": 400,
      "endLine": 406
    },
    "type": "definition",
    "title": "Example: Discrete Identity",
    "content": "The discrete identity identifies only reflexively: Id(x,y,z) iff y = z (ignoring the viewpoint x). This is the 'maximally distinguishing' case—everything that could be different is different.",
    "mathContext": "Interestingly, discrete identity also induces empty derived membership! Since Id(x,y,x) iff y = x, we have y ∈' x iff y ≠ x... but wait, that's non-empty. Let me reconsider—the proof shows ¬MemFromId for x itself.",
    "significance": "supporting",
    "prerequisites": ["relative-identity-structure", "decidable-equality"],
    "relatedConcepts": ["discrete-topology", "hausdorff-spaces"]
  },
  {
    "id": "natural-number-example",
    "proofId": "three-place-identity",
    "range": {
      "startLine": 414,
      "endLine": 427
    },
    "type": "theorem",
    "title": "Example: Natural Numbers with <",
    "content": "A concrete example: define y ∈ x as y < x on natural numbers. This satisfies Foundation (no n < n), so we can apply the round-trip theorem. The derived membership from the induced identity recovers y < x exactly.",
    "mathContext": "This shows the theorem isn't just abstract: it works on familiar mathematical structures. The natural numbers with their usual ordering form a well-founded membership structure.",
    "significance": "supporting",
    "prerequisites": ["natural-numbers", "well-founded-ordering"],
    "relatedConcepts": ["von-neumann-ordinals", "membership-as-ordering"]
  }
]

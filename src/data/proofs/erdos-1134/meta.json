{
  "id": "erdos-1134",
  "title": "Erdős Problem #1134: Density of Sets Closed Under Affine Maps",
  "slug": "erdos-1134",
  "description": "Let A ⊆ ℕ be the smallest set containing 1 and closed under x ↦ 2x+1, x ↦ 3x+1, and x ↦ 6x+1. Does A have positive lower density? Answer: NO.",
  "meta": {
    "author": "Crampin-Hilton",
    "sourceUrl": "https://erdosproblems.com/1134",
    "date": "1972",
    "status": "complete",
    "proofRepoPath": "Proofs/Erdos1134Problem.lean",
    "tags": ["erdos", "density", "affine-maps", "recursively-defined-sets", "number-theory"],
    "badge": "axiom",
    "sorries": 2,
    "erdosNumber": 1134,
    "erdosUrl": "https://erdosproblems.com/1134",
    "erdosProblemStatus": "solved",
    "mathlib_version": "4.15.0",
    "mathlibDependencies": [
      { "theorem": "Finset.card", "description": "Cardinality of finite sets for counting function", "module": "Mathlib.Data.Finset.Card" },
      { "theorem": "Set", "description": "Basic set theory for defining A", "module": "Mathlib.Data.Set.Basic" },
      { "theorem": "Real.log", "description": "Logarithm function for asymptotic bounds", "module": "Mathlib.Analysis.SpecialFunctions.Log.Basic" },
      { "theorem": "tsum", "description": "Infinite sums for the characteristic equation", "module": "Mathlib.Topology.Algebra.InfiniteSum.Basic" }
    ],
    "originalContributions": [
      "f₁, f₂, f₃: the three affine operations",
      "InA: inductive definition of the set A",
      "countingFunction: |S ∩ [1, X]|",
      "lowerDensity, upperDensity: asymptotic density definitions",
      "klarner_rado_1974: general upper bound axiom",
      "τ: Crampin-Hilton exponent ≈ 0.900626",
      "crampin_hilton_theorem: |A ∩ [1,X]| ≍ X^τ",
      "A': Klarner's open variant"
    ],
    "dateAdded": "2026-01-19"
  },
  "overview": {
    "historicalContext": "Erdős asked this problem in 1972, offering £10 for a solution. Lagarias reports that the problem may have been formulated by Klarner, but Erdős liked it and promoted it. The problem is connected to Collatz-type iterations and Klarner's work on affine semigroups. It was solved soon afterwards by Crampin and Hilton.",
    "problemStatement": "**Problem Statement (SOLVED: NO)**\n\nLet A ⊆ ℕ be the smallest set containing 1 and closed under:\n- x ↦ 2x+1\n- x ↦ 3x+1\n- x ↦ 6x+1\n\n**Question:** Does A have positive lower density?\n\n**Answer:** NO. Crampin-Hilton proved |A ∩ [1,X]| ≪ X^{τ+o(1)} where τ ≈ 0.900626 < 1.",
    "proofStrategy": "The Klarner-Rado general bound gives |A ∩ [1,X]| ≪ X^{σ+o(1)} where σ satisfies Σ 1/mᵢ^σ = 1. For this problem, 1/2 + 1/3 + 1/6 = 1 gives the trivial σ = 1. Crampin-Hilton exploited the special structure of the operations to prove a sharper bound with exponent τ ≈ 0.900626 < 1, showing the density is 0.",
    "keyInsights": [
      "**Klarner-Rado Bound:** Σ 1/mᵢ^σ = 1 gives σ = 1, which is trivial",
      "**Crampin-Hilton:** True exponent is τ ≈ 0.900626 < 1",
      "**Characteristic Equation:** 6^{-τ} + Σ_{k≥0} (3·2^k)^{-τ} = 1",
      "**Since τ < 1:** |A ∩ [1,X]|/X → 0, so density is 0",
      "**Open Variant:** Klarner's A' with operations 2x, 3x+2, 6x+3 remains unsolved",
      "**Connection:** Related to Collatz problem via affine map iterations"
    ]
  },
  "sections": [
    {
      "id": "basic-definitions",
      "title": "Basic Definitions",
      "startLine": 34,
      "endLine": 65,
      "summary": "Defines f₁, f₂, f₃ and the inductively-defined set A"
    },
    {
      "id": "density-definitions",
      "title": "Density Definitions",
      "startLine": 67,
      "endLine": 87,
      "summary": "Counting function, lower/upper density, positive density"
    },
    {
      "id": "klarner-rado",
      "title": "Klarner-Rado General Bound",
      "startLine": 89,
      "endLine": 114,
      "summary": "General upper bound and why it gives trivial σ = 1 here"
    },
    {
      "id": "crampin-hilton",
      "title": "Crampin-Hilton Improvement",
      "startLine": 116,
      "endLine": 137,
      "summary": "The sharp exponent τ ≈ 0.900626 and the main theorem"
    },
    {
      "id": "main-result",
      "title": "Main Result",
      "startLine": 139,
      "endLine": 157,
      "summary": "A does NOT have positive lower density"
    },
    {
      "id": "structure-of-A",
      "title": "Structure of A",
      "startLine": 159,
      "endLine": 184,
      "summary": "Elements as compositions, first few elements: 1, 3, 4, 7, ..."
    },
    {
      "id": "crampin-hilton-insight",
      "title": "Why Crampin-Hilton Works",
      "startLine": 186,
      "endLine": 203,
      "summary": "Algebraic structure and characteristic equation"
    },
    {
      "id": "collatz-connection",
      "title": "Connection to 3x+1",
      "startLine": 205,
      "endLine": 221,
      "summary": "Lagarias's connection to Collatz-type iterations"
    },
    {
      "id": "open-variants",
      "title": "Open Variants",
      "startLine": 223,
      "endLine": 248,
      "summary": "Klarner's A' containing 0, closed under 2x, 3x+2, 6x+3"
    },
    {
      "id": "main-statement",
      "title": "Main Problem Statement",
      "startLine": 250,
      "endLine": 290,
      "summary": "Complete formalization and summary theorems"
    }
  ],
  "conclusion": {
    "summary": "Erdős Problem #1134 is SOLVED with answer NO. The set A closed under x ↦ 2x+1, x ↦ 3x+1, x ↦ 6x+1 does not have positive lower density. Crampin-Hilton proved |A ∩ [1,X]| ≪ X^{τ+o(1)} where τ ≈ 0.900626 < 1.",
    "implications": "The result shows that even though 1/2 + 1/3 + 1/6 = 1 (which gives a trivial Klarner-Rado bound), the special structure of these operations allows stronger analysis. This connects to the broader study of affine semigroups and Collatz-type problems.",
    "openQuestions": [
      "Does Klarner's variant A' (containing 0, closed under 2x, 3x+2, 6x+3) have positive density?",
      "What is the exact constant in the X^τ growth rate?",
      "How do similar problems behave for other choices of affine maps?"
    ]
  }
}

{
  "id": "erdos-132",
  "title": "Erdős Problem #132: Distance Multiplicities in Planar Point Sets",
  "slug": "erdos-132",
  "description": "Given n points in ℝ², must there exist two distances that each occur at most n times? True for n=5,6 (Erdős-Fishburn 1995) and convex position (CDL 2025), but OPEN for general n≥7.",
  "meta": {
    "author": "Erdős-Pach (problem), Hopf-Pannwitz (1934), Erdős-Fishburn (1995), Clemen-Dumitrescu-Liu (2025)",
    "sourceUrl": "https://erdosproblems.com/132",
    "date": "2025",
    "status": "complete",
    "proofRepoPath": "Proofs/Erdos132Problem.lean",
    "tags": [
      "erdos",
      "discrete-geometry",
      "distance-problems",
      "combinatorial-geometry",
      "planar-point-sets",
      "open-problem"
    ],
    "badge": "axiom",
    "sorries": 3,
    "erdosNumber": 132,
    "erdosUrl": "https://erdosproblems.com/132",
    "erdosProblemStatus": "open",
    "erdosPrizeValue": "$100",
    "dateAdded": "2026-01-19",
    "mathlib_version": "4.15.0",
    "mathlibDependencies": [
      {
        "theorem": "EuclideanSpace",
        "description": "Finite-dimensional real inner product space",
        "module": "Mathlib.Analysis.InnerProductSpace.PiL2"
      },
      {
        "theorem": "Finset.powerset",
        "description": "Powerset of a finite set",
        "module": "Mathlib.Data.Finset.Powerset"
      },
      {
        "theorem": "convexHull",
        "description": "Convex hull of a set",
        "module": "Mathlib.Analysis.Convex.Hull"
      },
      {
        "theorem": "norm",
        "description": "Norm function for distance calculations",
        "module": "Mathlib.Analysis.Normed.Field.Basic"
      }
    ],
    "originalContributions": [
      "Point type: EuclideanSpace ℝ (Fin 2) for planar points",
      "dist definition: Euclidean distance via norm",
      "pairsAtDistance: pairs at given distance",
      "multiplicity: count of pairs at distance d",
      "isRareDistance: distance occurring 1 to n times",
      "countRareDistances: number of rare distances",
      "erdos132_question1/2: formal problem statements",
      "hopf_pannwitz axiom: max distance ≤ n occurrences",
      "at_least_one_rare theorem: corollary of Hopf-Pannwitz",
      "counterexample_n4 axiom: n=4 counterexample",
      "erdos132_false_for_4 theorem: proves n=4 fails",
      "erdos_fishburn_5/6 axioms: n=5,6 results",
      "inConvexPosition definition: convex hull condition",
      "clemen_dumitrescu_liu_convex axiom: convex case result",
      "unit_distance_bound: O(n^{4/3}) bound",
      "guth_katz_distinct_distances: Ω(n/log n) distinct distances",
      "erdos_132_summary theorem: combines all known results"
    ]
  },
  "overview": {
    "historicalContext": "**Erdős Problem #132**\n\nThis problem concerns 'rare distances' in finite planar point sets.\n\n**Key History:**\n- Hopf-Pannwitz (1934): Maximum distance occurs ≤ n times\n- Erdős-Pach: Posed the question about a second rare distance\n- Erdős-Fishburn (1995): Proved for n=5,6\n- Clemen-Dumitrescu-Liu (2025): Proved for convex position\n\n**The Prize:**\nErdős offered $100 for 'any nontrivial result' on this problem.\n\n**Related Problems:**\nConnected to the distinct distances problem (Erdős) and the unit distance problem.",
    "problemStatement": "**Problem Statement (Open)**\n\nLet A ⊂ ℝ² be a set of n points.\n\n**Question 1:** Must there exist two distances that each occur at least once but at most n times?\n\n**Question 2:** Does the count of such 'rare' distances → ∞ as n → ∞?\n\n**Known Results:**\n- n = 4: FALSE (two equilateral triangles counterexample)\n- n = 5, 6: TRUE (Erdős-Fishburn 1995)\n- Convex position: TRUE (Clemen-Dumitrescu-Liu 2025)\n- General n ≥ 7: OPEN\n\n**Conjecture:** At least n^{1-o(1)} rare distances exist.",
    "proofStrategy": "**Formalization Approach**\n\n1. **Point Representation:** Use EuclideanSpace ℝ (Fin 2) from Mathlib\n\n2. **Key Definitions:**\n   - multiplicity: count pairs at distance d\n   - isRareDistance: d occurs 1 to n times\n   - inConvexPosition: no point in convex hull of others\n\n3. **Known Results:**\n   - hopf_pannwitz: maximum distance is rare\n   - counterexample_n4: n=4 fails\n   - erdos_fishburn_5/6: small cases work\n   - clemen_dumitrescu_liu_convex: convex case works\n\n4. **Related Bounds:**\n   - Unit distance O(n^{4/3}) upper bound\n   - Guth-Katz Ω(n/log n) distinct distances",
    "keyInsights": [
      "**Hopf-Pannwitz Foundation:** Maximum distance gives ONE rare distance",
      "**The Challenge:** Finding a SECOND rare distance is hard",
      "**n=4 Counterexample:** Two equilateral triangles joined - only max is rare",
      "**Convex Position:** Boundary points are easier to analyze",
      "**Unit Distance Connection:** Spencer-Szemerédi-Trotter O(n^{4/3}) bound",
      "**Distinct Distances:** Guth-Katz Ω(n/log n) lower bound relevant",
      "**Open Since 1980s:** Despite Erdős calling it 'not very difficult'"
    ]
  },
  "sections": [
    {
      "id": "basic-definitions",
      "title": "Basic Definitions",
      "summary": "Point type, dist function, dist_symm, dist_nonneg",
      "startLine": 42,
      "endLine": 68
    },
    {
      "id": "distance-multiplicity",
      "title": "Distance Multiplicity",
      "summary": "pairsAtDistance, multiplicity, distancesOccurring",
      "startLine": 70,
      "endLine": 93
    },
    {
      "id": "rare-distances",
      "title": "Rare Distances",
      "summary": "isRareDistance, countRareDistances, erdos132_question1/2",
      "startLine": 95,
      "endLine": 135
    },
    {
      "id": "hopf-pannwitz",
      "title": "Hopf-Pannwitz Theorem",
      "summary": "maxDistance, hopf_pannwitz axiom, at_least_one_rare theorem",
      "startLine": 137,
      "endLine": 167
    },
    {
      "id": "counterexample",
      "title": "Counterexample for n=4",
      "summary": "counterexample_n4, erdos132_false_for_4 theorem",
      "startLine": 169,
      "endLine": 204
    },
    {
      "id": "positive-results",
      "title": "Positive Results",
      "summary": "erdos_fishburn_5, erdos_fishburn_6 for small n",
      "startLine": 206,
      "endLine": 224
    },
    {
      "id": "convex-position",
      "title": "Convex Position",
      "summary": "inConvexPosition, clemen_dumitrescu_liu_convex axiom",
      "startLine": 226,
      "endLine": 257
    },
    {
      "id": "related-bounds",
      "title": "Related Bounds",
      "summary": "distinctDistances, unit_distance_bound, guth_katz_distinct_distances",
      "startLine": 259,
      "endLine": 285
    },
    {
      "id": "difficulty",
      "title": "Why This Is Hard",
      "summary": "open_problem_difficulty, erdos_conjectured_bound",
      "startLine": 287,
      "endLine": 310
    },
    {
      "id": "summary",
      "title": "Summary",
      "summary": "erdos_132_summary combining all results, erdos_132 main theorem",
      "startLine": 312,
      "endLine": 356
    }
  ],
  "conclusion": {
    "summary": "Erdős Problem #132 asks whether n points in ℝ² must have at least two 'rare' distances (occurring 1 to n times). Hopf-Pannwitz (1934) showed the maximum is rare, but a second rare distance is harder to find. The problem is FALSE for n=4 (counterexample) but TRUE for n=5,6 (Erdős-Fishburn) and convex position (Clemen-Dumitrescu-Liu 2025). The general case for n≥7 remains OPEN with a $100 prize.",
    "implications": "**Connections and Impact**\n\n1. **Distinct Distances:** Related to Erdős's famous conjecture (resolved by Guth-Katz)\n\n2. **Unit Distance Problem:** The O(n^{4/3}) bound constrains multiplicity\n\n3. **Combinatorial Geometry:** Fundamental question about point configurations\n\n4. **Convex Geometry:** Convex position case suggests boundary structure matters\n\n5. **Extremal Combinatorics:** Understanding distance distribution structure",
    "openQuestions": [
      "Does every n ≥ 7 point set have two rare distances?",
      "Are there n^{1-o(1)} rare distances as Erdős conjectured?",
      "What is the precise threshold between n=4 (fails) and n=5 (works)?",
      "Can the convex position proof be extended to general position?",
      "What point configurations minimize rare distances?"
    ]
  }
}

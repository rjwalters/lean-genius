[
  {
    "id": "ann-e476-header",
    "proofId": "erdos-476",
    "range": { "startLine": 1, "endLine": 29 },
    "type": "concept",
    "title": "Problem Overview",
    "content": "**Erd≈ës Problem #476: The Erd≈ës-Heilbronn Conjecture**\n\nFor a subset A of the finite field ùîΩ‚Çö, define the **restricted sumset**:\n  A +ÃÇ A = {a + b : a ‚â† b ‚àà A}\n\nThis excludes \"diagonal\" sums a + a = 2a.\n\n**Question:** Is |A +ÃÇ A| ‚â• min(2|A| - 3, p)?\n\n**Answer:** YES (da Silva-Hamidoune, 1994)",
    "mathContext": "The ordinary Cauchy-Davenport theorem gives |A + A| ‚â• min(2|A| - 1, p). Excluding diagonals costs 2 elements.",
    "significance": "critical",
    "relatedConcepts": ["Additive combinatorics", "Finite fields", "Sumsets"]
  },
  {
    "id": "ann-e476-restricted-def",
    "proofId": "erdos-476",
    "range": { "startLine": 49, "endLine": 54 },
    "type": "definition",
    "title": "Restricted Sumset Definition",
    "content": "**restrictedSumset A:**\n\nThe set of all sums a + b where a and b are DISTINCT elements of A.\n\n**Implementation:**\n```lean\ndef restrictedSumset (A : Finset (ZMod p)) : Finset (ZMod p) :=\n  (A.product A).filter (fun ab => ab.1 ‚â† ab.2)\n    |>.image (fun ab => ab.1 + ab.2)\n```\n\nFilter out pairs (a, a), then take sums.",
    "mathContext": "The notation A +ÃÇ A is standard in additive combinatorics.",
    "significance": "critical",
    "relatedConcepts": ["Sumsets", "Cartesian product", "Filter"]
  },
  {
    "id": "ann-e476-sumset-def",
    "proofId": "erdos-476",
    "range": { "startLine": 61, "endLine": 66 },
    "type": "definition",
    "title": "Ordinary Sumset Definition",
    "content": "**sumset A:**\n\nThe ordinary sumset A + A includes ALL sums a + b, including a = b.\n\n```lean\ndef sumset (A : Finset (ZMod p)) : Finset (ZMod p) :=\n  (A.product A).image (fun ab => ab.1 + ab.2)\n```\n\nBy Cauchy-Davenport: |A + A| ‚â• min(2|A| - 1, p).",
    "significance": "key",
    "relatedConcepts": ["Cauchy-Davenport", "Sumsets"]
  },
  {
    "id": "ann-e476-subset",
    "proofId": "erdos-476",
    "range": { "startLine": 72, "endLine": 80 },
    "type": "theorem",
    "title": "Restricted Subset of Ordinary",
    "content": "**restrictedSumset_subset_sumset:**\n\nA +ÃÇ A ‚äÜ A + A\n\nEvery sum of distinct elements is also a sum (possibly equal). The restricted sumset is always contained in the ordinary sumset.",
    "significance": "supporting",
    "relatedConcepts": ["Subset relation", "Sumsets"]
  },
  {
    "id": "ann-e476-singleton",
    "proofId": "erdos-476",
    "range": { "startLine": 82, "endLine": 87 },
    "type": "theorem",
    "title": "Singleton Restricted Sumset",
    "content": "**restrictedSumset_singleton:**\n\n{a} +ÃÇ {a} = ‚àÖ\n\nA singleton has no pairs of distinct elements, so its restricted sumset is empty. This is the edge case where the bound 2|A| - 3 = -1 would be negative.",
    "significance": "supporting",
    "relatedConcepts": ["Edge cases", "Singleton sets"]
  },
  {
    "id": "ann-e476-main-bound",
    "proofId": "erdos-476",
    "range": { "startLine": 103, "endLine": 119 },
    "type": "axiom",
    "title": "The Erd≈ës-Heilbronn Bound",
    "content": "**erdos_heilbronn_bound:**\n\nFor any A ‚äÜ ùîΩ‚Çö with |A| ‚â• 2:\n  |A +ÃÇ A| ‚â• min(2|A| - 3, p)\n\n**erdos_476:**\nThe main theorem directly follows from this axiom.\n\nThis bound is TIGHT - arithmetic progressions achieve exactly 2|A| - 3 elements.",
    "mathContext": "The proof uses exterior algebra (Grassmann derivatives) or the polynomial method.",
    "significance": "critical",
    "relatedConcepts": ["Additive combinatorics", "Lower bounds"]
  },
  {
    "id": "ann-e476-da-silva",
    "proofId": "erdos-476",
    "range": { "startLine": 127, "endLine": 136 },
    "type": "axiom",
    "title": "Da Silva-Hamidoune Theorem",
    "content": "**da_silva_hamidoune (1994):**\n\nThe original proof uses **exterior algebra** over ùîΩ‚Çö.\n\n**Key Idea:**\nConsider the Grassmann (exterior) algebra ‚ãÄ(ùîΩ‚Çö‚Åø). The k-th derivative of a polynomial relates to k-fold sums. By tracking dimensions in this algebra, one obtains the lower bound.\n\nThis approach connects combinatorics to advanced linear algebra.",
    "mathContext": "Grassmann derivatives generalize ordinary derivatives to wedge products.",
    "significance": "critical",
    "relatedConcepts": ["Exterior algebra", "Linear algebra", "Grassmann derivatives"]
  },
  {
    "id": "ann-e476-ap",
    "proofId": "erdos-476",
    "range": { "startLine": 144, "endLine": 169 },
    "type": "theorem",
    "title": "Tightness via Arithmetic Progressions",
    "content": "**arithmeticProgression:**\n\nA = {a, a+d, a+2d, ..., a+(n-1)d} in ùîΩ‚Çö.\n\n**AP_restrictedSumset:**\nFor this A with d ‚â† 0:\n  A +ÃÇ A = {2a+d, 2a+2d, ..., 2a+(2n-3)d}\n\nThis has exactly 2n - 3 elements (when small enough).\n\nSo the bound min(2|A| - 3, p) is TIGHT - we cannot improve it.",
    "mathContext": "APs are the extremal examples for many sumset problems.",
    "significance": "key",
    "relatedConcepts": ["Arithmetic progressions", "Extremal examples", "Tightness"]
  },
  {
    "id": "ann-e476-cauchy",
    "proofId": "erdos-476",
    "range": { "startLine": 183, "endLine": 196 },
    "type": "axiom",
    "title": "Comparison with Cauchy-Davenport",
    "content": "**cauchy_davenport:**\n\nFor nonempty A, B ‚äÜ ùîΩ‚Çö:\n  |A + B| ‚â• min(|A| + |B| - 1, p)\n\n**Comparison:**\n- Ordinary: |A + A| ‚â• min(2|A| - 1, p)\n- Restricted: |A +ÃÇ A| ‚â• min(2|A| - 3, p)\n\nThe difference of 2 reflects the exclusion of diagonal sums.",
    "mathContext": "Cauchy-Davenport is fundamental in additive combinatorics, proved in 1813/1935.",
    "significance": "key",
    "relatedConcepts": ["Cauchy-Davenport", "Sumset inequalities"]
  },
  {
    "id": "ann-e476-polynomial",
    "proofId": "erdos-476",
    "range": { "startLine": 205, "endLine": 222 },
    "type": "axiom",
    "title": "The Polynomial Method",
    "content": "**Combinatorial Nullstellensatz (Alon, 1999):**\n\nA powerful tool: if a polynomial f has a leading monomial with nonzero coefficient, then f is nonzero on a sufficiently large grid.\n\n**ANR Proof (1995):**\nAlon, Nathanson, and Ruzsa gave an alternative proof of Erd≈ës-Heilbronn using this method.\n\nConstruct f(x,y) = ‚àè_{c ‚àâ A+ÃÇA} (x + y - c) and analyze its coefficients.",
    "mathContext": "The polynomial method is now central to additive combinatorics.",
    "significance": "key",
    "relatedConcepts": ["Polynomial method", "Combinatorial Nullstellensatz", "Alon"]
  },
  {
    "id": "ann-e476-generalized",
    "proofId": "erdos-476",
    "range": { "startLine": 230, "endLine": 245 },
    "type": "axiom",
    "title": "Generalization to r-Sums",
    "content": "**restrictedSumsetR:**\n\nThe set of sums a‚ÇÅ + a‚ÇÇ + ... + a·µ£ where all a·µ¢ are distinct elements of A.\n\n**erdos_generalized:**\n|r-fold restricted sumset| ‚â• min(r|A| - r¬≤ + 1, p)\n\nFor r = 2: min(2|A| - 3, p) ‚úì\n\nThis generalization was also conjectured by Erd≈ës and proved via the polynomial method.",
    "significance": "key",
    "relatedConcepts": ["r-fold sums", "Generalization"]
  },
  {
    "id": "ann-e476-card-two",
    "proofId": "erdos-476",
    "range": { "startLine": 251, "endLine": 257 },
    "type": "theorem",
    "title": "Example: |A| = 2",
    "content": "**card_two_case:**\n\nIf A = {a, b} with a ‚â† b, then:\n  A +ÃÇ A = {a + b}\n\nExactly 1 element. The bound gives min(2¬∑2 - 3, p) = min(1, p) = 1. ‚úì",
    "significance": "supporting",
    "relatedConcepts": ["Small cases", "Examples"]
  },
  {
    "id": "ann-e476-card-three",
    "proofId": "erdos-476",
    "range": { "startLine": 259, "endLine": 270 },
    "type": "theorem",
    "title": "Example: |A| = 3",
    "content": "**card_three_lower_bound:**\n\nFor |A| = 3, the restricted sumset has at least 3 elements.\n\nThe bound gives min(2¬∑3 - 3, p) = min(3, p) = 3 for p ‚â• 3.\n\nIf A = {a, b, c}, then A +ÃÇ A contains a+b, a+c, b+c (at least 3 elements).",
    "significance": "supporting",
    "relatedConcepts": ["Small cases", "Examples"]
  },
  {
    "id": "ann-e476-summary",
    "proofId": "erdos-476",
    "range": { "startLine": 276, "endLine": 300 },
    "type": "theorem",
    "title": "Summary Theorem",
    "content": "**erdos_476_summary:**\n\nCombines the main results:\n1. |A +ÃÇ A| ‚â• min(2|A| - 3, p) for all A with |A| ‚â• 2\n2. The bound is tight (achieved by arithmetic progressions)\n\nThe Erd≈ës-Heilbronn conjecture is completely resolved.",
    "significance": "key",
    "relatedConcepts": ["Summary", "Main results"]
  }
]

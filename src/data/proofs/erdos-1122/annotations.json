[
  {
    "id": "ann-e1122-header",
    "proofId": "erdos-1122",
    "range": { "startLine": 1, "endLine": 23 },
    "type": "concept",
    "title": "Problem Overview",
    "content": "Erdos Problem #1122 asks about additive functions f: N -> R (satisfying f(ab) = f(a) + f(b) when gcd(a,b) = 1). The monotonicity defect set A = {n >= 1 : f(n+1) < f(n)} collects where f fails to increase. The conjecture: if |A cap [1,X]| = o(X), must f(n) = c*log(n)? Status: OPEN, with partial progress by Erdos (1946) and Mangerel (2022).",
    "mathContext": "From Erdos's 1946 work on additive functions.",
    "significance": "critical",
    "relatedConcepts": ["Additive functions", "Monotonicity", "Logarithms"]
  },
  {
    "id": "ann-e1122-additive",
    "proofId": "erdos-1122",
    "range": { "startLine": 46, "endLine": 48 },
    "type": "definition",
    "title": "Additive Function",
    "content": "IsAdditive f means f(ab) = f(a) + f(b) whenever gcd(a,b) = 1, for a,b >= 1. Examples include log(n), omega(n) (distinct prime factors), and Omega(n) (prime factors with multiplicity). This is weaker than completely additive, which requires the identity for all a, b.",
    "significance": "critical"
  },
  {
    "id": "ann-e1122-completely-additive",
    "proofId": "erdos-1122",
    "range": { "startLine": 50, "endLine": 52 },
    "type": "definition",
    "title": "Completely Additive",
    "content": "IsCompletelyAdditive f means f(ab) = f(a) + f(b) for ALL a, b >= 1 (not just coprime). This is a stronger condition than additive. The logarithm is the canonical example of a completely additive function.",
    "significance": "key"
  },
  {
    "id": "ann-e1122-log-additive",
    "proofId": "erdos-1122",
    "range": { "startLine": 54, "endLine": 59 },
    "type": "theorem",
    "title": "Logarithm is Completely Additive",
    "content": "log_completely_additive proves that Real.log is completely additive on positive naturals: log(ab) = log(a) + log(b). The proof uses Nat.cast_mul to convert the natural number product to reals, then applies Real.log_mul. This is the fundamental property making log the canonical additive function.",
    "significance": "key"
  },
  {
    "id": "ann-e1122-defect-set",
    "proofId": "erdos-1122",
    "range": { "startLine": 67, "endLine": 69 },
    "type": "definition",
    "title": "Monotonicity Defect Set",
    "content": "monotonicityDefectSet f = {n >= 1 : f(n+1) < f(n)} collects the natural numbers where f fails to be monotone increasing. The size of this set relative to the interval [1,X] is the central quantity in the conjecture.",
    "significance": "critical"
  },
  {
    "id": "ann-e1122-littleo",
    "proofId": "erdos-1122",
    "range": { "startLine": 75, "endLine": 77 },
    "type": "definition",
    "title": "Little-o Condition",
    "content": "defectIsLittleO f encodes |A cap [1,X]| = o(X): for every epsilon > 0, eventually the defect count is less than epsilon * X. This is the key hypothesis in the conjecture, expressing that monotonicity failures are asymptotically sparse.",
    "significance": "critical"
  },
  {
    "id": "ann-e1122-empty-increasing",
    "proofId": "erdos-1122",
    "range": { "startLine": 83, "endLine": 91 },
    "type": "theorem",
    "title": "Empty Defect Implies Increasing",
    "content": "empty_defect_means_increasing proves that if the defect set is empty, then f(n) <= f(n+1) for all n >= 1. The proof is by contradiction: if f(n+1) < f(n), then n is in the defect set, contradicting emptiness.",
    "significance": "supporting"
  },
  {
    "id": "ann-e1122-logarithmic-form",
    "proofId": "erdos-1122",
    "range": { "startLine": 95, "endLine": 97 },
    "type": "definition",
    "title": "Logarithmic Form",
    "content": "hasLogarithmicForm f means there exists c in R such that f(n) = c*log(n) for all n >= 1. This is the conclusion the conjecture aims to establish: sparse defects should force f to be a scalar multiple of the logarithm.",
    "significance": "critical"
  },
  {
    "id": "ann-e1122-log-is-additive",
    "proofId": "erdos-1122",
    "range": { "startLine": 105, "endLine": 111 },
    "type": "theorem",
    "title": "Logarithmic Functions are Additive",
    "content": "logarithmic_is_additive proves that any function of the form c*log(n) is additive. The proof substitutes the logarithmic form, uses log_mul for coprime arguments, and concludes by ring arithmetic. This shows the conjecture's conclusion is consistent with the hypothesis.",
    "significance": "key"
  },
  {
    "id": "ann-e1122-erdos-empty",
    "proofId": "erdos-1122",
    "range": { "startLine": 115, "endLine": 118 },
    "type": "axiom",
    "title": "Erdos Empty Defect Theorem",
    "content": "erdos_empty_defect axiomatizes Erdos's 1946 result: if f is additive and the defect set is empty (f is weakly increasing), then f = c*log. This is the strongest known special case, showing that full monotonicity forces logarithmic form.",
    "mathContext": "Erdos (1946)",
    "significance": "critical"
  },
  {
    "id": "ann-e1122-vanishing",
    "proofId": "erdos-1122",
    "range": { "startLine": 120, "endLine": 126 },
    "type": "axiom",
    "title": "Vanishing Increments Theorem",
    "content": "erdos_vanishing_increments axiomatizes the Erdos/Katai-Wirsing theorem: if f is additive and f(n+1) - f(n) tends to 0, then f = c*log. The increments vanishing condition uses Mathlib's Filter.Tendsto to express convergence to 0 along the atTop filter.",
    "mathContext": "Erdos (1946), also Katai-Wirsing",
    "significance": "critical"
  },
  {
    "id": "ann-e1122-mangerel-density",
    "proofId": "erdos-1122",
    "range": { "startLine": 130, "endLine": 133 },
    "type": "definition",
    "title": "Mangerel's Density Condition",
    "content": "satisfiesMangerelDensity f means |A cap [1,X]| <= C * X / (log X)^{2+c} for some c > 0 and C > 0. This is stronger than o(X) but weaker than empty defect. It is the density condition under which Mangerel proved the conjecture (with an additional bounded prime values hypothesis).",
    "significance": "key"
  },
  {
    "id": "ann-e1122-mangerel-thm",
    "proofId": "erdos-1122",
    "range": { "startLine": 140, "endLine": 144 },
    "type": "axiom",
    "title": "Mangerel's Theorem (2022)",
    "content": "mangerel_2022 axiomatizes Mangerel's partial progress: if f is additive, satisfies the Mangerel density bound, and has bounded prime values (|f(p)| grows slower than any epsilon * log(p)), then f = c*log. Published in Ramanujan J. (2022), pages 1023-1090.",
    "mathContext": "Alexander Mangerel's 2022 partial progress.",
    "significance": "critical"
  },
  {
    "id": "ann-e1122-conjecture",
    "proofId": "erdos-1122",
    "range": { "startLine": 148, "endLine": 154 },
    "type": "definition",
    "title": "The Conjecture",
    "content": "erdos1122Conjecture states the full open problem: for all additive f, if |A cap [1,X]| = o(X), then f = c*log. The axiom erdos_1122 asserts this conjecture, marking it as an open problem that has not been resolved.",
    "significance": "critical"
  },
  {
    "id": "ann-e1122-hierarchy",
    "proofId": "erdos-1122",
    "range": { "startLine": 158, "endLine": 179 },
    "type": "theorem",
    "title": "Condition Hierarchy",
    "content": "empty_implies_littleO proves that an empty defect set implies o(X) density (since the count is identically 0). The conditionHierarchy definition captures the full chain: empty defect => Mangerel density => o(X) density. mangerel_implies_littleO is axiomatized since X/(log X)^{2+c} = o(X) requires analytic estimates.",
    "significance": "key"
  },
  {
    "id": "ann-e1122-log-example",
    "proofId": "erdos-1122",
    "range": { "startLine": 183, "endLine": 190 },
    "type": "theorem",
    "title": "Log Has Empty Defect",
    "content": "log_has_empty_defect proves that log(n) is strictly increasing on positive naturals, so its defect set is empty. The proof unfolds the definitions and uses Real.log_le_log to show log(n) <= log(n+1) for n >= 1.",
    "significance": "supporting"
  },
  {
    "id": "ann-e1122-omega",
    "proofId": "erdos-1122",
    "range": { "startLine": 192, "endLine": 199 },
    "type": "concept",
    "title": "Counterexample: omega(n)",
    "content": "omega(n) = number of distinct prime factors is defined and axiomatized as additive (omega(ab) = omega(a) + omega(b) for coprime a,b) but not logarithmic. This shows that not every additive function has logarithmic form - some additional condition (like sparse defects) is needed.",
    "significance": "supporting"
  },
  {
    "id": "ann-e1122-summary",
    "proofId": "erdos-1122",
    "range": { "startLine": 207, "endLine": 215 },
    "type": "theorem",
    "title": "Summary Theorem",
    "content": "erdos_1122_summary consolidates the three known positive results into a single conjunction: (1) empty defect implies logarithmic (Erdos 1946), (2) vanishing increments implies logarithmic (Katai-Wirsing), (3) Mangerel density with bounded primes implies logarithmic (Mangerel 2022).",
    "significance": "critical"
  }
]

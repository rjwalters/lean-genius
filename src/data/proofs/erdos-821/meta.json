{
  "id": "erdos-821",
  "title": "Erdős Problem #821: Large Values of the Euler Phi Preimage Function",
  "slug": "erdos-821",
  "description": "Let g(n) count m with φ(m)=n. For every ε>0, are there infinitely many n with g(n) > n^{1-ε}? OPEN: Best known is g(n) > n^{0.71568} (Lichtman 2022).",
  "meta": {
    "author": "Lichtman (2022, best bound)",
    "sourceUrl": "https://erdosproblems.com/821",
    "date": "2022",
    "status": "complete",
    "proofRepoPath": "Proofs/Erdos821Problem.lean",
    "tags": [
      "erdos",
      "number-theory",
      "euler-phi",
      "totient",
      "smooth-numbers",
      "open"
    ],
    "badge": "axiom",
    "sorries": 0,
    "erdosNumber": 821,
    "erdosUrl": "https://erdosproblems.com/821",
    "erdosProblemStatus": "open",
    "dateAdded": "2026-01-23",
    "mathlib_version": "4.15.0",
    "mathlibDependencies": [
      {
        "theorem": "Nat.totient",
        "description": "Euler's totient function φ(n)",
        "module": "Mathlib.NumberTheory.EulerPhi.Basic"
      },
      {
        "theorem": "Nat.card",
        "description": "Cardinality for preimage counting",
        "module": "Mathlib.Data.Nat.Basic"
      },
      {
        "theorem": "Real.log",
        "description": "Logarithm for density estimates",
        "module": "Mathlib.Analysis.SpecialFunctions.Log.Basic"
      }
    ],
    "originalContributions": [
      "phi, preimageCount: Euler totient and preimage count",
      "pillai_theorem: lim sup g(n) = ∞",
      "erdos_1935: g(n) > n^c for some c > 0",
      "lichtmanExponent, lichtman_theorem: best known bound 0.71568",
      "ErdosConjecture821: formal statement g(n) > n^{1-ε}",
      "IsEpsilonSmooth, SmoothPrimesCondition: smooth primes connection",
      "smooth_implies_conjecture: reduction to smooth primes",
      "preimageCount_upper_bound, average_preimageCount: bounds",
      "erdos_821_partial, erdos_821_best_known: partial results"
    ]
  },
  "overview": {
    "historicalContext": "**Erdős Problem #821 (Euler Phi Preimage Function)**\n\n**Origin:**\nLet g(n) count the number of m such that φ(m) = n. Erdős asked whether g(n) > n^{1-ε} for infinitely many n, for every ε > 0.\n\n**Progress:**\n- Pillai: Proved lim sup g(n) = ∞\n- Erdős (1935): Showed g(n) > n^c for some c > 0 infinitely often\n- Baker-Harman (1998): Improved bounds\n- Lichtman (2022): Current best: g(n) > n^{0.71568...} infinitely often\n\n**Connection:**\nThe conjecture would follow if there are ≫ x/log x primes p < x with all prime factors of p-1 less than p^ε (smooth shifted primes).\n\n**Status:**\nThe full conjecture remains OPEN. The gap between the best known exponent 0.71568 and the target 1 is significant.",
    "problemStatement": "**Problem Statement (Open)**\n\nLet g(n) = |{m : φ(m) = n}| count preimages of n under Euler's totient.\n\n**Question:** For every ε > 0, are there infinitely many n with g(n) > n^{1-ε}?\n\n**Status: OPEN**\n\n- Known: g(n) > n^{0.71568} infinitely often (Lichtman 2022)\n- Conjectured: g(n) > n^{1-ε} for all ε > 0\n- Gap: exponent 0.71568 vs target 1",
    "proofStrategy": "**Formalization Approach**\n\n1. **Basic Definitions:** phi (Euler totient), preimageCount (g(n))\n\n2. **Known Results:** pillai_theorem, erdos_1935, lichtman_theorem\n\n3. **Main Conjecture:** ErdosConjecture821 formal statement\n\n4. **Smooth Primes:** IsEpsilonSmooth, SmoothPrimesCondition\n\n5. **Reduction:** smooth_implies_conjecture showing the connection\n\n6. **Bounds:** Upper and average bounds on g(n)\n\n7. **Partial Results:** erdos_821_partial, erdos_821_best_known",
    "keyInsights": [
      "**Preimage Function:** g(n) = |{m : φ(m) = n}| counts totient preimages",
      "**Best Bound:** Lichtman (2022): g(n) > n^{0.71568} infinitely often",
      "**Smooth Primes:** Conjecture follows from density of primes with smooth p-1",
      "**Gap to Close:** From 0.71568 to arbitrarily close to 1",
      "**Related #416:** Connected to shifted primes problems"
    ]
  },
  "sections": [],
  "conclusion": {
    "summary": "Erdős Problem #821 asks whether g(n) > n^{1-ε} for infinitely many n, where g(n) counts preimages of n under Euler's totient. The problem is OPEN. Lichtman (2022) proved the best known bound g(n) > n^{0.71568} infinitely often. The conjecture would follow from sufficient density of primes with smooth p-1.",
    "implications": "**Connections**\n\n1. **Euler's Totient:** Deep properties of φ preimages\n\n2. **Smooth Numbers:** Primes p with smooth p-1 are key\n\n3. **Carmichael's Conjecture:** Related: no unique preimages of φ\n\n4. **Problem #416:** Connected shifted primes questions",
    "openQuestions": [
      "Can the exponent 0.71568 be improved toward 1?",
      "Is there a barrier at some specific exponent?",
      "What is the exact density of primes with ε-smooth p-1?",
      "Can the connection to smooth primes be made unconditional?"
    ]
  }
}
